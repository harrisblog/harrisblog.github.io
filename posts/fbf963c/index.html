<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Python网络爬虫笔记 | Harris's Blog</title><meta name="keywords" content="🐍Python,🐛爬虫"><meta name="author" content="Harris Wong"><meta name="copyright" content="Harris Wong"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="参考 B 站IT 私塾的Python 爬虫编程基础 5 天速成（2021 全新合集）Python 入门+数据分析视频  初识网络爬虫网络爬虫（又被称为网页蜘蛛、网络机器人），是一种按照一定的规则，自动地抓取互联网信息的程序或者脚本。 其本质是，由一个入口网页进行深入，不停的进行其他的 URL 的爬取，然后再把抓取到的网页进行分析处理得出想要的数据。 Robots 协议，是网站跟爬虫间的协议，用简"><meta property="og:type" content="article"><meta property="og:title" content="Python网络爬虫笔记"><meta property="og:url" content="https://blog.harriswong.top/posts/fbf963c/index.html"><meta property="og:site_name" content="Harris&#39;s Blog"><meta property="og:description" content="参考 B 站IT 私塾的Python 爬虫编程基础 5 天速成（2021 全新合集）Python 入门+数据分析视频  初识网络爬虫网络爬虫（又被称为网页蜘蛛、网络机器人），是一种按照一定的规则，自动地抓取互联网信息的程序或者脚本。 其本质是，由一个入口网页进行深入，不停的进行其他的 URL 的爬取，然后再把抓取到的网页进行分析处理得出想要的数据。 Robots 协议，是网站跟爬虫间的协议，用简"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_python.png"><meta property="article:published_time" content="2021-07-14T11:02:00.000Z"><meta property="article:modified_time" content="2022-03-14T13:00:00.000Z"><meta property="article:author" content="Harris Wong"><meta property="article:tag" content="🐍Python"><meta property="article:tag" content="🐛爬虫"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_python.png"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/npm/hassan-assets/img/favicon.ico"><link rel="canonical" href="https://blog.harriswong.top/posts/fbf963c/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#1fc7b6"><link rel="apple-touch-icon" sizes="180x180" href="https://cdn.jsdelivr.net/npm/hassan-assets/img/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="https://cdn.jsdelivr.net/npm/hassan-assets/img/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="https://cdn.jsdelivr.net/npm/hassan-assets/img/favicon.ico"><link rel="mask-icon" href="https://cdn.jsdelivr.net/npm/hassan-assets/img/favicon.ico" color="#5bbad5"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://unpkg.com/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?7037b55a6e73a4d644e9f9f66c4db475";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简"},noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:388},copy:{success:"复制成功，请注明博客来源",error:"复制错误！",noSupport:"浏览器不支持！"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{limitCount:1e3,languages:{author:"作者: Harris Wong",link:"链接: ",source:"来源: Harris's Blog",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},lightbox:"mediumZoom",Snackbar:{chs_to_cht:"已为您切换繁体~",cht_to_chs:"已为您切换简体~",day_to_night:"已为您切换深色模式~",night_to_day:"已为您切换浅色模式~",bgLight:"#62cec4",bgDark:"#666",position:"bottom-center"},source:{justifiedGallery:{js:"https://unpkg.com/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://unpkg.com/flickr-justified-gallery/dist/fjGallery.css"}},isPhotoFigcaption:!0,islazyload:!0,isAnchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Python网络爬虫笔记",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2022-03-14 13:00:00"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const a=864e5*o,n={value:t,expiry:(new Date).getTime()+a};localStorage.setItem(e,JSON.stringify(n))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const a=document.createElement("script");a.src=e,a.async=!0,a.onerror=o,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","ffffff")};const t=saveToLocal.get("theme"),o=(new Date).getHours();void 0===t?o<=6||o>=18?activateDarkMode():activateLightMode():"light"===t?activateLightMode():activateDarkMode();const a=saveToLocal.get("aside-status");void 0!==a&&("hide"===a?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/custom/custom.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_2204525_jxth1d6fs6o.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" onload='this.media="screen"'><link rel="stylesheet" href="/css/custom/twikoo_beautify.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="//s1.hdslb.com/bfs/static/jinkela/long/font/regular.css" media="all" onload='this.media="all"'><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Harris's Blog" type="application/atom+xml"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/npm/hassan-assets/img/avatar_blog.jpg" onerror='onerror=null,src="https://cdn.jsdelivr.net/npm/hassan-assets/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">Harris Wong</div><div class="author-info__description">一名什锦区博主，这里我将记录学习过程中的笔记、生活中的点点滴滴，分享一些经验与想法。在这里相遇很幸运 💛💙</div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">时光机</div><div class="length-num">99</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">51</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/harrisblog/" target="_blank" title="GitHub"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-GitHub"></use></svg></a><a class="social-icon" href="mailto:hassanwong@qq.com" target="_blank" title="QQEmail"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-email"></use></svg></a><a class="social-icon" href="https://weibo.com/hassan89" target="_blank" title="Sina"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-sina"></use></svg></a><a class="social-icon" href="https://space.bilibili.com/383883097" target="_blank" title="Bilibili"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg></a><a class="social-icon" href="https://kg.qq.com/node/personal?uid=639b9c81222c368234" target="_blank" title="全民K歌"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-quanminkge"></use></svg></a><a class="social-icon" href="https://y.qq.com/n/yqq/playlist/7934226388.html#stat=y_new.profile.create_playlist.click&amp;dirid=1" target="_blank" title="QQMusic"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-QQMusic"></use></svg></a><a class="social-icon" href="https://music.163.com/#/user/home?id=1322854335" target="_blank" title="Netease"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease"></use></svg></a><a class="social-icon" href="https://www.zhihu.com/people/song-69-76" target="_blank" title="知乎"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu"></use></svg></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i> <span>文库</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>时光机</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-shapes"></i> <span>分类</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw iconfont icon-book"></i> <span>书评</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://doc.harriswong.top"><i class="fa-fw fas fa-file"></i> <span>文档网站</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-cube"></i> <span>生活</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/playlist/"><i class="fa-fw fas fa-music"></i> <span>歌单</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-film"></i> <span>影评</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-photo-video"></i> <span>相册</span></a></li><li><a class="site-page child" href="/bb/"><i class="fa-fw fas fa-bomb"></i> <span>哔哔</span></a></li><li><a class="site-page child" href="/sweetcloud/"><i class="fa-fw fas fa-heart"></i> <span>情侣哔哔</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-puzzle-piece"></i> <span>功能</span></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://gal.harriswong.top"><i class="fa-fw iconfont icon-gallery"></i> <span>画廊</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://mb.harriswong.top"><i class="fa-fw iconfont icon-musicbox"></i> <span>八音盒</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://navi.harriswong.top"><i class="fa-fw fas fa-paper-plane"></i> <span>网址导航</span></a></li><li><a class="site-page child" href="/videoparsing/"><i class="fa-fw iconfont icon-video"></i> <span>视频解析</span></a></li><li><a class="site-page child" href="/ymts/"><i class="fa-fw iconfont icon-overseas"></i> <span>留学团队</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-child"></i> <span>朋友</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友人帐</span></a></li><li><a class="site-page child" href="/friendcircle/"><i class="fa-fw fas fa-spinner"></i> <span>朋友圈</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-info-circle"></i> <span>本站</span></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://harriswong.top"><i class="fa-fw fa-solid fa-house"></i> <span>个人主页</span></a></li><li><a class="site-page child" href="/notice/"><i class="fa-fw iconfont icon-notice"></i> <span>公告栏</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-star"></i> <span>关于本站</span></a></li><li><a class="site-page child" href="/comments/"><i class="fa-fw fas fa-comments"></i> <span>留言信枫</span></a></li><li><a class="site-page child" href="/log/"><i class="fa-fw fas fa-pencil-ruler"></i> <span>更新手账</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_python.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Harris's Blog</a></span><span id="page_name"><a id="page-name-text" onclick="btf.scrollToDest(0,500)" data-title="🎉欢迎光临诗颂的博客🎈">Python网络爬虫笔记</a></span><div class="menus_items"><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i> <span>文库</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>时光机</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-shapes"></i> <span>分类</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw iconfont icon-book"></i> <span>书评</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://doc.harriswong.top"><i class="fa-fw fas fa-file"></i> <span>文档网站</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-cube"></i> <span>生活</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/playlist/"><i class="fa-fw fas fa-music"></i> <span>歌单</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-film"></i> <span>影评</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-photo-video"></i> <span>相册</span></a></li><li><a class="site-page child" href="/bb/"><i class="fa-fw fas fa-bomb"></i> <span>哔哔</span></a></li><li><a class="site-page child" href="/sweetcloud/"><i class="fa-fw fas fa-heart"></i> <span>情侣哔哔</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-puzzle-piece"></i> <span>功能</span></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://gal.harriswong.top"><i class="fa-fw iconfont icon-gallery"></i> <span>画廊</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://mb.harriswong.top"><i class="fa-fw iconfont icon-musicbox"></i> <span>八音盒</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://navi.harriswong.top"><i class="fa-fw fas fa-paper-plane"></i> <span>网址导航</span></a></li><li><a class="site-page child" href="/videoparsing/"><i class="fa-fw iconfont icon-video"></i> <span>视频解析</span></a></li><li><a class="site-page child" href="/ymts/"><i class="fa-fw iconfont icon-overseas"></i> <span>留学团队</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-child"></i> <span>朋友</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友人帐</span></a></li><li><a class="site-page child" href="/friendcircle/"><i class="fa-fw fas fa-spinner"></i> <span>朋友圈</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-info-circle"></i> <span>本站</span></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://harriswong.top"><i class="fa-fw fa-solid fa-house"></i> <span>个人主页</span></a></li><li><a class="site-page child" href="/notice/"><i class="fa-fw iconfont icon-notice"></i> <span>公告栏</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-star"></i> <span>关于本站</span></a></li><li><a class="site-page child" href="/comments/"><i class="fa-fw fas fa-comments"></i> <span>留言信枫</span></a></li><li><a class="site-page child" href="/log/"><i class="fa-fw fas fa-pencil-ruler"></i> <span>更新手账</span></a></li></ul></div></div><div id="nav-right"><div class="nav-button" title="Search"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>站内搜索</span></a></div><div class="nav-button" id="mode-button"><a class="site-page" onclick="navFn.switchDarkMode()" title="深浅切换"><i class="fas fa-moon"></i> <span>深浅切换</span></a></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div class="coverdiv" id="coverdiv"><img id="post-cover" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_python.png" alt="cover"></div><div id="post-info"><h1 class="post-title">Python网络爬虫笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><time class="post-meta-date-created" datetime="2021-07-14T11:02:00.000Z" title="发表于 2021-07-14 11:02:00">2021-07-14</time><i class="fas fa-history fa-fw post-meta-icon"></i><time class="post-meta-date-updated" datetime="2022-03-14T13:00:00.000Z" title="更新于 2022-03-14 13:00:00">2022-03-14</time></span><span class="post-meta-categories"><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%F0%9F%93%95%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0/">📕知识笔记</a></span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="word-count">10.2k</span><i class="far fa-clock fa-fw post-meta-icon"></i><span>44分钟</span></span><span class="post-meta-pv-cv" data-flag-title="Python网络爬虫笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span></span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><a href="/posts/fbf963c/#post-comment"><span id="twikoo-count"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><blockquote><p>参考 B 站<strong>IT 私塾</strong>的<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV12E411A7ZQ">Python 爬虫编程基础 5 天速成（2021 全新合集）Python 入门+数据分析</a>视频</p></blockquote><h1 id="初识网络爬虫"><a href="#初识网络爬虫" class="headerlink" title="初识网络爬虫"></a>初识网络爬虫</h1><p><strong>网络爬虫</strong>（又被称为网页蜘蛛、网络机器人），是一种按照一定的规则，自动地抓取互联网信息的程序或者脚本。</p><p>其<strong>本质</strong>是，由一个入口网页进行深入，不停的进行其他的 URL 的爬取，然后再把抓取到的网页进行分析处理得出想要的数据。</p><p><strong>Robots 协议</strong>，是网站跟爬虫间的协议，用简单直接的 txt 格式文本方式告诉对应的爬虫被允许的权限</p><h2 id="网络爬虫的一般流程"><a href="#网络爬虫的一般流程" class="headerlink" title="网络爬虫的一般流程"></a>网络爬虫的一般流程</h2><ol><li><p><strong>发起请求，获取响应</strong></p><p>通过 http 库，对目标站点进行请求。等同于自己打开浏览器，输入网址</p><p>常用库：urllib、urllib3、requests</p><p>服务器会返回请求的内容，一般为：html、二进制文件（视频，音频）、文档，json 字符串</p></li><li><p><strong>解析内容</strong></p><p>寻找自己需要的信息，就是利用正则表达式或者其他库提取目标信息</p><p>常用库：re、beautifulsoup4</p></li><li><p><strong>数据持久化</strong><br>将解析得到的数据保存到文件或者数据库中</p></li></ol><br><h1 id="基本流程"><a href="#基本流程" class="headerlink" title="基本流程"></a>基本流程</h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul><li>弄清楚你需要爬取哪些页面，以及哪的数据</li></ul><h3 id="分析页面"><a href="#分析页面" class="headerlink" title="分析页面"></a>分析页面</h3><p>借助 Chrome 开发者工具（F12）来分析网页，在 Elements 下找到需要的数据位置</p><h3 id="编码规范"><a href="#编码规范" class="headerlink" title="编码规范"></a>编码规范</h3><ul><li>一般 Python 程序第一行需要加入：<code>#-*- coding:utf-8 -*-</code>或者<code># coding=utf-8</code>。这样可以在代码中包含中文</li><li>使用函数实现单一功能或相关联功能的代码段，可以提高可读性和代码重复利用率，函数代码块以 def 关键词开头。</li><li>可以加入 main 函数用于测试程序：<code>if __name__ == &quot;__main__&quot;:</code></li><li>使用 # 添加注释，说明代码段的作用</li></ul><h3 id="引入模块"><a href="#引入模块" class="headerlink" title="引入模块"></a>引入模块</h3><p><strong>模块 module</strong>：用来从逻辑上组织 Python 代码（变量、函数、类），本质就是 py 文件，提高代码的可维护性。</p><p>module 可看作一个工具类，可共用或者隐藏代码细节，将相关代码放置在一个 module 以便让代码更好用、易懂，让 coder 重点放在高层逻辑上。</p><p>module 能定义函数、类、变量，也能包含可执行的代码。module 来源有 3 种：</p><ol><li><p>Python 内置的模块（标准库）</p></li><li><p>第三方模块</p></li><li><p>自定义模块</p></li></ol><p><strong>包 package</strong>： 为避免模块名冲突，Python 引入了按目录组织模块的方法。包是含有 Python 模块的文件夹。</p><p>例子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br></pre></td></tr></table></figure><h2 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h2><ul><li>对每一个页面，调用 askURL 函数获取页面内容</li><li>定义一个获取页面的函数 askURL，传入一个 url 参数，表示网址</li><li><code>urllib.Request</code>生成请求。<code>urllib.urlopen</code>发送请求获取响应。read 获取页面内容。</li><li>在访问页面时经常会出现错误，为了程序正常运行，加入异常捕获<code>try...except...</code>语句</li></ul><p><strong>urllib</strong> 是 python 标准库，直接使用</p><p><code>request.urlopen()</code>：接收一个 url 或一个 request 对象，向目标发起请求</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;https://www.baidu.com&quot;</span></span><br><span class="line"></span><br><span class="line">response = request.urlopen(url)  <span class="comment"># 访问该url并获得响应</span></span><br><span class="line"></span><br><span class="line">print(response.geturl())         <span class="comment"># 获取主机地址</span></span><br><span class="line">print(response.getcode())        <span class="comment"># 获取请求状态码</span></span><br><span class="line">print(response.info())           <span class="comment"># 获取响应头</span></span><br><span class="line"></span><br><span class="line">html = response.read()           <span class="comment"># 获取的是字节形式的内容</span></span><br><span class="line">html.decode(<span class="string">&quot;utf-8&quot;</span>)        <span class="comment"># 解码</span></span><br><span class="line">print(html)</span><br></pre></td></tr></table></figure><details><summary>常见的HTTP状态码</summary><div class="content"><table><thead><tr><th>状态码</th><th>英文名称</th><th>中文描述</th></tr></thead><tbody><tr><td>200</td><td>OK</td><td>请求成功。一般用于 GET 与 POST 请求</td></tr><tr><td>301</td><td>Moved Permanently</td><td>永久移动。请求的资源已被永久的移动到新 URI，返回信息会包括新的 URI，浏览器会自动定向到新 URI。今后任何新的请求都应使用新的 URI 代替</td></tr><tr><td>404</td><td>Not Found</td><td>服务器无法根据客户端的请求找到资源（网页）。通过此代码，网站设计人员可设置&quot;您所请求的资源无法找到&quot;的个性页面</td></tr><tr><td>500</td><td>Internal Server Error</td><td>服务器内部错误，无法完成请求</td></tr></tbody></table><p><a target="_blank" rel="noopener" href="https://www.runoob.com/http/http-status-codes.html">想了解状态码更多？</a></p></div></details><h3 id="urllib-模块"><a href="#urllib-模块" class="headerlink" title="urllib 模块"></a>urllib 模块</h3><p>这最基本的请求，是 python 内置的一个 http 请求库，不需要额外的安装。只需要关注请求的链接、参数，提供了强大的解析。</p><p>urllb.request 请求模块</p><p>urllib.error 异常处理模块</p><p>urllib.parse 解析模块</p><p><strong>用法讲解</strong>：</p><ol><li>简单的一个 get 请求：</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line">reponse = urllib.request.urlopen(<span class="string">&#x27;http://www.baidu.com&#x27;</span>)</span><br><span class="line">print(reponse.read().decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure><ol start="2"><li>简单的一个 post 请求</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line">data = <span class="built_in">bytes</span>(urllib.parse.urlencode(&#123;<span class="string">&#x27;hello&#x27;</span>:<span class="string">&#x27;world&#x27;</span>&#125;),encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">reponse = urllib.request.urlopen(<span class="string">&#x27;http://httpbin.org/post&#x27;</span>,data=data)</span><br><span class="line">print(reponse.read())</span><br></pre></td></tr></table></figure><ol start="3"><li>超时处理</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line">response = urllib.request.urlopen(<span class="string">&#x27;http://httpbin.org/get&#x27;</span>,timeout=<span class="number">1</span>)</span><br><span class="line">print(response.read())</span><br></pre></td></tr></table></figure><ol start="4"><li>由于使用 urlopen 无法传入参数，我们需要声明一个 request 对象，通过这个对象来添加参数</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line">request = urllib.request.Request(<span class="string">&#x27;https://python.org&#x27;</span>) <span class="comment">#由于urlopen无法传参数，声明一个Request对象</span></span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line">print(response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure><ol start="5"><li>我们还可以分别创建字符串、字典等等来带入到 request 对象里面</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request,parse</span><br><span class="line">url=<span class="string">&#x27;http://httpbin.org/post&#x27;</span></span><br><span class="line">headers=&#123;</span><br><span class="line">    <span class="string">&#x27;user-agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36(KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Host&#x27;</span>:<span class="string">&#x27;httpbin.org&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">dict</span>=&#123;</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;jay&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">data = <span class="built_in">bytes</span>(parse.urlencode(<span class="built_in">dict</span>),encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">req=request.Request(url=url,data=data,headers=headers,method=<span class="string">&#x27;POST&#x27;</span>)</span><br><span class="line">response=request.urlopen(req)</span><br><span class="line">print(response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure><ol start="6"><li>还可通过 addheaders 方法不断地向原始的 requests 对象里不断添加</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request,parse</span><br><span class="line">url =<span class="string">&#x27;http://httpbin.org/post&#x27;</span></span><br><span class="line"><span class="built_in">dict</span> = &#123;</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;cq&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">data=<span class="built_in">bytes</span>(parse.urlencode(<span class="built_in">dict</span>),encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">req = request.Request(url=url,data=data,method=<span class="string">&#x27;POST&#x27;</span>)</span><br><span class="line">req.add_header(<span class="string">&#x27;user-agent&#x27;</span>, <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36&#x27;</span>)</span><br><span class="line">response=request.urlopen(req)</span><br><span class="line">print(response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="解析内容"><a href="#解析内容" class="headerlink" title="解析内容"></a>解析内容</h2><ul><li>使用 BeautifulSoup 定位特定的标签位置</li><li>使用正则表达式找到具体的内容</li></ul><h3 id="标签解析"><a href="#标签解析" class="headerlink" title="标签解析"></a>标签解析</h3><p>BeautifulSoup 是一个库，提供一些简单的、python 式的用来处理<u>导航、搜索、修改分析树</u>等功能，通过解析文档为用户提供需要抓取的数据。我们需要的每个电影都在一个&lt;div&gt;的标签中，且每个 div 标签都有一个属性 class= &quot;item&quot;。</p><h3 id="BeautifulSoup-模块"><a href="#BeautifulSoup-模块" class="headerlink" title="BeautifulSoup 模块"></a>BeautifulSoup 模块</h3><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>BeautifulSoup4 和 lxml 一样，Beautiful Soup 也是一个 HTML/XML 的解析器，主要的功能也是如何解析和提取 HTML/XML 数据。</p><p>BeautifulSoup 支持 Python 标准库中的 HTML 解析器,还支持一些第三方的解析器，如果我们不安装它，则 Python 会使用 Python 默认的解析器，lxml 解析器更加强大，速度更快，推荐使用 lxml 解析器。</p><p>Beautiful Soup 自动将输入文档转换为 Unicode 编码，输出文档转换为 utf-8 编码。你不需要考虑编码方式，除非文档没有指定一个编码方式，这时，Beautiful Soup 就不能自动识别编码方式了。然后，你仅仅需要说明一下原始编码方式就可以了。</p><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p>假设有这样一个 Html，具体内容如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">&quot;text/html;charset=utf-8&quot;</span> <span class="attr">http-equiv</span>=<span class="string">&quot;content-type&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">&quot;IE=Edge&quot;</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">&quot;always&quot;</span> <span class="attr">name</span>=<span class="string">&quot;referrer&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">      <span class="attr">href</span>=<span class="string">&quot;https://ss1.bdstatic.com/5eN1bjq8AAUYm2zgoY3K/r/www/cache/bdorz/baidu.min.css&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>百度一下，你就知道<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span> <span class="attr">link</span>=<span class="string">&quot;#0000cc&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;head&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;head_wrapper&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;u1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;mnav&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://news.baidu.com&quot;</span> <span class="attr">name</span>=<span class="string">&quot;tj_trnews&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span>新闻</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;mnav&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://www.hao123.com&quot;</span> <span class="attr">name</span>=<span class="string">&quot;tj_trhao123&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span>hao123</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;mnav&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://map.baidu.com&quot;</span> <span class="attr">name</span>=<span class="string">&quot;tj_trmap&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span>地图</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;mnav&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://v.baidu.com&quot;</span> <span class="attr">name</span>=<span class="string">&quot;tj_trvideo&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span>视频</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;mnav&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://tieba.baidu.com&quot;</span> <span class="attr">name</span>=<span class="string">&quot;tj_trtieba&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span>贴吧</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">              <span class="attr">class</span>=<span class="string">&quot;bri&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">href</span>=<span class="string">&quot;//www.baidu.com/more/&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">name</span>=<span class="string">&quot;tj_briicon&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">style</span>=<span class="string">&quot;display: block;&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span>更多产品</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>创建 beautifulsoup4 对象：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">&#x27;./aa.html&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">html = file.read()</span><br><span class="line">bs = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>) <span class="comment"># 缩进格式</span></span><br><span class="line"></span><br><span class="line">print(bs.prettify()) <span class="comment"># 格式化html结构</span></span><br><span class="line">print(bs.title) <span class="comment"># 获取title标签的名称</span></span><br><span class="line">print(bs.title.name) <span class="comment"># 获取title的name</span></span><br><span class="line">print(bs.title.string) <span class="comment"># 获取head标签的所有内容</span></span><br><span class="line">print(bs.head)</span><br><span class="line">print(bs.div)  <span class="comment"># 获取第一个div标签中的所有内容</span></span><br><span class="line">print(bs.div[<span class="string">&quot;id&quot;</span>]) <span class="comment"># 获取第一个div标签的id的值</span></span><br><span class="line">print(bs.a)</span><br><span class="line">print(bs.find_all(<span class="string">&quot;a&quot;</span>)) <span class="comment"># 获取所有的a标签</span></span><br><span class="line">print(bs.find(<span class="built_in">id</span>=<span class="string">&quot;u1&quot;</span>)) <span class="comment"># 获取id=&quot;u1&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> bs.find_all(<span class="string">&quot;a&quot;</span>):</span><br><span class="line">    print(item.get(<span class="string">&quot;href&quot;</span>)) <span class="comment"># 获取所有的a标签，并遍历打印a标签中的href的值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> bs.find_all(<span class="string">&quot;a&quot;</span>):</span><br><span class="line">    print(item.get_text())</span><br></pre></td></tr></table></figure><h4 id="BeautifulSoup4-四大对象种类"><a href="#BeautifulSoup4-四大对象种类" class="headerlink" title="BeautifulSoup4 四大对象种类"></a>BeautifulSoup4 四大对象种类</h4><p>BeautifulSoup4 将复杂 HTML 文档转换成一个复杂的树形结构,每个节点都是 Python 对象,所有对象可以归纳为 4 种:</p><ul><li>Tag</li><li>NavigableString</li><li>BeautifulSoup</li><li>Comment</li></ul><h5 id="Tag"><a href="#Tag" class="headerlink" title="Tag"></a>Tag</h5><p>Tag 通俗点讲就是 HTML 中的一个个标签，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">&#x27;./aa.html&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">html = file.read()</span><br><span class="line">bs = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line"><span class="comment"># 获取title标签的所有内容</span></span><br><span class="line">print(bs.title)</span><br><span class="line"><span class="comment"># 获取head标签的所有内容</span></span><br><span class="line">print(bs.head)</span><br><span class="line"><span class="comment"># 获取第一个a标签的所有内容</span></span><br><span class="line">print(bs.a)</span><br><span class="line"><span class="comment"># 类型</span></span><br><span class="line">print(<span class="built_in">type</span>(bs.a))</span><br></pre></td></tr></table></figure><p>我们可以利用 soup 加标签名轻松地获取这些标签的内容，这些对象的类型是 bs4.element.Tag。但是注意，它查找的是在所有内容中的第一个符合要求的标签。</p><p>对于 Tag，它有两个重要的属性，是 name 和 attrs：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">&#x27;./aa.html&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">html = file.read()</span><br><span class="line">bs = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line"><span class="comment"># [document] #bs 对象本身比较特殊，它的 name 即为 [document]</span></span><br><span class="line">print(bs.name)</span><br><span class="line"><span class="comment"># head #对于其他内部标签，输出的值便为标签本身的名称</span></span><br><span class="line">print(bs.head.name)</span><br><span class="line"><span class="comment"># 在这里，我们把&quot;a&quot;标签的所有属性打印输出了出来，得到的类型是一个字典。</span></span><br><span class="line">print(bs.a.attrs)</span><br><span class="line"><span class="comment">#还可以利用get方法，传入属性的名称，二者是等价的</span></span><br><span class="line">print(bs.a[<span class="string">&#x27;class&#x27;</span>]) <span class="comment"># 等价 bs.a.get(&#x27;class&#x27;)</span></span><br><span class="line"><span class="comment"># 可以对这些属性和内容等等进行修改</span></span><br><span class="line">bs.a[<span class="string">&#x27;class&#x27;</span>] = <span class="string">&quot;newClass&quot;</span></span><br><span class="line">print(bs.a)</span><br><span class="line"><span class="comment"># 还可以对这个属性进行删除</span></span><br><span class="line"><span class="keyword">del</span> bs.a[<span class="string">&#x27;class&#x27;</span>]</span><br><span class="line">print(bs.a)</span><br></pre></td></tr></table></figure><h5 id="NavigableString"><a href="#NavigableString" class="headerlink" title="NavigableString"></a>NavigableString</h5><p>既然我们已经得到了标签的内容，那么问题来了，我们要想获取标签内部的文字怎么办呢？很简单，用 .string 即可，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">&#x27;./aa.html&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">html = file.read()</span><br><span class="line">bs = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line"></span><br><span class="line">print(bs.title.string)</span><br><span class="line">print(<span class="built_in">type</span>(bs.title.string))</span><br></pre></td></tr></table></figure><h5 id="BeautifulSoup"><a href="#BeautifulSoup" class="headerlink" title="BeautifulSoup"></a>BeautifulSoup</h5><p>BeautifulSoup 对象表示的是一个文档的内容。大部分时候，可以把它当作 Tag 对象，是一个特殊的 Tag，我们可以分别获取它的类型，名称，以及属性，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">&#x27;./aa.html&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">html = file.read()</span><br><span class="line"></span><br><span class="line">bs = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line">print(<span class="built_in">type</span>(bs.name))</span><br><span class="line">print(bs.name)</span><br><span class="line">print(bs.attrs)</span><br></pre></td></tr></table></figure><h5 id="Comment"><a href="#Comment" class="headerlink" title="Comment"></a>Comment</h5><p>Comment 对象是一个特殊类型的 NavigableString 对象，其输出的内容不包括注释符号。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">&#x27;./aa.html&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">html = file.read()</span><br><span class="line">bs = BeautifulSoup(html,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line">print(bs.a)</span><br><span class="line"><span class="comment"># 此时不能出现空格和换行符，a标签如下：</span></span><br><span class="line"><span class="comment"># &lt;a class=&quot;mnav&quot; href=&quot;http://news.baidu.com&quot; name=&quot;tj_trnews&quot;&gt;&lt;!--新闻--&gt;&lt;/a&gt;</span></span><br><span class="line">print(bs.a.string) <span class="comment"># 新闻</span></span><br><span class="line">print(<span class="built_in">type</span>(bs.a.string)) <span class="comment"># &lt;class &#x27;bs4.element.Comment&#x27;&gt;</span></span><br></pre></td></tr></table></figure><h4 id="遍历文档树"><a href="#遍历文档树" class="headerlink" title="遍历文档树"></a>遍历文档树</h4><table><thead><tr><th></th><th>功能</th></tr></thead><tbody><tr><td>.contents</td><td>获取 Tag 的所有子节点，返回一个 list</td></tr><tr><td>.children</td><td>获取 Tag 的所有子节点，返回一个生成器</td></tr><tr><td>.descendants</td><td>获取 Tag 的所有子孙节点</td></tr><tr><td>.strings</td><td>如果 Tag 包含多个字符串，即在子孙节点中有内容，可以用此获取，而后进行遍历</td></tr><tr><td>.stripped_strings</td><td>与 strings 用法一致，只不过可以去除掉那些多余的空白内容</td></tr><tr><td>.parent</td><td>获取 Tag 的父节点</td></tr><tr><td>.parents</td><td>递归得到父辈元素的所有节点，返回一个生成器</td></tr><tr><td>.previous_sibling</td><td>获取当前 Tag 的上一个节点，属性通常是字符串或空白，真实结果是当前标签与上一个标签之间的顿号和换行符</td></tr><tr><td>.next_sibling</td><td>获取当前 Tag 的下一个节点，属性通常是字符串或空白，真是结果是当前标签与下一个标签之间的顿号与换行符</td></tr><tr><td>.previous_siblings</td><td>获取当前 Tag 的上面所有的兄弟节点，返回一个生成器</td></tr><tr><td>.next_siblings</td><td>获取当前 Tag 的下面所有的兄弟节点，返回一个生成器</td></tr><tr><td>.previous_element</td><td>获取解析过程中上一个被解析的对象(字符串或 tag)，可能与 previous_sibling 相同，但通常是不一样的</td></tr><tr><td>.next_element</td><td>获取解析过程中下一个被解析的对象(字符串或 tag)，可能与 next_sibling 相同，但通常是不一样的</td></tr><tr><td>.previous_elements</td><td>返回一个生成器，可以向前访问文档的解析内容</td></tr><tr><td>.next_elements</td><td>返回一个生成器，可以向后访问文档的解析内容</td></tr><tr><td>.has_attr</td><td>判断 Tag 是否包含属性</td></tr></tbody></table><h4 id="搜索文档树"><a href="#搜索文档树" class="headerlink" title="搜索文档树"></a>搜索文档树</h4><h5 id="find-all-name-attrs-recursive-text-kwargs"><a href="#find-all-name-attrs-recursive-text-kwargs" class="headerlink" title="find_all(name, attrs, recursive, text, **kwargs)"></a>find_all(name, attrs, recursive, text, **kwargs)</h5><p>在上面的栗子中我们简单介绍了 find_all 的使用，接下来介绍一下 find_all 的更多用法-过滤器。这些过滤器贯穿整个搜索 API，过滤器可以被用在 tag 的 name 中，节点的属性等。</p><p><strong>（1）name 参数</strong></p><p><strong>字符串过滤</strong>：会查找与字符串完全匹配的内容</p><p><code>bs.find_all(&quot;a&quot;)</code></p><p><strong>正则表达式过滤</strong>：如果传入的是正则表达式，那么 BeautifulSoup4 会通过 search()来匹配内容</p><p><code>bs.find_all(re.compile(&quot;a&quot;))</code></p><p><strong>列表</strong>：如果传入一个列表，BeautifulSoup4 将会与列表中的任一元素匹配到的节点返回</p><p><code>bs.find_all([&quot;meta&quot;,&quot;link&quot;])</code></p><p><strong>方法</strong>：传入一个方法，根据方法来匹配</p><p>下例是判断标签里是否含有 name 属性</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">name_is_exists</span>(<span class="params">tag</span>):</span></span><br><span class="line">    <span class="keyword">return</span> tag.has_attr(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">t_list = bs.find_all(name_is_exists)</span><br></pre></td></tr></table></figure><p><strong>（2）attrs 参数</strong></p><p>并不是所有的属性都可以使用上面这种方式进行搜索，比如 HTML 的<code>data-*</code>属性：</p><p><code>t_list = bs.find_all(data-foo=&quot;value&quot;)</code>❌</p><p>如果执行这段代码，将会<strong>报错</strong>。我们可以使用 attrs 参数，定义一个字典来搜索包含特殊属性的 tag：</p><p><code>t_list = bs.find_all(attrs=&#123;&quot;data-foo&quot;:&quot;value&quot;&#125;)</code>✔</p><p><strong>（3）text 参数</strong></p><p>通过 text 参数可以搜索文档中的字符串内容，与 name 参数的可选值一样，text 参数接受 字符串，正则表达式，列表</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t_list = bs.find_all(attrs=&#123;<span class="string">&quot;data-foo&quot;</span>: <span class="string">&quot;value&quot;</span>&#125;)</span><br><span class="line">t_list = bs.find_all(text=<span class="string">&quot;hao123&quot;</span>)</span><br><span class="line">t_list = bs.find_all(text=[<span class="string">&quot;hao123&quot;</span>, <span class="string">&quot;地图&quot;</span>, <span class="string">&quot;贴吧&quot;</span>])</span><br><span class="line">t_list = bs.find_all(text=re.<span class="built_in">compile</span>(<span class="string">&quot;\d&quot;</span>))</span><br></pre></td></tr></table></figure><p>当我们搜索 text 中的一些特殊属性时，同样也可以传入一个方法来达到我们的目的：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">length_is_two</span>(<span class="params">text</span>):</span></span><br><span class="line">    <span class="keyword">return</span> text <span class="keyword">and</span> <span class="built_in">len</span>(text) == <span class="number">2</span></span><br><span class="line">t_list = bs.find_all(text=length_is_two)</span><br></pre></td></tr></table></figure><p><strong>（4）**kwargs 参数</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询id=head的Tag</span></span><br><span class="line">t_list = bs.find_all(<span class="built_in">id</span>=<span class="string">&quot;head&quot;</span>)</span><br><span class="line"><span class="comment"># 查询href属性包含 http://baidu.com 的Tag</span></span><br><span class="line">t_list = bs.find_all(href=re.<span class="built_in">compile</span>(<span class="string">&quot;http://baidu.com&quot;</span>))</span><br><span class="line"><span class="comment"># 查询所有包含class的Tag(注意：class在Python中属于关键字，所以加_以示区别)</span></span><br><span class="line">t_list = bs.find_all(class_=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p><strong>（5）limit 参数</strong></p><p>可以传入一个 limit 参数来限制返回的数量，当搜索出的数据量为 5，而设置了 limit=2 时，此时只会返回前 2 个数据</p><p><code>bs.find_all(&quot;a&quot;,limit=2)</code></p><p>find_all 除了上面一些常规的写法，还可以对其进行一些简写：</p><p><code>bs.find_all(&quot;a&quot;)</code> 👉 <code>bs(&quot;a&quot;)</code></p><p><code>bs.a.find_all(text=&quot;新闻&quot;)</code> 👉 <code>bs.a(text=&quot;新闻&quot;)</code></p><h5 id="find"><a href="#find" class="headerlink" title="find()"></a>find()</h5><p>find()将返回符合条件的第一个 Tag，有时我们只需要或一个 Tag 时，我们就可以用到 find()方法了。当然了，也可以使用 find_all()方法，传入一个 limit=1，然后再取出第一个值也是可以的，不过未免繁琐。</p><p><code>bs.find_all(&quot;title&quot;,limit=1)</code> 👉 <code>bs.find(&quot;title&quot;)</code></p><p>从结果可以看出 find_all，尽管传入了 limit=1，但是返回值仍然为一个列表，当我们只需要取一个值时，远不如 find 方法方便。但</p><p>是如果未搜索到值时，将返回一个 None。</p><h4 id="CSS-选择器"><a href="#CSS-选择器" class="headerlink" title="CSS 选择器"></a>CSS 选择器</h4><p>BeautifulSoup 支持发部分的 CSS 选择器，在 Tag 获取 BeautifulSoup 对象的.select()方法中传入字符串参数，即可使用 CSS 选择器的语法找到 Tag：</p><p><strong>（1）通过标签名 Tag 查找</strong></p><p><code>bs.select(&#39;title&#39;)</code></p><p><strong>（2）通过类名 Class 查找</strong></p><p><code>bs.select(&#39;.hassan&#39;)</code></p><p><strong>（3）通过 id 查找</strong></p><p><code>bs.select(&#39;#hassan&#39;)</code></p><p><strong>（4）组合查找</strong></p><p><code>bs.select(&#39;div .bri&#39;)</code></p><p><strong>（5）属性查找</strong></p><p><code>bs.select(&#39;a[class=&quot;bri&quot;]&#39;)</code></p><p><code>bs.select(&#39;a[href=&quot;http://baidu.com&quot;]&#39;)</code></p><p><strong>（6）直接子标签查找</strong></p><p><code>bs.select(&quot;head &gt; title&quot;)</code></p><p><strong>（7）兄弟节点标签查找</strong></p><p><code>bs.select(&quot;.head ~ .title&quot;)</code></p><p><strong>（8）获取内容</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">t_list = bs.select(<span class="string">&quot;title&quot;</span>)</span><br><span class="line">print(bs.select(<span class="string">&#x27;title&#x27;</span>)[<span class="number">0</span>].get_text())</span><br></pre></td></tr></table></figure><h3 id="正则提取"><a href="#正则提取" class="headerlink" title="正则提取"></a>正则提取</h3><p><strong>正则表达式</strong>：通常被用来检索、替换那些符合<strong>某个模式（规则）的文本</strong>。正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符及这些特定字符的组合，组成一个<strong>“规则字符串”</strong>，这个“规则字符串”用来表达对字符串的一种<strong>过滤逻辑</strong>。Python 中使用<strong>re 模块</strong>操作正则表达式。</p><h4 id="re-模块"><a href="#re-模块" class="headerlink" title="re 模块"></a>re 模块</h4><p>Re 库主要功能函数</p><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td><strong>re.search()</strong></td><td>在一个字符串中搜索匹配正则表达式的<strong>第一个位置</strong>，返回 match 对象（左闭右开，首标为 0）</td></tr><tr><td>re.match()</td><td>从一个字符串的开始位置起匹配正则表达式，返回 match 对象</td></tr><tr><td><strong>re.findall()</strong></td><td>搜索字符串，以<strong>列表类型</strong>返回全部能匹配的子串</td></tr><tr><td>re.split()</td><td>将一个字符串按照正则表达式匹配结果进行分割，返回列表类型</td></tr><tr><td>re.finditer()</td><td>搜索字符串，返回一个匹配结果的迭代类型，每个迭代元素是 match 对象</td></tr><tr><td><strong>re.sub()</strong></td><td>在一个字符串中替换所有匹配正则表达式的子串，返回替换后的字符串</td></tr></tbody></table><p>正则表达式可以包含一些可选标志修饰符来控制匹配的模式。修饰符被指定为一个可选的标志。多个标志可以通过按位 OR(|) 它们来指定。如 re.I | re.M 被设置成 I 和 M 标志：</p><table><thead><tr><th>修饰符</th><th>描述</th></tr></thead><tbody><tr><td>re.l</td><td>使匹配对大小写不敏感</td></tr><tr><td>re.L</td><td>使本地化识别（locale-aware）匹配</td></tr><tr><td>re.M</td><td>多行匹配，影响^和$</td></tr><tr><td>re.S</td><td>使&quot;.&quot;忽视包括换行在内的所有字符</td></tr><tr><td>re.U</td><td>根据 Unicode 字符集解析字符。这个标志影响 \w, \W, \b, \B</td></tr><tr><td>re.X</td><td>该标志通过给予你更灵活的格式以便你将正则表达式写得更易于理解</td></tr></tbody></table><h4 id="re-模块下的函数"><a href="#re-模块下的函数" class="headerlink" title="re 模块下的函数"></a>re 模块下的函数</h4><p>compile(pattern)：创建模式对象</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">pat=re.<span class="built_in">compile</span>(<span class="string">&quot;AA&quot;</span>)</span><br><span class="line">m=pat.search(<span class="string">&quot;ABC&quot;</span>)</span><br><span class="line"><span class="comment">#等价于 re.search(&quot;AA&quot;, &quot;CBA&quot;)</span></span><br><span class="line"><span class="comment">#&lt;re.Match object; span=(2, 3), match=&#x27;A&#x27;&gt; 表示匹配到了</span></span><br><span class="line">print(m) <span class="comment">#None 表示没匹配到</span></span><br></pre></td></tr></table></figure><p>search(pattern,string)：在字符串中寻找模式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">m = re.search(<span class="string">&quot;asd&quot;</span> , <span class="string">&quot;ASDasd&quot;</span> )</span><br><span class="line">print(m)</span><br><span class="line"><span class="comment"># &lt;_sre.SRE_Match object at 0xb72cd6e8&gt; #匹配到了，返回MatchObject（True）</span></span><br><span class="line">m = re.search(<span class="string">&quot;asd&quot;</span> , <span class="string">&quot;ASDASD&quot;</span> )</span><br><span class="line">print(m) <span class="comment">#没有匹配到，返回None（False）</span></span><br></pre></td></tr></table></figure><p>match(pattern,string)：在字符串开始处匹配模式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 等价于</span></span><br><span class="line">pat=re.<span class="built_in">compile</span>(<span class="string">&quot;a&quot;</span>)</span><br><span class="line">print(pat.match(<span class="string">&quot;Aasd&quot;</span>))</span><br><span class="line"><span class="comment">#输出None</span></span><br><span class="line">print(pat.match(<span class="string">&quot;aASD&quot;</span>))</span><br><span class="line"><span class="comment">#输出 &lt;_sre.SRE_Match object at 0xb72cd6e8&gt;</span></span><br><span class="line"><span class="comment"># 上面的函数返回都可以在if条件语句中进行判断：</span></span><br><span class="line"><span class="keyword">if</span> pat.search(<span class="string">&quot;asd&quot;</span>):</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;OK&quot;</span>) <span class="comment">#OK #找到返回</span></span><br><span class="line"><span class="keyword">if</span> re.search(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;ASD&quot;</span> ):</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;OK&quot;</span>) <span class="comment">#没有找到</span></span><br></pre></td></tr></table></figure><p>split(pattern,string)：根据模式分割字符串,返回列表</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">re.split( , , a,s,d,asd )</span><br><span class="line">[<span class="string">&quot;a&quot;</span>,<span class="string">&quot;s&quot;</span>,<span class="string">&quot;d&quot;</span>,<span class="string">&quot;asd&quot;</span>] <span class="comment">#返回列表</span></span><br><span class="line">pat = re.<span class="built_in">compile</span>( , )</span><br><span class="line">pat.split( a,s,d,asd )</span><br><span class="line">[<span class="string">&quot;a&quot;</span>,<span class="string">&quot;s&quot;</span>,<span class="string">&quot;d&quot;</span>,<span class="string">&quot;asd&quot;</span>] <span class="comment">#返回列表</span></span><br><span class="line">re.split( [, ]+ ,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;s&quot;</span>,d ,,,,,asd ) <span class="comment">#正则匹配：[, ]+，后面说明</span></span><br><span class="line">[<span class="string">&quot;a&quot;</span>,<span class="string">&quot;s&quot;</span>,<span class="string">&quot;d&quot;</span>,<span class="string">&quot;asd&quot;</span>]</span><br><span class="line">re.split( [, ]+ ,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;s&quot;</span>,d ,,,,,asd ,maxsplit=<span class="number">2</span>) <span class="comment"># maxsplit 最多分割次数</span></span><br><span class="line">[<span class="string">&quot;a&quot;</span>,<span class="string">&quot;s&quot;</span>,<span class="string">&quot;d&quot;</span>,,,,,asd ]</span><br><span class="line">pat = re.<span class="built_in">compile</span>( [, ]+ ) <span class="comment">#正则匹配：[, ]+，后面说明</span></span><br><span class="line">pat.split(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;s&quot;</span>,d ,,,,,asd ,maxsplit=<span class="number">2</span>) <span class="comment"># maxsplit 最多分割次数</span></span><br><span class="line">[<span class="string">&quot;a&quot;</span>,<span class="string">&quot;s&quot;</span>,<span class="string">&quot;d&quot;</span>,,,,,asd ]</span><br></pre></td></tr></table></figure><p>findall(pattern,string)：列表形式返回匹配项</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">print(re.findall(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;ASDaDFGAa&quot;</span>))</span><br><span class="line"><span class="comment">#[&quot;a&quot;,&quot;a&quot;] #列表形式返回匹配到的字符串</span></span><br><span class="line">pat = re.<span class="built_in">compile</span>(<span class="string">&quot;a&quot;</span>)</span><br><span class="line">print(pat.findall(<span class="string">&quot;ASDaDFGAa&quot;</span>))</span><br><span class="line"><span class="comment">#[&quot;a&quot;,&quot;a&quot;] #列表形式返回匹配到的字符串</span></span><br><span class="line">pat = re.<span class="built_in">compile</span>(<span class="string">&quot;[A-Z]+&quot;</span>) <span class="comment">#正则匹配：[A-Z]+ 后面有说明</span></span><br><span class="line">print(pat.findall(<span class="string">&quot;ASDcDFGAa&quot;</span>))</span><br><span class="line"><span class="comment">#[&quot;ASD&quot;,&quot;DFGA&quot;] #找到匹配到的字符串</span></span><br><span class="line">pat = re.<span class="built_in">compile</span>([A-Z])</span><br><span class="line">pat.findall(<span class="string">&quot;ASDcDFGAa&quot;</span>) <span class="comment">#正则匹配：[A-Z]+ 后面有说明</span></span><br><span class="line">[<span class="string">&quot;A&quot;</span>,<span class="string">&quot;S&quot;</span>,<span class="string">&quot;D&quot;</span>,<span class="string">&quot;D&quot;</span>,<span class="string">&quot;F&quot;</span>,<span class="string">&quot;G&quot;</span>,<span class="string">&quot;A&quot;</span>] <span class="comment">#找到匹配到的字符串</span></span><br><span class="line">pat = re.<span class="built_in">compile</span>( [A-Za-z] ) <span class="comment">#正则匹配：[A-Za-z]+ 匹配所有单词，后面有说明</span></span><br><span class="line">pat.findall(<span class="string">&quot;ASDcDFGAa&quot;</span>)</span><br><span class="line">[<span class="string">&quot;A&quot;</span>,<span class="string">&quot;S&quot;</span>,<span class="string">&quot;D&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="string">&quot;D&quot;</span>,<span class="string">&quot;F&quot;</span>,<span class="string">&quot;G&quot;</span>,<span class="string">&quot;A&quot;</span>,<span class="string">&quot;a&quot;</span>]</span><br></pre></td></tr></table></figure><p>sub(pat,repl,string) ：用 repl 替换 pat 匹配项</p><p>（留的是中间的，因为中间在中心）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">re.sub(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;A&quot;</span>,<span class="string">&quot;abcasd&quot;</span>) <span class="comment">#找到a用A替换，后面见和group的配合使用</span></span><br><span class="line">AbcAsd</span><br><span class="line">pat = re.<span class="built_in">compile</span>(<span class="string">&quot;a&quot;</span>)</span><br><span class="line">pat.sub(<span class="string">&quot;A&quot;</span>,<span class="string">&quot;abcasd&quot;</span>)</span><br><span class="line">AbcAsd</span><br><span class="line">pat=re.<span class="built_in">compile</span>(r www.(.*)..&#123;<span class="number">3</span>&#125; ) <span class="comment">#正则表达式</span></span><br><span class="line"><span class="comment">#在Python的string前面加上‘r’， 是为了告诉编译器这个string是个raw string，不要转译反斜杠</span></span><br><span class="line"><span class="comment">#例如， 在raw string中，是两个字符，和n， 而不会转译为换行符。</span></span><br><span class="line"><span class="comment">#由于正则表达式和 会有冲突，因此，当一个字符串使用了正则表达式后，最好在前面加上 r 。</span></span><br><span class="line"><span class="comment">#与大多数编程语言相同，正则表达式里使用&quot;&quot;作为转义字符，这就可能造成反斜杠困扰。</span></span><br><span class="line"><span class="comment">#假如你需要匹配文本中的字符&quot;&quot;，那么使用编程语言表示的正则表达式里将需要4个反斜杠&quot;\\&quot;：</span></span><br><span class="line"><span class="comment">#前两个和后两个分别用于在编程语言里转义成反斜杠，转换成两个反斜杠后再在正则表达式里转义成一个</span></span><br><span class="line">反斜杠。</span><br><span class="line"><span class="comment">#Python里的原生字符串很好地解决了这个问题，这个例子中的正则表达式可以使用r&quot;\&quot;表示。</span></span><br><span class="line"><span class="comment">#同样，匹配一个数字的&quot;\d&quot;可以写成r&quot;d&quot;。</span></span><br><span class="line"><span class="comment">#有了原生字符串，你再也不用担心是不是漏写了反斜杠，写出来的表达式也更直观。</span></span><br><span class="line"><span class="comment">#不是说 加了r 就没有转译功能，好乱，就直接记住1句话：</span></span><br><span class="line"><span class="comment">#当一个字符串使用了正则表达式后，最好在前面加上 r ，这样你再也不用担心是不是漏写了反斜杠，写</span></span><br><span class="line">出来的表达式也更直观</span><br><span class="line">pat.match( www.dxy.com ).group(<span class="number">1</span>)</span><br><span class="line">dxy</span><br><span class="line">re.sub(r www.(.*)..&#123;<span class="number">3</span>&#125; ,r , hello,www.dxy.com )</span><br><span class="line">pat.sub(r , hello,www.dxy.com )</span><br><span class="line">hello,dxy</span><br><span class="line"><span class="comment"># r 1 是第一组的意思</span></span><br><span class="line"><span class="comment">#通过正则匹配找到符合规则的&quot;www.dxy.com&quot; ，取得 组1字符串 去替换 整个匹配。</span></span><br><span class="line">pat=re.<span class="built_in">compile</span>(r (w+) (w+) ) <span class="comment">#正则表达式</span></span><br><span class="line">s= hello world ! hello hz !</span><br><span class="line">pat.findall( hello world ! hello hz ! )</span><br><span class="line">[( hello , world ), ( hello , hz )]</span><br><span class="line">pat.sub(r ,s) <span class="comment">#通过正则得到组1(hello)，组2(world)，再通过sub去替换。</span></span><br><span class="line">即组<span class="number">1</span>替换组<span class="number">2</span>，组<span class="number">2</span>替换组<span class="number">1</span>，调换位置。</span><br><span class="line">world hello!hz hello!</span><br></pre></td></tr></table></figure><p>escape(string) ：对字符串里面的特殊字符串进行转义</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">re.escape( www.dxy.cn )</span><br><span class="line">www\.dxy\.cn <span class="comment">#转义</span></span><br></pre></td></tr></table></figure><p>上面的函数中，只有 match、search 有 group 方法，其他的函数没有。</p><h4 id="函数的方法"><a href="#函数的方法" class="headerlink" title="函数的方法"></a>函数的方法</h4><p>group：获取子模式(组)的匹配项</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pat = re.<span class="built_in">compile</span>(r www.(.*).(.*) ) <span class="comment">#用()表示1个组，2个组</span></span><br><span class="line">m = pat.match( www.dxy.com )</span><br><span class="line">m.group() <span class="comment">#默认为0，表示匹配整个字符串</span></span><br><span class="line">www.dxy.com</span><br><span class="line">m.group(<span class="number">1</span>) <span class="comment">#返回给定组1匹配的子字符串</span></span><br><span class="line">dxy</span><br><span class="line">m.group(<span class="number">2</span>)</span><br><span class="line">com</span><br></pre></td></tr></table></figure><p>start：给定组匹配项的开始位置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">m.start(<span class="number">2</span>) <span class="comment">#组2开始的索引</span></span><br><span class="line"><span class="number">8</span></span><br></pre></td></tr></table></figure><p>end：给定组匹配项的结束位置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">m.end(<span class="number">2</span>) <span class="comment">#组2结束的索引</span></span><br><span class="line"><span class="number">11</span></span><br></pre></td></tr></table></figure><p>span：给定组匹配项的开始结束位置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">m.span(<span class="number">2</span>) <span class="comment">#组2开始、结束的索引</span></span><br><span class="line">(<span class="number">8</span>, <span class="number">11</span>)</span><br></pre></td></tr></table></figure><h4 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h4><p>元字符<br>“.” ：通配符，除换行符外的任意的 1 个字符</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">pat=re.<span class="built_in">compile</span>(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">pat.match(<span class="string">&quot;abc&quot;</span>)</span><br><span class="line">&lt;_sre.SRE_Match <span class="built_in">object</span> at <span class="number">0xb72b6170</span>&gt;</span><br><span class="line">pat.match(<span class="string">&quot;abc&quot;</span>).group()</span><br><span class="line">a <span class="comment">#匹配到了首个字符</span></span><br><span class="line">pat.search(<span class="string">&quot;abc&quot;</span>).group()</span><br><span class="line">a</span><br><span class="line">pat.match( ).group() <span class="comment">#换行符匹配出错</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: NoneType <span class="built_in">object</span> has no attribute group</span><br></pre></td></tr></table></figure><p>“” : 转义符</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pat=re.<span class="built_in">compile</span>(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">pat.search( abc.efg ).group() <span class="comment">#匹配到.</span></span><br><span class="line">.</span><br><span class="line">pat.findall( abc.efg ) <span class="comment">#不用group,返回列表</span></span><br><span class="line">[<span class="string">&quot;.&quot;</span>]</span><br></pre></td></tr></table></figure><p>“[…]” : 字符集合，匹配里面的任意一个元素</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pat=re.<span class="built_in">compile</span>( [abc] )</span><br><span class="line">pat.match(<span class="string">&quot;axbycz&quot;</span>).group()</span><br><span class="line">a</span><br><span class="line">pat.search(<span class="string">&quot;axbycz&quot;</span>).group()</span><br><span class="line">a</span><br><span class="line">pat.findall(<span class="string">&quot;axbycz&quot;</span>)</span><br><span class="line">[<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>]</span><br></pre></td></tr></table></figure><p>“d” : 数字</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat=re.<span class="built_in">compile</span>(<span class="string">&quot;d&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( ax1by2cz3 ).group() <span class="comment">#匹配到第一个数字:1，返回</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( ax1by2cz3 ).group() <span class="comment">#匹配不到（首个不是）返回None，报错，match匹配字</span></span><br><span class="line">符串头</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Traceback (most recent call last):</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>AttributeError: NoneType <span class="built_in">object</span> has no attribute group</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( ax1by2cz3 ) <span class="comment">#匹配所有的数字，列表返回</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ <span class="number">1</span> , <span class="number">2</span> , <span class="number">3</span> ]</span><br></pre></td></tr></table></figure><p>“D” : 非数字</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat=re.<span class="built_in">compile</span>(<span class="string">&quot;D&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( ax1by2cz3 ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( ax1by2cz3 ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( ax1by2cz3 )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;a&quot;</span>, x ,<span class="string">&quot;b&quot;</span>, y ,<span class="string">&quot;c&quot;</span>, z ]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">7</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>“s” ：空白字符 、 、</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>、</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat=re.<span class="built_in">compile</span>(<span class="string">&quot;D&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( ax1by2cz3 ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( ax1by2cz3 ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( ax1by2cz3 )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;a&quot;</span>, x ,<span class="string">&quot;b&quot;</span>, y ,<span class="string">&quot;c&quot;</span>, z ]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">7</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>“s” ：空白字符 、 、</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>、</span><br></pre></td></tr></table></figure><p>“S” :非空白字符</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat=re.<span class="built_in">compile</span>(<span class="string">&quot;S&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( ax1 by2 cz3 ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( ax1 by2 cz3 )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;a&quot;</span>, x , <span class="number">1</span> ,<span class="string">&quot;b&quot;</span>, y , <span class="number">2</span> ,<span class="string">&quot;c&quot;</span>, z , <span class="number">3</span> ]</span><br></pre></td></tr></table></figure><p>“w” ：单个的 数字和字母，[A-Za-z0-9]</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat=re.<span class="built_in">compile</span>( w )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( <span class="number">1</span>a2b3c ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( <span class="number">1</span>a2b3c )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ <span class="number">1</span> ,<span class="string">&quot;a&quot;</span>, <span class="number">2</span> ,<span class="string">&quot;b&quot;</span>, <span class="number">3</span> ,<span class="string">&quot;c&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( <span class="number">1</span>a2b3c ).group()</span><br></pre></td></tr></table></figure><p>“W”：非单词字符，除数字和字母外</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat=re.<span class="built_in">compile</span>( W )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( <span class="number">1</span>a2我b3c ) <span class="comment">#python是用三字节表示一个汉字</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ æ , ˆ , ‘ ]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( <span class="number">1</span>a2我b3c ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>æ</span><br></pre></td></tr></table></figure><p>数量词<br>“*” ：0 次或多次<br>（ 乘 0 会变成 0）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat = re.<span class="built_in">compile</span>( [abc]* )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( abcabcdefabc ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>abcabc <span class="comment">#2次</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( abcabcdefabc ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>abcabc <span class="comment">#2次</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( abcabcdefabc )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ abcabc , , , ,<span class="string">&quot;abc&quot;</span>, ] <span class="comment">#2次和1次,因为有0次，所以匹配了</span></span><br></pre></td></tr></table></figure><p>“+” ：1 次或多次</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat = re.<span class="built_in">compile</span>( [abc]+ )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( abcdefabcabc ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>abc</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( abcdefabcabc ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>abc</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( abcdefabcabc )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;abc&quot;</span>, abcabc ]</span><br></pre></td></tr></table></figure><p>“?” ：0 次或 1 次，match,search 不会出现 none，会出现’ ‘ （因为 0 次也是符合的）<br>0 次或 1 次不是指[xxx]这个集合，而是其中的任何的一个字符</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; pat = re.compile( [abc]? )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( defabc ).group() <span class="comment">#0次</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( abcdefabc ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( defabc ).group() <span class="comment">#0次</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( defabc ) <span class="comment">#0次和1次</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ , , ,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>, ] <span class="comment">#后面总再加个</span></span><br></pre></td></tr></table></figure><p>“数量词?” ：非贪婪模式：只匹配最少的（尽可能少）；默认贪婪模式：匹配最多的（尽可能多）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat = re.<span class="built_in">compile</span>( [abc]+ ) <span class="comment">#贪婪模式</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( abcdefabcabc ).group() <span class="comment">#匹配尽可能多的：abc</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>abc</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( bbabcdefabcabc ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bbabc</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( dbbabcdefabcabc ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bbabc</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( abcdefabcabc )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;abc&quot;</span>, abcabc ]</span><br><span class="line">&gt;&gt;&gt; pat = re.compile( [abc]+? ) #非贪婪模式：+?</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( abcdefabcabc ).group() <span class="comment">#匹配尽可能少的：a、b、c</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( dbbabcdefabcabc ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( abcdefabcabc )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>]</span><br></pre></td></tr></table></figure><p>“{m}” ：匹配字符串出现 m 次</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat = re.<span class="built_in">compile</span>( [op]&#123;<span class="number">2</span>&#125; ) <span class="comment">#o或p出现2次</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( abcooapp ).group() <span class="comment">#匹配第一次出现的字符串,o比p先出现</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>oo</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( abcooapp ) <span class="comment">#匹配出现的所有字符串，列表形式返回</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ oo , pp ]</span><br></pre></td></tr></table></figure><p>“{m,n}” ：匹配字符串出现 m 到 n 次</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat = re.<span class="built_in">compile</span>( [op]&#123;<span class="number">2</span>,<span class="number">4</span>&#125; ) <span class="comment">#o或则p出现2到4次</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( pppabcooapp ).group() <span class="comment">#匹配开头</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ppp</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( pppabcooapp ).group() <span class="comment">#匹配第一次出现</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ppp</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( pppabcooapp ) <span class="comment">#匹配所有</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ ppp , oo , pp ]</span><br></pre></td></tr></table></figure><p>.group() #匹配第一次出现<br>边界<br>“^” ：匹配字符串开头或行头</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat = re.<span class="built_in">compile</span>( ^[abc] ) <span class="comment">#开头是a、b、c中的任意一个</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( defabc ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( defabc ).group() <span class="comment">#均找不到</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( defabc )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( adefabc ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( adefabc ).group() <span class="comment">#开头是a、b、c中的任意一个</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( adefabc )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;a&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat = re.<span class="built_in">compile</span>( ^[abc]+ ) <span class="comment">#开头是a、b、c中的任意一个的一次或则多次，贪婪：匹配</span></span><br><span class="line">多个</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( cbadefab )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ cba ]</span><br><span class="line">&gt;&gt;&gt; pat = re.compile(r ^[abc]+? ) #开头是a、b、c中的任意一个的一次或则多次，非贪婪：匹</span><br><span class="line">配一个</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( cbadefab )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;c&quot;</span>]</span><br></pre></td></tr></table></figure><p>“$” ：匹配字符串结尾或则行尾</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat = re.<span class="built_in">compile</span>( [abc]$ )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( adefAbc ).group() <span class="comment">#match匹配的是字符串开头，所以查找$的时，总是返回</span></span><br><span class="line"><span class="literal">None</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( adefAbc ).group() <span class="comment">#结尾是a、b、c中的任意一个</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( adefAbc )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;c&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat = re.<span class="built_in">compile</span>( [abc]+$ )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( adefAbc ).group() <span class="comment">#结尾是a、b、c中的任意一个的一次或则多次，贪婪：匹配</span></span><br><span class="line">多个</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bc</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( adefAbc )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ bc ]</span><br></pre></td></tr></table></figure><p>“A”：匹配字符串开头</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat = re.<span class="built_in">compile</span>( A[abc]+ )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( cbadefab )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ cba ]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( cbadefab ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cba</span><br></pre></td></tr></table></figure><p>“Z”：匹配字符串结尾</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; pat &#x3D; re.compile( [abc]+Z )</span><br><span class="line">&gt;&gt;&gt; pat.search( cbadefab ).group()</span><br><span class="line">&gt;&gt;&gt; ab</span><br><span class="line">&gt;&gt;&gt; pat.findall( cbadefab )</span><br><span class="line">&gt;&gt;&gt; [ ab ]</span><br></pre></td></tr></table></figure><p>分组<br>(…)：分组匹配,从左到右,每遇到一个 ( 编号+1，分组后面可加数量词</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat=re.<span class="built_in">compile</span>(r (a)w(c) ) <span class="comment">#w:单个的数字或字母 [A-Za-z0-9]</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( abcdef ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>abc</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat=re.<span class="built_in">compile</span>( (a)b(c) ) <span class="comment">#分2组，匿名分组</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( abcdef ).group() <span class="comment">#默认返回匹配的字符串</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>abc</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( abcdef ).group(<span class="number">1</span>) <span class="comment">#取分组1，适用于search</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( abcdef ).group(<span class="number">2</span>) <span class="comment">#取分组2，适用于search</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( abcdef ).groups() <span class="comment">#取所有分组，元组形式返回</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;c&quot;</span>)</span><br></pre></td></tr></table></figure><p>：引用编号为的分组匹配到的字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat=re.<span class="built_in">compile</span>(r www.(.*)..&#123;<span class="number">3</span>&#125; )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( www.dxy.com ).group(<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dxy</span><br></pre></td></tr></table></figure><p>“(?P…)” ：在模式里面用()来表示分组（命名分组）,适用于提取目标字符串中的某一些部位。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; pat=re.compile(r (?P&lt;K&gt;a)w(c) ) #分2组：命名分组+匿名分组</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( abcdef ).groups() <span class="comment">#取所有分组，元组形式返回</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;c&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( abcdef ).group(<span class="number">1</span>) <span class="comment">#取分组1，适用于match</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( abcdef ).group(<span class="number">2</span>) <span class="comment">#取分组2，适用于match</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( abcdef ).group() <span class="comment">#默认返回匹配的字符串</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>abc</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( abcdef ).groupdict() <span class="comment">#命名分组可以返回一个字典【专有】，匿名分组也没有</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123; K :<span class="string">&quot;a&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p>“(?P=name)”：引用别名为的分组匹配到的串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; pat=re.compile(r (?P&lt;K&gt;a)w(c)(?P=K) ) #(?P=K)引用分组1的值，就是a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( abcdef ).group() <span class="comment">#匹配不到，因为完整 awca ,模式的第4位是</span></span><br><span class="line">a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Traceback (most recent call last):</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>AttributeError: NoneType <span class="built_in">object</span> has no attribute group</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( abcadef ).group() <span class="comment">#匹配到，模式的第4位和组1一样,值是c</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>abca</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( abcadef ).groups()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;c&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( abcadef ).group(<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( abcadef ).group(<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br></pre></td></tr></table></figure><p>“” ：引用分组编号匹配：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; pat=re.compile(r (?P&lt;K&gt;a)w(c)(?P=K) ) #引用分组2的值，就是c</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( Aabcadef ) <span class="comment">#匹配不到，因为完整 awcac ,模式的第5位是c</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( Aabcacdef ) <span class="comment">#匹配到，模式的第5位和组2一样,值是c</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;c&quot;</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( Aabcacdef ).groups()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;c&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( Aabcacdef ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>abcac</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( Aabcacdef ).group(<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.search( Aabcacdef ).group(<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br></pre></td></tr></table></figure><p>特殊构造</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(?:…) (…)不分组版本,用于使用 | 或者后接数量词</span><br><span class="line">(?iLmsux) iLmsux的每个字符代表一个匹配模式,只能用在正则表达式的开头,可选多个</span><br><span class="line">(?#…) #号后的内容将作为注释</span><br><span class="line">(?=…) 之后的字符串内容需要匹配表达式才能成功匹配</span><br><span class="line">(?!…) 之后的字符串不匹配表达式才能成功</span><br><span class="line">(?(?(?(id/name) yes |no) 如果编号为id/名字为name的组匹配到字符串,则需要匹配yes,否则匹配</span><br><span class="line">no,no可以省略</span><br><span class="line">```</span><br><span class="line">“(?:…)” ：()里面有?:表示该()不是分组</span><br><span class="line">```python</span><br><span class="line">&gt;&gt;&gt; pat=re.compile(r a(?:bc) )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall(<span class="string">&quot;abc&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;abc&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match(<span class="string">&quot;abc&quot;</span>).groups()</span><br></pre></td></tr></table></figure><p>“(?=…)”：匹配…表达式，返回。对后进行匹配，总是对后面进行匹配</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; pat=re.compile(r w(?=d) ) #匹配表达式d，返回数字的前一位，w：单词字符[A-Za-z0-9]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( abc1 def1 xyz1 )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;c&quot;</span>,<span class="string">&quot;f&quot;</span>, z ]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( zhoujy20130628hangzhou ) <span class="comment">#匹配数字的前一位，列表返回</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ y , <span class="number">2</span> , <span class="number">0</span> , <span class="number">1</span> , <span class="number">3</span> , <span class="number">0</span> , <span class="number">6</span> , <span class="number">2</span> ]</span><br><span class="line">&gt;&gt;&gt; pat=re.compile(r w+(?=d) )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( abc1,def1,xyz1 ) <span class="comment">#匹配最末数字的前字符串，列表返回</span></span><br><span class="line">&gt;&gt;&gt; [&quot;abc&quot;, def , xyz ]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( abc21,def31,xyz41 )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;abc2&quot;</span>, def3 , xyz4 ]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( zhoujy20130628hangzhou )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ zhoujy2013062 ]</span><br><span class="line">&gt;&gt;&gt; pat=re.compile(r [A-Za-z]+(?=d) ) #[A-Za-z],匹配字母,可以用其他的正则方法</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( zhoujy20130628hangzhou123 ) <span class="comment">#匹配后面带有数字的字符串，列表返回</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ zhoujy , hangzhou ]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( abc21,def31,xyz41 )</span><br><span class="line">&gt;&gt;&gt; [&quot;abc&quot;, def , xyz ]</span><br></pre></td></tr></table></figure><p>“(?!…)” 不匹配…表达式，返回。对后进行匹配</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; pat=re.compile(r [A-Za-z]+(?!d) ) #[A-Za-z],匹配字母,可以用其他的正则方法</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( zhoujy20130628hangzhou123,<span class="number">12</span>,binjiang310 ) <span class="comment">#匹配后面不是数字的字符</span></span><br><span class="line">串，列表返回</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ zhouj , hangzho , binjian ]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( abc21,def31,xyz41 )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ ab , de , xy ]</span><br></pre></td></tr></table></figure><p>“(?&lt;=…)”：匹配…表达式，返回。对前进行匹配,总是对前面进行匹配</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; pat=re.compile(r (?&lt;=d)[A-Za-z]+ ) #匹配前面是数字的字母</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( abc21,def31,xyz41 )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( <span class="number">1</span>abc21,<span class="number">2</span>def31,<span class="number">3</span>xyz41 )</span><br><span class="line">&gt;&gt;&gt; [&quot;abc&quot;, def , xyz ]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( zhoujy20130628hangzhou123,<span class="number">12</span>,binjiang310 )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ hangzhou ]</span><br></pre></td></tr></table></figure><p>“(?&lt;!…)”：不匹配…表达式，返回。对前进行匹配,总是对前面进行匹配</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; pat=re.compile(r (?&lt;!d)[A-Za-z]+ ) #匹配前面不是数字的字母</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( abc21,def31,xyz41 )</span><br><span class="line">&gt;&gt;&gt; [&quot;abc&quot;, def , xyz ]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( zhoujy20130628hangzhou123,<span class="number">12</span>,binjiang310 )</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ zhoujy , angzhou , binjiang ]</span><br></pre></td></tr></table></figure><p>“(?(id/name) yes |no)”: 组是否匹配，匹配返回</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; pat=re.compile(r a(d)?bc(?(1)d) ) #no省略了，完整的是adbcd ==&gt; a2bc3,总共5位，</span><br><span class="line">第<span class="number">2</span>位是可有可无的数字，第<span class="number">5</span>为是数字</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( abc9 ) <span class="comment">#返回组1，但第2位（组1）没有，即返回了</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ ]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( a8bc9 ) <span class="comment">#完整的模式，返回组1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[ <span class="number">8</span> ]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( a8bc9 ).group()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a8bc9</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.match( a8bc9 ).group(<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">8</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall( a8bc ) <span class="comment">#第5位不存在，则没有匹配到</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[]</span><br></pre></td></tr></table></figure><p>“(?iLmsux)”:这里就介绍下 i 参数：大小写区分匹配</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat=re.<span class="built_in">compile</span>(<span class="string">r&quot;abc&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall(<span class="string">&quot;abc&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;abc&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall(<span class="string">&quot;ABC&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[]</span><br><span class="line">&gt;&gt;&gt; pat=re.compile(r (?i)abc ) #(?i) 不区分大小写</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall(<span class="string">&quot;ABC&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;ABC&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall(<span class="string">&quot;abc&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;abc&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall(<span class="string">&quot;aBc&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;aBc&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall(<span class="string">&quot;aBC&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;aBC&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat=re.<span class="built_in">compile</span>(<span class="string">r&quot;abc&quot;</span>,re.I) <span class="comment">#re.I 作为参数使用，推荐</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall(<span class="string">&quot;aBC&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;aBC&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall(<span class="string">&quot;abc&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;abc&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pat.findall(<span class="string">&quot;ABC&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">&quot;ABC&quot;</span>]</span><br></pre></td></tr></table></figure><h3 id="提取数据"><a href="#提取数据" class="headerlink" title="提取数据"></a>提取数据</h3><p>使用正则表达式对需要的项进行处理。</p><h2 id="保存数据"><a href="#保存数据" class="headerlink" title="保存数据"></a>保存数据</h2><h3 id="Excel-表存储"><a href="#Excel-表存储" class="headerlink" title="Excel 表存储"></a>Excel 表存储</h3><p>用 python 库<strong>xlwt</strong>将抽取的数据写入 Excel 表格</p><h3 id="xlwt-模块"><a href="#xlwt-模块" class="headerlink" title="xlwt 模块"></a>xlwt 模块</h3><p>简单使用 xlwt</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xlwt <span class="comment">#导入模块</span></span><br><span class="line">workbook = xlwt.Workbook(encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="comment">#创建workbook 对象</span></span><br><span class="line">worksheet = workbook.add_sheet(<span class="string">&#x27;sheet1&#x27;</span>) <span class="comment">#创建工作表sheet</span></span><br><span class="line">worksheet.write(<span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;hello&#x27;</span>) <span class="comment">#往表中写内容,第一各参数行,第二个参数列,第三个参数内容</span></span><br><span class="line">workbook.save(<span class="string">&#x27;students.xls&#x27;</span>) <span class="comment">#保存表为students.xls</span></span><br></pre></td></tr></table></figure><p>例子：</p><p>将九九乘法表显示在表格中，每个单元格 1 个公式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">workbook = xlwt.Workbook(encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="comment">#创建workbook 对象</span></span><br><span class="line">worksheet = workbook.add_sheet(<span class="string">&#x27;sheet1&#x27;</span>) <span class="comment">#创建工作表sheet</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">9</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,i+<span class="number">1</span>):</span><br><span class="line">        worksheet.write(i, j, <span class="string">&quot;%d * %d = %d&quot;</span>%(i+<span class="number">1</span>,j+<span class="number">1</span>,(i+<span class="number">1</span>)*(j+<span class="number">1</span>)))</span><br><span class="line"></span><br><span class="line">workbook.save(<span class="string">&#x27;students.xls&#x27;</span>) <span class="comment">#保存表为students.xls</span></span><br></pre></td></tr></table></figure><h3 id="数据库存储"><a href="#数据库存储" class="headerlink" title="数据库存储"></a>数据库存储</h3><p>可以参考菜鸟教程：</p><p><a target="_blank" rel="noopener" href="https://www.runoob.com/sqlite/sqlite-python.html">Python 和 SQLite</a></p><p><a target="_blank" rel="noopener" href="https://www.runoob.com/sqlite/sqlite-tutorial.html">SQLite 和 SQL 语句</a></p><p>1.引入 sqlite3 库</p><p><code>import sqlite3</code></p><p>2.初始化数据库</p><p>demo：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line">conn = sqlite3.connect(<span class="string">&#x27;test.db&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;Opened database successfully&quot;</span>)</span><br></pre></td></tr></table></figure><p>3.创建数据表</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line">conn = sqlite3.connect(<span class="string">&#x27;test.db&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;Opened database successfully&quot;</span>)</span><br><span class="line">c = conn.cursor()</span><br><span class="line">c.execute(<span class="string">&#x27;&#x27;&#x27;&quot;CREATE TABLE COMPANY</span></span><br><span class="line"><span class="string">(ID INT PRIMARY KEY NOT NULL,</span></span><br><span class="line"><span class="string">NAME TEXT NOT NULL,</span></span><br><span class="line"><span class="string">AGE INT NOT NULL,</span></span><br><span class="line"><span class="string">ADDRESS CHAR(50),</span></span><br><span class="line"><span class="string">SALARY REAL);&#x27;&#x27;&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;Table created successfully&quot;</span>)</span><br><span class="line">conn.commit()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure><p>4.数据库存储</p><p>插入数据：insert 操作</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line">conn = sqlite3.connect(<span class="string">&#x27;test.db&#x27;</span>)</span><br><span class="line">c = conn.cursor()</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;Opened database successfully&quot;</span>)</span><br><span class="line">c.execute(<span class="string">&quot;INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY) \</span></span><br><span class="line"><span class="string">VALUES (1, &#x27;Paul&#x27;, 32, &#x27;California&#x27;, 20000.00 )&quot;</span>);</span><br><span class="line">c.execute(<span class="string">&quot;INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY) \</span></span><br><span class="line"><span class="string">VALUES (2, &#x27;Allen&#x27;, 25, &#x27;Texas&#x27;, 15000.00 )&quot;</span>);</span><br><span class="line">c.execute(<span class="string">&quot;INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY) \</span></span><br><span class="line"><span class="string">VALUES (3, &#x27;Teddy&#x27;, 23, &#x27;Norway&#x27;, 20000.00 )&quot;</span>);</span><br><span class="line">c.execute(<span class="string">&quot;INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY) \</span></span><br><span class="line"><span class="string">VALUES (4, &#x27;Mark&#x27;, 25, &#x27;Rich-Mond &#x27;, 65000.00 )&quot;</span>);</span><br><span class="line">conn.commit()</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;Records created successfully&quot;</span>)</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure><p>5.数据库查询</p><p>select 操作：</p><p>下面的 Python 程序显示了如何从前面创建的 COMPANY 表中获取并显示记录：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line">conn = sqlite3.connect(<span class="string">&#x27;test.db&#x27;</span>)</span><br><span class="line">c = conn.cursor()</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;Opened database successfully&quot;</span>)</span><br><span class="line">cursor = c.execute(<span class="string">&quot;SELECT id, name, address, salary from COMPANY&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> cursor:</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;ID = &quot;</span>, row[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;NAME = &quot;</span>, row[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;ADDRESS = &quot;</span>, row[<span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;SALARY = &quot;</span>, row[<span class="number">3</span>], <span class="string">&quot;\n&quot;</span>)</span><br><span class="line">print(<span class="string">&quot;Operation done successfully&quot;</span>)</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure><p>6.修改操作：update（略）</p><p>7.删除操作：delete（略）</p><br><h1 id="技巧合集"><a href="#技巧合集" class="headerlink" title="技巧合集"></a>技巧合集</h1><h2 id="将-excel-文件导入-mysql-数据库"><a href="#将-excel-文件导入-mysql-数据库" class="headerlink" title="将 excel 文件导入 mysql 数据库"></a>将 excel 文件导入 mysql 数据库</h2><p>参考文章：<a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/656db918e04015a280249c67.html">将 Excel 文件导入到 Navicat for MySQL 数据库方法-百度经验</a></p><h2 id="python3-中-url-不可以包含中文，需要编码"><a href="#python3-中-url-不可以包含中文，需要编码" class="headerlink" title="python3 中 url 不可以包含中文，需要编码"></a>python3 中 url 不可以包含中文，需要编码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse</span><br><span class="line"></span><br><span class="line">key = <span class="string">&#x27;黄王不分&#x27;</span></span><br><span class="line">encoded_url = <span class="string">&#x27;https://blog.harriswong.top/&#x27;</span>+urllib.parse.quote(key)</span><br><span class="line">print(encoded_url)</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>Python网络爬虫笔记</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://blog.harriswong.top/posts/fbf963c/">https://blog.harriswong.top/posts/fbf963c/</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a" style="display:inline-block"><h>作者</h><div class="post-copyright-cc-info"><h>Harris Wong</h></div></div><div class="post-copyright-c" style="display:inline-block"><h>发布于</h><div class="post-copyright-cc-info"><h>2021-07-14</h></div></div><div class="post-copyright-u" style="display:inline-block"><h>更新于</h><div class="post-copyright-cc-info"><h>2022-03-14</h></div></div><div class="post-copyright-c" style="display:inline-block"><h>版权协议</h><div class="post-copyright-cc-info"><a rel="noopener" target="_self" title="CC BY-NC-SA 4.0" href="/cc/">CC BY-NC-SA 4.0</a></div></div></div></div><div class="post-copyright__note"><span class="post-copyright-info"><h>转载或借鉴请注明博客来源噢！</h></span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%F0%9F%90%8DPython/">🐍Python</a><a class="post-meta__tags" href="/tags/%F0%9F%90%9B%E7%88%AC%E8%99%AB/">🐛爬虫</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_python.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://unpkg.com/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://unpkg.com/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated">🎃Trick or Treat!🍭</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/npm/hassan-assets/img/payment.png" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/payment.png" alt="你的鼓励是我创作最大的动力"></a><a href="/about/#%E8%B5%9E%E8%B5%8F%E5%90%8D%E5%8D%95" target="_self"><div class="reward-list">赞赏名单</div><div class="post-qr-code-desc">你的鼓励是我创作最大的动力</div></a></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/64250e44/"><img class="prev-cover" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_IELTS_notes.png" onerror='onerror=null,src="https://cdn.jsdelivr.net/npm/hassan-assets/img/404.png"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">雅思口语笔记</div></div></a></div><div class="next-post pull-right"><a href="/posts/38513257/"><img class="next-cover" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_Vue.js.png" onerror='onerror=null,src="https://cdn.jsdelivr.net/npm/hassan-assets/img/404.png"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Vue前端开发笔记</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>猜你想看</span></div><div class="relatedPosts-list"><div><a href="/posts/14e0d346/" title="用Python批量读取本地文本里的图片链接并下载到本地"><img class="cover" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_python.png" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2022-05-08</div><div class="title">用Python批量读取本地文本里的图片链接并下载到本地</div></div></a></div><div><a href="/posts/2b05d600/" title="用Python批量爬取网络文章图片并下载到本地"><img class="cover" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_python.png" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2022-03-15</div><div class="title">用Python批量爬取网络文章图片并下载到本地</div></div></a></div><div><a href="/posts/4df1e38c/" title="Python基础笔记"><img class="cover" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_python.png" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2022-03-14</div><div class="title">Python基础笔记</div></div></a></div><div><a href="/posts/750429cf/" title="Selenium框架，模拟登陆网站"><img class="cover" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_python.png" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2020-11-26</div><div class="title">Selenium框架，模拟登陆网站</div></div></a></div></div></div><img data-lazy-src="https://cdn.jsdelivr.net/npm/hassan-assets/img/Bilibili_Dividing_Line.png" style="margin:26px 0"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div><div class="comment-privacy"><a href="/privacy/">隐私政策</a></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="status-bar"><div class="status-bar_clock"></div><img class="status-bar_img"></div><div class="author-box"><div class="author-square"><div class="author-info__sayhi is-center" id="author-info__sayhi"></div><div id="he-plugin-simple"></div><script>WIDGET={CONFIG:{modules:"0124",background:"5",tmpColor:"FFFFFF",tmpSize:"16",cityColor:"FFFFFF",citySize:"16",aqiColor:"FFFFFF",aqiSize:"16",weatherIconSize:"23",alertIconSize:"18",padding:"0",shadow:"0",language:"auto",fixed:"false",vertical:"center",horizontal:"left",key:"40156dab3e0f4d78acfab412d011f438"}}</script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script></div><div class="avatar-img-cover author-square"><a href="/gallery/" title="相册"><img src="https://cdn.jsdelivr.net/npm/hassan-assets/img/avatar_blog.jpg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/npm/hassan-assets/img/friend_404.gif"'></a></div></div><div class="author-info__name is-center"><a href="/about/" title="关于本站">Harris Wong</a></div><div class="author-info__description is-center">一名什锦区博主，这里我将记录学习过程中的笔记、生活中的点点滴滴，分享一些经验与想法。在这里相遇很幸运 💛💙</div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">时光机</div><div class="length-num">99</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">51</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/harrisblog/" target="_blank" title="GitHub"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-GitHub"></use></svg></a><a class="social-icon" href="mailto:hassanwong@qq.com" target="_blank" title="QQEmail"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-email"></use></svg></a><a class="social-icon" href="https://weibo.com/hassan89" target="_blank" title="Sina"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-sina"></use></svg></a><a class="social-icon" href="https://space.bilibili.com/383883097" target="_blank" title="Bilibili"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg></a><a class="social-icon" href="https://kg.qq.com/node/personal?uid=639b9c81222c368234" target="_blank" title="全民K歌"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-quanminkge"></use></svg></a><a class="social-icon" href="https://y.qq.com/n/yqq/playlist/7934226388.html#stat=y_new.profile.create_playlist.click&amp;dirid=1" target="_blank" title="QQMusic"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-QQMusic"></use></svg></a><a class="social-icon" href="https://music.163.com/#/user/home?id=1322854335" target="_blank" title="Netease"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease"></use></svg></a><a class="social-icon" href="https://www.zhihu.com/people/song-69-76" target="_blank" title="知乎"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu"></use></svg></a></div><div class="home-indicator"></div></div><script src="/js/custom/card_author.js"></script><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9D%E8%AF%86%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB"><span class="toc-text">初识网络爬虫</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E7%9A%84%E4%B8%80%E8%88%AC%E6%B5%81%E7%A8%8B"><span class="toc-text">网络爬虫的一般流程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-text">基本流程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-text">准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E9%A1%B5%E9%9D%A2"><span class="toc-text">分析页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83"><span class="toc-text">编码规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E6%A8%A1%E5%9D%97"><span class="toc-text">引入模块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-text">获取数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#urllib-%E6%A8%A1%E5%9D%97"><span class="toc-text">urllib 模块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90%E5%86%85%E5%AE%B9"><span class="toc-text">解析内容</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E7%AD%BE%E8%A7%A3%E6%9E%90"><span class="toc-text">标签解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BeautifulSoup-%E6%A8%A1%E5%9D%97"><span class="toc-text">BeautifulSoup 模块</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-text">使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BeautifulSoup4-%E5%9B%9B%E5%A4%A7%E5%AF%B9%E8%B1%A1%E7%A7%8D%E7%B1%BB"><span class="toc-text">BeautifulSoup4 四大对象种类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Tag"><span class="toc-text">Tag</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#NavigableString"><span class="toc-text">NavigableString</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#BeautifulSoup"><span class="toc-text">BeautifulSoup</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Comment"><span class="toc-text">Comment</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E6%96%87%E6%A1%A3%E6%A0%91"><span class="toc-text">遍历文档树</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E6%96%87%E6%A1%A3%E6%A0%91"><span class="toc-text">搜索文档树</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#find-all-name-attrs-recursive-text-kwargs"><span class="toc-text">find_all(name, attrs, recursive, text, **kwargs)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#find"><span class="toc-text">find()</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CSS-%E9%80%89%E6%8B%A9%E5%99%A8"><span class="toc-text">CSS 选择器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E6%8F%90%E5%8F%96"><span class="toc-text">正则提取</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#re-%E6%A8%A1%E5%9D%97"><span class="toc-text">re 模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#re-%E6%A8%A1%E5%9D%97%E4%B8%8B%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-text">re 模块下的函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">函数的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">正则表达式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-text">提取数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE"><span class="toc-text">保存数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Excel-%E8%A1%A8%E5%AD%98%E5%82%A8"><span class="toc-text">Excel 表存储</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#xlwt-%E6%A8%A1%E5%9D%97"><span class="toc-text">xlwt 模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%98%E5%82%A8"><span class="toc-text">数据库存储</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8A%80%E5%B7%A7%E5%90%88%E9%9B%86"><span class="toc-text">技巧合集</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%86-excel-%E6%96%87%E4%BB%B6%E5%AF%BC%E5%85%A5-mysql-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">将 excel 文件导入 mysql 数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#python3-%E4%B8%AD-url-%E4%B8%8D%E5%8F%AF%E4%BB%A5%E5%8C%85%E5%90%AB%E4%B8%AD%E6%96%87%EF%BC%8C%E9%9C%80%E8%A6%81%E7%BC%96%E7%A0%81"><span class="toc-text">python3 中 url 不可以包含中文，需要编码</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>内容更新</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/c631f0b6/" title="Redux in React 学习笔记"><img src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_ReduxInReact.png" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/npm/hassan-assets/img/404.png"' alt="Redux in React 学习笔记"></a><div class="content"><a class="title" href="/posts/c631f0b6/" title="Redux in React 学习笔记">Redux in React 学习笔记</a><time datetime="2023-04-25T19:00:00.000Z" title="更新于 2023-04-25 19:00:00">2023-04-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/50798c86/" title="记一次Win10换Macbook，内附常用Mac软件下载链接"><img src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_MacBook_Air_M2.png" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/npm/hassan-assets/img/404.png"' alt="记一次Win10换Macbook，内附常用Mac软件下载链接"></a><div class="content"><a class="title" href="/posts/50798c86/" title="记一次Win10换Macbook，内附常用Mac软件下载链接">记一次Win10换Macbook，内附常用Mac软件下载链接</a><time datetime="2023-04-24T17:00:00.000Z" title="更新于 2023-04-24 17:00:00">2023-04-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/35c100bf/" title="英语好词好句积累"><img src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_English.png" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/npm/hassan-assets/img/404.png"' alt="英语好词好句积累"></a><div class="content"><a class="title" href="/posts/35c100bf/" title="英语好词好句积累">英语好词好句积累</a><time datetime="2023-04-20T12:00:00.000Z" title="更新于 2023-04-20 12:00:00">2023-04-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/d1f4fb49/" title="那些实用且易忘的CSS小技巧"><img src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_css.png" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/npm/hassan-assets/img/404.png"' alt="那些实用且易忘的CSS小技巧"></a><div class="content"><a class="title" href="/posts/d1f4fb49/" title="那些实用且易忘的CSS小技巧">那些实用且易忘的CSS小技巧</a><time datetime="2023-04-12T23:40:00.000Z" title="更新于 2023-04-12 23:40:00">2023-04-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/1822a0ce/" title="CSS学习笔记"><img src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_CSS1.png" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/npm/hassan-assets/img/404.png"' alt="CSS学习笔记"></a><div class="content"><a class="title" href="/posts/1822a0ce/" title="CSS学习笔记">CSS学习笔记</a><time datetime="2023-04-12T23:30:00.000Z" title="更新于 2023-04-12 23:30:00">2023-04-12</time></div></div></div></div><div class="card-widget card-cheesy_pick-up_lines" onclick='window.open("https://gal.harriswong.top/","_blank")'><div class="card-content"><div class="item-headline"><i class="fas fa-heart" style="color:pink"></i><span>土味情话</span></div><div id="cheesy_pick-up_lines-container"></div></div></div><script data-pjax="data-pjax" src="/js/custom/cheesy_pick-up_lines.js"></script><div class="card-widget card-ad-ymts" onclick='pjax.loadUrl("/ymts/")'><div id="flip-wrapper"><div id="flip-content"><div class="card-ad-heads"><div class="card-ad-title">英曼天诗留学团队👉</div><div class="card-ad-desc">想留学？不会申请？不会写</div><div class="card-ad-desc">文书？主流中介价格昂贵？</div></div><div class="card-ad-tails"><div class="card-ad-scan"><div class="card-ad-title">扫一扫👉</div><div class="card-ad-desc">添加顾问微信</div><div class="card-ad-desc">咨询留学详情</div></div><img src="https://cdn.jsdelivr.net/npm/hassan-assets/img/ad_ymts_vx.png"></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_python.png)"><div id="footer-wrap"><div id="harris-footer"><div class="footer-group"><div class="copyright"><h5>©2019 - 2023</h5><h5>@Harris Wong</h5><svg style="width:100px;height:100px" aria-hidden="true"><use xlink:href="#icon-Butterfly"></use></svg><div class="workboard"></div></div></div><div class="footer-group"><h4 class="footer-title">文库</h4><div class="footer-links"><a class="footer-item" href="/archives/">时光机</a><a class="footer-item" href="/tags/">标签</a><a class="footer-item" href="/categories/">分类</a><a class="footer-item" href="/books/">书评</a><a class="footer-item" target="_blank" rel="noopener" href="https://doc.harriswong.top/">文档网站</a></div></div><div class="footer-group"><h4 class="footer-title">生活</h4><div class="footer-links"><a class="footer-item" href="/playlist/">歌单</a><a class="footer-item" href="/movies/">影评</a><a class="footer-item" href="/gallery/">相册</a><a class="footer-item" href="/bb/">哔哔</a><a class="footer-item" href="/sweetcloud/" style="color:#dfb1e4e6">情侣哔哔</a></div></div><div class="footer-group"><h4 class="footer-title">功能</h4><div class="footer-links"><a class="footer-item" target="_blank" rel="noopener" href="https://gal.harriswong.top/">画廊</a><a class="footer-item" target="_blank" rel="noopener" href="https://mb.harriswong.top/">八音盒</a><a class="footer-item" target="_blank" rel="noopener" href="https://navi.harriswong.top/">网址导航</a><a class="footer-item" href="/videoparsing/">视频解析</a><a class="footer-item" href="/ymts/" style="color:#ff8840d9">留学团队</a></div></div><div class="footer-group"><h4 class="footer-title">本站</h4><div class="footer-links"><a class="footer-item" href="/notice/">公告栏</a><a class="footer-item" href="/about/">关于本站</a><a class="footer-item" href="/log/">更新手账</a><a class="footer-item" href="/about/#%E6%95%B0%E6%8D%AE%E7%BB%9F%E8%AE%A1">数据统计</a><a class="footer-item" href="/about/#%E8%B5%9E%E8%B5%8F%E5%90%8D%E5%8D%95">赞赏名单</a></div></div><div class="footer-group"><h4 class="footer-title">联系</h4><div class="footer-links"><a class="footer-item" href="/comments/">留言信枫</a><a class="footer-item" href="mailto:hassanwong@qq.com">发送邮件</a></div><h4 class="footer-title">朋友</h4><div class="footer-links"><a class="footer-item" href="/link/">友人帐</a><a class="footer-item" href="/friendcircle/">朋友圈</a></div></div><div class="footer-group"><h4 class="footer-title">协议</h4><div class="footer-links"><a class="footer-item" href="/privacy/">隐私政策</a><a class="footer-item" href="/cc/">版权协议</a></div><h4 class="footer-title">推荐</h4><div class="footer-links"><a class="footer-item" href="/tags/%F0%9F%94%A0%E8%8B%B1%E8%AF%AD/">🔠英语</a><a class="footer-item" href="/tags/%F0%9F%A6%8BButterfly/">🦋Butterfly</a></div></div><div class="footer_custom_text"><h4>网站徽标</h4><p><a style="margin-inline:5px" target="_blank" href="https://hexo.io/"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为Hexo"></a><a style="margin-inline:5px" target="_blank" href="https://butterfly.js.org/"><img src="https://img.shields.io/badge/Theme-Butterfly-7138b6?style=flat&logo=bitdefender" title="主题采用butterfly"></a><a style="margin-inline:5px" target="_blank" href="https://www.jsdelivr.com/"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr" title="本站使用JsDelivr为静态资源提供CDN加速"></a><a style="margin-inline:5px" target="_blank" href="https://github.com/"><img src="https://img.shields.io/badge/Source-GitHub-67e1fb?style=flat&logo=GitHub" title="本站托管于GitHub"></a><a style="margin-inline:5px" target="_blank" href="https://vercel.com/"><img src="https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&logo=Vercel" title="本站也托管于Vercel"></a><a style="margin-inline:5px" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-ee5b32?style=flat&logo=Claris" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a><a href="https://icp.gov.moe/?keyword=20210809" target="_blank" style="margin:0"><img src="https://img.shields.io/badge/%E8%90%8CICP%E5%A4%87-20210809-fe1384?style-flat&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAAByxJREFUSInl1nlwVeUZx/HPuTckkD0kQFiCEEIUlNUCAqKoSBV1AIt1ikpVLFbLONjWGUXbmWrbweJMy7hUxbbTjsUq6KCiWEvr0kE2WVK2QCKBJCxJgEASsienfxwqMob+3Zm+f93z3vM+32f5vc9z+H9bwVcfOp/YQ+1prhhEZS1VDQzqQ1MjiQmIC5Liwm3lBWpqFimrulb/7A/067vM2IsOBZ2h8MhJQW6KMDNVsKeaizKEyUlsKueqgWJ39AMJF3QpDCNYr1SaEig/lWNX2Z1h6dH5/lVyGdVIZFf7MHo9bEfh9rCg/+8NyHlN77QTsnpQ0i2y08VK+BosfhbW0cHxqmSfFd9qW+l9Pi+5WltFdGTsOBbO5dJcdh3lN5+xff0Y2zuelXjRsyYUrjOu4BVJaavlpbWIJRBLOM+J81O95AAnTtM9vNHGknut3zdT48FutJE3koWTuG4oSXH+VsInX3B9IdcVUNfCuv08t4GjO6NspOa3BNcOXx1eOugVHQnrTMkTuyWrC/BjRZO9uPYTpw7HhTWkXcLd45l9GblpHD7NWzt5ZTMXZ/OdkTy+lvR07rmcmWffq6pn9W5e/oymfcT6kJbXHiydMyVYkL/x66n+ZMcctQfjhgxl6UIGZ3Ooltd2RIZqjqKRS0ew9cFIA1cO5urlLHuPZWsZPJiZw7gqn0VT2HCIR9+jvCQhfHPrLGyE2Hng2roBxHnmJoZnc9drbD3I6QaaWkjpSVoeu4+x5XB05qMDqCenHz37UHmcFRv54ZuMeoYrB/L0DPRgZ0WfrsXVKzPX3nYykrn3dUZl8+Q0Qox/gc/L6ZlKzxQefo+UROpa6Z4VCedkPd8YyJYHI3u5T/HAShZNQxsXZfR3pCtwRW066VEeOuIUVUf77+9jTw2pycTOJml7Je1t9EgiI5X2jkgyze1fCSSdtjhBiJCkpKyuI+5oTdAtkTCgVwrbKsl8ko6QjO40tZ67EpkpdIbRf20dkbPpPTjdwsSX6I5dJYy4hoQAaZQdDy4A1iEMI613T6LtBPXJpPakrjGqc1Y6CTFq62htJp5KRwPJKWSkU3WKiiPEEqO6xgM6oZmctJhDXYH7Z59xuCyKpK6R26ZE+ys3MWYoN1/Mc5uoqmbEQJ6fTc/ulJ3i/lUc+YIfzeKhKzjVHN31A3XRHddKSrf6/6DOV3VTcw1hVKfkxOhaPDAe1UwfwmNTqT1Drxw+nE9xNXetIjHG2vnoxoT+rNrN2Of58Rp6JZ+ldKes5kjX4G7dKuikpoERfaltYnQ/DOSS3hEAFk9lXQkLnmf7Ib65lPJT3HU1+46Tm8rYvgzKYVA2h+vQIMjvewHwdSN20MiOSmZczO4a1hSzYi77T7CiiPF5JMTZexjJ5OagkwNV9M+MnJ09nKU3smgyQ3PYWoEO4fUjii4QceJmevJuMeP6csUAln4atcbSGoqOUpjD30uZNwnpHNtN3lC+NZa1xeT34pGVTJ3PL9+Ohs6GQ8gVtHZs6VLVwZhBReGwoXvt3THM/hP0SWVnCR8f4PMjkffjB/DQS8waxpHFfFgaaeHZDRRtJn0yP5tF31ymFVJ2nN27GD66KBzca2/XEWdkUpD3Fmd4tYj0FMS54Q9UnuaDUv6yE/24ewWP/DU6N/d1fvousYEs28DyLVEvGDOAt/egmSkXv2VYn3NBfpXbua6J8hMFFvy2RHsL+57gmX+w/AN651PfEDWQzLRI+afqIqOxFDJT6Rbn9Bmad3PnTH5wIxOXkJTWGiz57hCDsyqDWVldRNzeyOh+paaPfpFKnvqQX88iZwDVx0lLJqUHbe3EkZ1Odm+yUqK2GHYKmhvIG8fyeTz9IY5x67jnFPapdPDkl6jzwEF9IDjZJlgwfbG+o2u8+g4rd7D/UYI41TXnevV5K4j2q6uESckUP8rvNrH6fUH/sRXB9AlPONMSDZ8uazwoi56JjEyvdftV88jinhf4uIzmJRQOoOYgja0RKAiIBZxpjvZH5tP0c97axcLlyBXOuWZemJTYFFbUCU+1dl3j8PGSyFhnJ7EkYcWh7/njqpep5xfzWTyZZ7dEg73xOJKiGqf3YenNLBjLTz7i539COg/OvSOYO2GFo/VRG0Zwe0YX4Ns3R7NXSCxBeM8IthXfZvGf3xCWc/kkXvg2vVP4YB/rDzC1gGlDo+50/xvs2khKPrNnzAzmTH5HbzR0fkkKro93Ab5vx9kfaGgT3lLA5EyWbRpoTdHbSreOppGJV/PwlRTksK+aZz5l6z+RLBgxaau5k2cJelTKzmRQMq0d51J8UxL+23d1TDTcj7WQllZu4YwxDo+eZc22X9mwd6gN65GIFmQzampxcMOoR1xeuMbpVoqromsXdG3+wmCiekNtfSSmiUNWu2zgap+WjlZW8X11TeNkpWwICvNfCm8u3Cmxg4PN0VdmEJw7/7+0/g32RaqCbhRecAAAAABJRU5ErkJggg==" title="萌国ICP备案"></a><a style="margin-inline:5px" target="_blank" href="https://space.bilibili.com/383883097"><img src="https://img.shields.io/badge/dynamic/json?color=%23fe7499&label=Bilibili&query=%24.data.totalSubs&suffix=%20Followers&url=https%3A%2F%2Fapi.spencerwoo.com%2Fsubstats%2F%3Fsource%3Dbilibili%26queryKey%3D383883097&logo=Bilibili" title="什锦区UP主"></a><a style="margin-inline:5px" target="_blank" href="https://weibo.com/u/6574421101"><img src="https://img.shields.io/badge/dynamic/json?color=%23e32428&label=Weibo&query=%24.data.totalSubs&suffix=%20Followers&url=https%3A%2F%2Fapi.spencerwoo.com%2Fsubstats%2F%3Fsource%3Dweibo%26queryKey%3D6574421101&logo=Sina%20Weibo" title="分享学习、生活动态"></a></p></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="hide-aside-btn" type="button" title="单双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论区"><i class="fas fa-comments"></i></a></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">站内搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="输入关键词查找文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://unpkg.com/vue@2.6.11"></script><script src="/js/tw_cn.js"></script><script src="https://unpkg.com/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://unpkg.com/instant.page/instantpage.js" type="module"></script><script src="https://unpkg.com/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://unpkg.com/node-snackbar/dist/snackbar.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hassan-assets/js/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box')?.classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box')?.classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>if(window.MathJax)MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typeset();else{window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],tags:"ams"},chtml:{scale:1.2},options:{renderActions:{findScript:[10,t=>{for(const e of document.querySelectorAll('script[type^="math/tex"]')){const a=!!e.type.match(/; *mode=display/),n=new t.options.MathItem(e.textContent,t.inputJax[0],a),s=document.createTextNode("");e.parentNode.replaceChild(s,e),n.start={node:s,delim:"",n:0},n.end={node:s,delim:"",n:0},t.math.push(n)}},""],insertScript:[200,()=>{document.querySelectorAll("mjx-container:not([display])").forEach(t=>{const e=t.parentNode;"li"===e.nodeName.toLowerCase()?e.parentNode.classList.add("has-jax"):e.classList.add("has-jax")})},"",!1]}}};const t=document.createElement("script");t.src="https://unpkg.com/mathjax/es5/tex-mml-chtml.js",t.id="MathJax-script",t.async=!0,document.head.appendChild(t)}</script><link rel="stylesheet" href="https://unpkg.com/katex/dist/katex.min.css"><script src="https://unpkg.com/katex/dist/contrib/copy-tex.min.js"></script><script>document.querySelectorAll("#article-container span.katex-display").forEach(a=>{btf.wrap(a,"div",{class:"katex-wrap"})})</script><script>(()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(e.length){window.runMermaid=()=>{window.loadMermaid=!0;const t="dark"===document.documentElement.getAttribute("data-theme")?"dark":"forest";Array.from(e).forEach((e,n)=>{const r=e.firstElementChild,d="mermaid-"+n,i="%%{init:{ 'theme':'"+t+"'}}%%\n"+r.textContent;mermaid.mermaidAPI.render(d,i,e=>{r.insertAdjacentHTML("afterend",e)})})};const t=()=>{window.loadMermaid?runMermaid():getScript("https://unpkg.com/mermaid/dist/mermaid.min.js").then(runMermaid)};window.pjax?t():document.addEventListener("DOMContentLoaded",t)}})()</script><script>(()=>{const o=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo-harris.vercel.app/",region:"",onCommentLoaded:function(){btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null)),GLOBAL_CONFIG_SITE.isPost&&(()=>{const o=document.getElementById("twikoo-count");o&&twikoo.getCommentsCount({envId:"https://twikoo-harris.vercel.app/",region:"",urls:[window.location.pathname],includeReply:!1}).then((function(t){o.innerText=t[0].count})).catch((function(o){console.error(o)}))})()},t=()=>{"object"!=typeof twikoo?getScript("https://unpkg.com/twikoo/dist/twikoo.all.min.js").then(o):setTimeout(o,0)};t()})()</script><script>var gitcalendar = new Vue({
  el: '#gitcalendar',
  data: {
    simplemode: false, 
    user: 'harrisblog',
    fixed: 'fixed',
    px: 'px',
    x: '',
    y: '',
    span1: '',
    span2: '',
    month: ['Jan.', 'Feb.', 'Mar.', 'Apr.', 'May', 'Jun.', 'Jul.', 'Aug.', 'Sep.', 'Oct.', 'Nov.', 'Dec.'],
    monthchange: [],
    oneyearbeforeday: '',
    thisday: '',
    amonthago: '',
    aweekago: '',
    weekdatacore: 0,
    datacore: 0,
    total: 0,
    datadate: '',
    data: [],
    positionplusdata: [],
    firstweek: [],
    lastweek: [],
    beforeweek: [],
    thisweekdatacore: 0,
    mounthbeforeday: 0,
    mounthfirstindex: 0,
    crispedges: 'crispedges',
    thisdayindex: 0,
    amonthagoindex: 0,
    amonthagoweek: [],
    firstdate: [],
    first2date: [],
    montharrbefore: [],
    monthindex: 0,
    color: ['rgb(112, 140, 207, 0.1)', '#d2f3c7', '#b0f0b4', '#8ae8c2', '#75e3d9', '#60c6df', '#4a93db', '#3555d7', '#3128ce', '#5325bc', '#6c22aa']
  },
  methods: {
    selectStyle(data, event) {
      document.querySelector('.angle-wrapper').style.display = 'block'
      this.span1 = data.date;
      this.span2 = data.count;
      this.x = event.clientX - 100;
      this.y = event.clientY - 60
    },
    outStyle() {
      document.querySelector('.angle-wrapper').style.display = 'none'
    }, //-修改逻辑
    thiscolor(x) {
      if (x === 0) {
        return this.color[0]
      } else if (x < 2) {
        return this.color[1]
      } else if (x < 3) {
        return this.color[2]
      } else if (x < 4) {
        return this.color[3]
      } else if (x < 6) {
        return this.color[4]
      } else if (x < 8) {
        return this.color[5]
      } else if (x < 11) {
        return this.color[6]
      } else if (x < 14) {
        return this.color[7]
      } else if (x < 17) {
        return this.color[8]
      } else if (x < 22) {
        return this.color[9]
      } else {
        return this.color[10]
      }
    },
  }
});
var apiurl = 'python-yln-github-calendar-api.vercel.app' ? 'https://python-yln-github-calendar-api.vercel.app/api?' : 'https://githubapi.ryanchristian.dev/user/'
var githubapiurl = apiurl + gitcalendar.user;
//- var githubapiurl = "https://python-github-calendar-api-hassan.vercel.app/api?harrisblog"
//canvas绘图
function responsiveChart() {
  let c = document.getElementById("gitcanvas");
  if (c) {
    let cmessage = document.getElementById("gitmessage");
    let ctx = c.getContext("2d");
    c.width = document.getElementById("gitcalendarcanvasbox")?.offsetWidth;
    let linemaxwitdh = 0.96 * c.width / gitcalendar.data.length;
    c.height = 9 * linemaxwitdh;
    let lineminwitdh = 0.8 * linemaxwitdh;
    let setposition = {
      x: 0.02 * c.width,
      y: 0.025 * c.width
    };
    for (let week in gitcalendar.data) {
      weekdata = gitcalendar.data[week];
      for (let day in weekdata) {
        let dataitem = {
          date: "",
          count: "",
          x: 0,
          y: 0
        };
        gitcalendar.positionplusdata.push(dataitem);
        ctx.fillStyle = gitcalendar.thiscolor(weekdata[day].count);
        setposition.y = Math.round(setposition.y * 100) / 100;
        dataitem.date = weekdata[day].date;
        dataitem.count = weekdata[day].count;
        dataitem.x = setposition.x;
        dataitem.y = setposition.y;
        ctx.fillRect(setposition.x, setposition.y, lineminwitdh, lineminwitdh);
        setposition.y = setposition.y + linemaxwitdh
      };
      setposition.y = 0.025 * c.width;
      setposition.x = setposition.x + linemaxwitdh
    };
    ctx.font = "600  Arial";
    ctx.fillStyle = '#aaa';
    ctx.fillText("7", 0, 1.9 * linemaxwitdh);
    ctx.fillText("1", 0, 2.9 * linemaxwitdh);
    ctx.fillText("2", 0, 3.9 * linemaxwitdh);
    ctx.fillText("3", 0, 4.9 * linemaxwitdh);
    ctx.fillText("4", 0, 5.9 * linemaxwitdh);
    ctx.fillText("5", 0, 6.9 * linemaxwitdh);
    ctx.fillText("6", 0, 7.9 * linemaxwitdh);
    let monthindexlist = c.width / 24;
    for (let index in gitcalendar.monthchange) {
      ctx.fillText(gitcalendar.monthchange[index], monthindexlist, 0.7 * linemaxwitdh);
      monthindexlist = monthindexlist + c.width / 12
    };
    cmessage.onmousemove = function(event) {
      document.querySelector('.angle-wrapper').style.display = 'none'
    };
    c.onmousemove = function(event) {
      document.querySelector('.angle-wrapper').style.display = 'none'
      getMousePos(c, event);
    };

    function getMousePos(canvas, event) {
      var rect = canvas.getBoundingClientRect();
      var x = event.clientX - rect.left * (canvas.width / rect.width);
      var y = event.clientY - rect.top * (canvas.height / rect.height);
      //console.log("x:"+x+",y:"+y);
      for (let item of gitcalendar.positionplusdata) {
        let lenthx = x - item.x;
        let lenthy = y - item.y;
        //console.log(lenthx,lenthy);
        if (0 < lenthx && lenthx < lineminwitdh) {
          if (0 < lenthy && lenthy < lineminwitdh) {
            //console.log(item.date,item.count)
            document.querySelector('.angle-wrapper').style.display = 'block'
            gitcalendar.span1 = item.date;
            gitcalendar.span2 = item.count;
            gitcalendar.x = event.clientX - 100;
            gitcalendar.y = event.clientY - 60
          }
        }
        //if(0< x - item.x <lineminwitdh&&0< y - item.y <lineminwitdh){
        //console.log(item.count,item.date);
        //}
      }
    }
  }
}
//数据统计算法
function addlastmonth() {
  if (gitcalendar.thisdayindex === 0) {
    thisweekcore(52);
    thisweekcore(51);
    thisweekcore(50);
    thisweekcore(49);
    thisweekcore(48);
    gitcalendar.thisweekdatacore += gitcalendar.firstdate[6].count;
    gitcalendar.amonthago = gitcalendar.firstdate[6].date
  } else {
    thisweekcore(52);
    thisweekcore(51);
    thisweekcore(50);
    thisweekcore(49);
    thisweek2core();
    gitcalendar.amonthago = gitcalendar.first2date[gitcalendar.thisdayindex - 1].date
  }
};

function thisweek2core() {
  for (let i = gitcalendar.thisdayindex - 1; i < gitcalendar.first2date.length; i++) {
    gitcalendar.thisweekdatacore += gitcalendar.first2date[i].count
  }
};

function thisweekcore(index) {
  for (let item of gitcalendar.data[index]) {
    gitcalendar.thisweekdatacore += item.count
  }
};

function addlastweek() {
  for (let item of gitcalendar.lastweek) {
    gitcalendar.weekdatacore += item.count
  }
};

function addbeforeweek() {
  for (let i = gitcalendar.thisdayindex; i < gitcalendar.beforeweek.length; i++) {
    gitcalendar.weekdatacore += gitcalendar.beforeweek[i].count
  }
};

function addweek(data) {
  if (gitcalendar.thisdayindex === 6) {
    gitcalendar.aweekago = gitcalendar.lastweek[0].date;
    addlastweek()
  } else {
    lastweek = data.contributions[51];
    gitcalendar.aweekago = lastweek[gitcalendar.thisdayindex + 1].date;
    addlastweek();
    addbeforeweek()
  }
}

fetch(githubapiurl)
  .then(data => data.json())
  .then(data => {
    gitcalendar.data = data.contributions;
    gitcalendar.total = data.total;
    gitcalendar.first2date = gitcalendar.data[48];
    gitcalendar.firstdate = gitcalendar.data[47];
    gitcalendar.firstweek = data.contributions[0];
    gitcalendar.lastweek = data.contributions[52];
    gitcalendar.beforeweek = data.contributions[51];
    gitcalendar.thisdayindex = gitcalendar.lastweek.length - 1;
    gitcalendar.thisday = gitcalendar.lastweek[gitcalendar.thisdayindex].date;
    gitcalendar.oneyearbeforeday = gitcalendar.firstweek[0].date;
    gitcalendar.monthindex = gitcalendar.thisday.substring(5, 7) * 1;
    gitcalendar.montharrbefore = gitcalendar.month.splice(gitcalendar.monthindex, 12 - gitcalendar.monthindex);
    gitcalendar.monthchange = gitcalendar.montharrbefore.concat(gitcalendar.month);
    addweek(data);
    addlastmonth();
    responsiveChart();
  })
  .catch(function(error) {
    console.log(error);
  });

//手机版更换为svg绘制
if (document.getElementById("gitcalendarcanvasbox")?.offsetWidth < 500) {
  gitcalendar.simplemode = false
}

//当改变窗口大小时重新绘制canvas
window.onresize = function() {
  if (gitcalendar.simplemode) responsiveChart()
}

//解决滚动滑轮时出现的标签显示
window.onscroll = function() {
  if (document.querySelector('.angle-wrapper')) {
    document.querySelector('.angle-wrapper').style.display = 'none'
  }
};</script></div><script>window.addEventListener("load",()=>{const e=e=>{let t="";if(e.length)for(let n=0;n<e.length;n++){t+="<div class='aside-list-item'>";{const a="data-lazy-src";t+=`<a href='${e[n].url}' class='thumbnail'><img ${a}='${e[n].avatar}' alt='${e[n].nick}'></a>`}t+=`<div class='content'>\n        <a class='comment' href='${e[n].url}' title='${e[n].content}'>${e[n].content}</a>\n        <div class='name'><span>${e[n].nick} / </span><time datetime="${e[n].date}">${btf.diffDate(e[n].date,!0)}</time></div>\n        </div></div>`}else t+="看什么看，还不赶紧评论一条吗？";let n=document.querySelector("#card-newest-comments .aside-list");n.innerHTML=t,window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(n)},t=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const t=saveToLocal.get("twikoo-newest-comments");t?e(JSON.parse(t)):(()=>{const t=()=>{twikoo.getRecentComments({envId:"https://twikoo-harris.vercel.app/",region:"",pageSize:5,includeReply:!0}).then((function(t){const n=t.map(e=>{return{content:(t=e.comment,""===t||(t=(t=(t=(t=t.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length>150&&(t=t.substring(0,150)+"..."),t),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.id,date:new Date(e.created).toISOString()};var t});saveToLocal.set("twikoo-newest-comments",JSON.stringify(n),10/1440),e(n)})).catch((function(e){document.querySelector("#card-newest-comments .aside-list").innerHTML="无法获取评论，请确认相关配置是否正确"}))};"object"==typeof twikoo?t():getScript("https://unpkg.com/twikoo/dist/twikoo.all.min.js").then(t)})()}};t(),document.addEventListener("pjax:complete",t)})</script><script src="https://wowjs.uk/dist/wow.min.js"></script><script src="/js/custom/wow.js"></script><script src="/js/custom/pace.js"></script><div id="doraemon_to_top"><img alt="doraemon_to_top" title="返回顶部" onclick="fly_to_top()" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/Doraemon.png"></div><script defer src="/js/custom/smooth.js"></script><script async src="//at.alicdn.com/t/font_2032782_ev6ytrh30f.js"></script><script async src="//at.alicdn.com/t/font_2204525_jxth1d6fs6o.js"></script><script defer src="/js/custom/console.js"></script><script src="/js/custom/rgbaster.js"></script><script src="/js/custom/custom.js"></script><script data-pjax>coverColor(),workboard()</script><div class="aplayer no-destroy" data-id="5363191876" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="true" data-theme="#1fc7b6" data-order="random" data-preload="none" data-autoplay="false" muted></div><script src="https://unpkg.com/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!0,document.body.addEventListener("input",POWERMODE)</script><script id="click-show-text" src="https://unpkg.com/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="Jaggie,🍁,🌼,Harris,🌸,🌻" data-fontsize="18px" data-random="true" async></script><link rel="stylesheet" href="https://unpkg.com/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://unpkg.com/aplayer/dist/APlayer.min.js"></script><script src="https://unpkg.com/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://unpkg.com/pjax/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),"object"==typeof preloader&&preloader.initLoading(),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>