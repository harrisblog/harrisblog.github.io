<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>React学习笔记 | Harris's Blog</title><meta name="keywords" content="📝前端,❄React"><meta name="author" content="Harris Wong"><meta name="copyright" content="Harris Wong"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="我看的是React 教学视频 - Scrimba，React 零基础入门好客租房项目实战  React 入门Intro 介绍CDN、导包CDN： 123456789&lt;script  crossorigin  src&#x3D;&quot;https:&#x2F;&#x2F;unpkg.com&#x2F;react@17&#x2F;umd&#x2F;react.development.js&quot;&gt;&lt;&#x2F;script&gt;&lt;sc"><meta property="og:type" content="article"><meta property="og:title" content="React学习笔记"><meta property="og:url" content="https://blog.harriswong.top/posts/a1605017/index.html"><meta property="og:site_name" content="Harris&#39;s Blog"><meta property="og:description" content="我看的是React 教学视频 - Scrimba，React 零基础入门好客租房项目实战  React 入门Intro 介绍CDN、导包CDN： 123456789&lt;script  crossorigin  src&#x3D;&quot;https:&#x2F;&#x2F;unpkg.com&#x2F;react@17&#x2F;umd&#x2F;react.development.js&quot;&gt;&lt;&#x2F;script&gt;&lt;sc"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_React.png"><meta property="article:published_time" content="2022-07-11T15:31:38.000Z"><meta property="article:modified_time" content="2023-03-24T20:45:00.000Z"><meta property="article:author" content="Harris Wong"><meta property="article:tag" content="📝前端"><meta property="article:tag" content="❄React"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_React.png"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/npm/hassan-assets/img/favicon.ico"><link rel="canonical" href="https://blog.harriswong.top/posts/a1605017/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#1fc7b6"><link rel="apple-touch-icon" sizes="180x180" href="https://cdn.jsdelivr.net/npm/hassan-assets/img/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="https://cdn.jsdelivr.net/npm/hassan-assets/img/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="https://cdn.jsdelivr.net/npm/hassan-assets/img/favicon.ico"><link rel="mask-icon" href="https://cdn.jsdelivr.net/npm/hassan-assets/img/favicon.ico" color="#5bbad5"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://unpkg.com/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?7037b55a6e73a4d644e9f9f66c4db475";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简"},noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:388},copy:{success:"复制成功，请注明博客来源",error:"复制错误！",noSupport:"浏览器不支持！"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{limitCount:1e3,languages:{author:"作者: Harris Wong",link:"链接: ",source:"来源: Harris's Blog",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},lightbox:"mediumZoom",Snackbar:{chs_to_cht:"已为您切换繁体~",cht_to_chs:"已为您切换简体~",day_to_night:"已为您切换深色模式~",night_to_day:"已为您切换浅色模式~",bgLight:"#62cec4",bgDark:"#666",position:"bottom-center"},source:{justifiedGallery:{js:"https://unpkg.com/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://unpkg.com/flickr-justified-gallery/dist/fjGallery.css"}},isPhotoFigcaption:!0,islazyload:!0,isAnchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"React学习笔记",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-03-24 20:45:00"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const a=864e5*o,n={value:t,expiry:(new Date).getTime()+a};localStorage.setItem(e,JSON.stringify(n))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const a=document.createElement("script");a.src=e,a.async=!0,a.onerror=o,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","ffffff")};const t=saveToLocal.get("theme"),o=(new Date).getHours();void 0===t?o<=6||o>=18?activateDarkMode():activateLightMode():"light"===t?activateLightMode():activateDarkMode();const a=saveToLocal.get("aside-status");void 0!==a&&("hide"===a?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/custom/custom.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_2204525_jxth1d6fs6o.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" onload='this.media="screen"'><link rel="stylesheet" href="/css/custom/twikoo_beautify.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="//s1.hdslb.com/bfs/static/jinkela/long/font/regular.css" media="all" onload='this.media="all"'><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Harris's Blog" type="application/atom+xml"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/npm/hassan-assets/img/avatar_blog.jpg" onerror='onerror=null,src="https://cdn.jsdelivr.net/npm/hassan-assets/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">Harris Wong</div><div class="author-info__description">一名什锦区博主，这里我将记录学习过程中的笔记、生活中的点点滴滴，分享一些经验与想法。在这里相遇很幸运 💛💙</div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">时光机</div><div class="length-num">97</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">50</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/hassanblog/" target="_blank" title="GitHub"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-GitHub"></use></svg></a><a class="social-icon" href="mailto:hassanwong@qq.com" target="_blank" title="QQEmail"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-email"></use></svg></a><a class="social-icon" href="https://weibo.com/hassan89" target="_blank" title="Sina"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-sina"></use></svg></a><a class="social-icon" href="https://space.bilibili.com/383883097" target="_blank" title="Bilibili"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg></a><a class="social-icon" href="https://kg.qq.com/node/personal?uid=639b9c81222c368234" target="_blank" title="全民K歌"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-quanminkge"></use></svg></a><a class="social-icon" href="https://y.qq.com/n/yqq/playlist/7934226388.html#stat=y_new.profile.create_playlist.click&amp;dirid=1" target="_blank" title="QQMusic"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-QQMusic"></use></svg></a><a class="social-icon" href="https://music.163.com/#/user/home?id=1322854335" target="_blank" title="Netease"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease"></use></svg></a><a class="social-icon" href="https://www.zhihu.com/people/song-69-76" target="_blank" title="知乎"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu"></use></svg></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i> <span>文库</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>时光机</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-shapes"></i> <span>分类</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw iconfont icon-book"></i> <span>书评</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://doc.harriswong.top"><i class="fa-fw fas fa-file"></i> <span>文档网站</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-cube"></i> <span>生活</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/playlist/"><i class="fa-fw fas fa-music"></i> <span>歌单</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-film"></i> <span>影评</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-photo-video"></i> <span>相册</span></a></li><li><a class="site-page child" href="/bb/"><i class="fa-fw fas fa-bomb"></i> <span>哔哔</span></a></li><li><a class="site-page child" href="/sweetcloud/"><i class="fa-fw fas fa-heart"></i> <span>情侣哔哔</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-puzzle-piece"></i> <span>功能</span></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://gal.harriswong.top"><i class="fa-fw iconfont icon-gallery"></i> <span>画廊</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://mb.harriswong.top"><i class="fa-fw iconfont icon-musicbox"></i> <span>八音盒</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://navi.harriswong.top"><i class="fa-fw fas fa-paper-plane"></i> <span>网址导航</span></a></li><li><a class="site-page child" href="/videoparsing/"><i class="fa-fw iconfont icon-video"></i> <span>视频解析</span></a></li><li><a class="site-page child" href="/ymts/"><i class="fa-fw iconfont icon-overseas"></i> <span>留学团队</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-child"></i> <span>朋友</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友人帐</span></a></li><li><a class="site-page child" href="/friendcircle/"><i class="fa-fw fas fa-spinner"></i> <span>朋友圈</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-info-circle"></i> <span>本站</span></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://harriswong.top"><i class="fa-fw fa-solid fa-house"></i> <span>个人主页</span></a></li><li><a class="site-page child" href="/notice/"><i class="fa-fw iconfont icon-notice"></i> <span>公告栏</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-star"></i> <span>关于本站</span></a></li><li><a class="site-page child" href="/comments/"><i class="fa-fw fas fa-comments"></i> <span>留言信枫</span></a></li><li><a class="site-page child" href="/log/"><i class="fa-fw fas fa-pencil-ruler"></i> <span>更新手账</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_React.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Harris's Blog</a></span><span id="page_name"><a id="page-name-text" onclick="btf.scrollToDest(0,500)" data-title="🎉欢迎光临诗颂的博客🎈">React学习笔记</a></span><div class="menus_items"><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i> <span>文库</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>时光机</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-shapes"></i> <span>分类</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw iconfont icon-book"></i> <span>书评</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://doc.harriswong.top"><i class="fa-fw fas fa-file"></i> <span>文档网站</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-cube"></i> <span>生活</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/playlist/"><i class="fa-fw fas fa-music"></i> <span>歌单</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-film"></i> <span>影评</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-photo-video"></i> <span>相册</span></a></li><li><a class="site-page child" href="/bb/"><i class="fa-fw fas fa-bomb"></i> <span>哔哔</span></a></li><li><a class="site-page child" href="/sweetcloud/"><i class="fa-fw fas fa-heart"></i> <span>情侣哔哔</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-puzzle-piece"></i> <span>功能</span></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://gal.harriswong.top"><i class="fa-fw iconfont icon-gallery"></i> <span>画廊</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://mb.harriswong.top"><i class="fa-fw iconfont icon-musicbox"></i> <span>八音盒</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://navi.harriswong.top"><i class="fa-fw fas fa-paper-plane"></i> <span>网址导航</span></a></li><li><a class="site-page child" href="/videoparsing/"><i class="fa-fw iconfont icon-video"></i> <span>视频解析</span></a></li><li><a class="site-page child" href="/ymts/"><i class="fa-fw iconfont icon-overseas"></i> <span>留学团队</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-child"></i> <span>朋友</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友人帐</span></a></li><li><a class="site-page child" href="/friendcircle/"><i class="fa-fw fas fa-spinner"></i> <span>朋友圈</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-info-circle"></i> <span>本站</span></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://harriswong.top"><i class="fa-fw fa-solid fa-house"></i> <span>个人主页</span></a></li><li><a class="site-page child" href="/notice/"><i class="fa-fw iconfont icon-notice"></i> <span>公告栏</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-star"></i> <span>关于本站</span></a></li><li><a class="site-page child" href="/comments/"><i class="fa-fw fas fa-comments"></i> <span>留言信枫</span></a></li><li><a class="site-page child" href="/log/"><i class="fa-fw fas fa-pencil-ruler"></i> <span>更新手账</span></a></li></ul></div></div><div id="nav-right"><div class="nav-button" title="Search"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>站内搜索</span></a></div><div class="nav-button" id="mode-button"><a class="site-page" onclick="navFn.switchDarkMode()" title="深浅切换"><i class="fas fa-moon"></i> <span>深浅切换</span></a></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div class="coverdiv" id="coverdiv"><img id="post-cover" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_React.png" alt="cover"></div><div id="post-info"><h1 class="post-title">React学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><time class="post-meta-date-created" datetime="2022-07-11T15:31:38.000Z" title="发表于 2022-07-11 15:31:38">2022-07-11</time><i class="fas fa-history fa-fw post-meta-icon"></i><time class="post-meta-date-updated" datetime="2023-03-24T20:45:00.000Z" title="更新于 2023-03-24 20:45:00">2023-03-24</time></span><span class="post-meta-categories"><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%F0%9F%93%95%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0/">📕知识笔记</a></span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="word-count">11.8k</span><i class="far fa-clock fa-fw post-meta-icon"></i><span>58分钟</span></span><span class="post-meta-pv-cv" data-flag-title="React学习笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span></span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><a href="/posts/a1605017/#post-comment"><span id="twikoo-count"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><blockquote><p>我看的是<a target="_blank" rel="noopener" href="https://scrimba.com/learn/learnreact/">React 教学视频 - Scrimba</a>，<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV14y4y1g7M4/">React 零基础入门好客租房项目实战</a></p></blockquote><h1 id="React-入门"><a href="#React-入门" class="headerlink" title="React 入门"></a>React 入门</h1><h2 id="Intro-介绍"><a href="#Intro-介绍" class="headerlink" title="Intro 介绍"></a>Intro 介绍</h2><h3 id="CDN、导包"><a href="#CDN、导包" class="headerlink" title="CDN、导包"></a>CDN、导包</h3><p>CDN：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span></span></span><br><span class="line"><span class="tag">  <span class="attr">crossorigin</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react@17/umd/react.development.js&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span></span></span><br><span class="line"><span class="tag">  <span class="attr">crossorigin</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react-dom@17/umd/react-dom.development.js&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/babel-standalone@6/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>导包，无需使用 CDN：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ol><li><p>Composable 可组合的</p><p>我们有一些小的代码碎片，我们可以把它们拼在一起，组成更大的东西。</p></li><li><p>Declarative 声明的</p><p>声明性意味着我可以告诉计算机要做什么，并期望它处理细节。</p></li></ol><h3 id="渲染"><a href="#渲染" class="headerlink" title="渲染"></a>渲染</h3><p><code>ReactDOM.render(&lt;html代码&gt;,&lt;在哪渲染&gt;)</code></p><p>例如：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Harris<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure><p>或者（React 18 新语法）</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.createRoot(&lt;在哪渲染&gt;).render(</span><br><span class="line">	&lt;代码&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>例如：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom/client&quot;</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.createRoot(<span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>)).render(<span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Harris<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>);</span><br></pre></td></tr></table></figure><p>如果将 &lt;html 代码&gt; 定义到变量里，最外层只能是父节点一个，可以是<code>&lt;div&gt; ... &lt;/div&gt;</code>也可以写成空标签<code>&lt;&gt; ... &lt;/&gt;</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> page = (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;html代码&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="JSX-内部的-JS"><a href="#JSX-内部的-JS" class="headerlink" title="JSX 内部的 JS"></a>JSX 内部的 JS</h3><p>括号() 里写 HTML 代码</p><p>花括号{} 里的代码可以写 JS 语法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function App() &#123;</span><br><span class="line">    const firstName &#x3D; &quot;Harris&quot;</span><br><span class="line">    const lastName &#x3D; &quot;Wong&quot;</span><br><span class="line">    return (</span><br><span class="line">        &lt;h1&gt;Hello &#123;firstName&#125; &#123;lastName&#125;!&lt;&#x2F;h1&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Hello Harris Wong!</span><br></pre></td></tr></table></figure><blockquote><p>Note: 如果想在 HTML 里加入 JS 逻辑代码，可以加上花括号{}，但只能写表达式，不能写赋值等语句。</p></blockquote><h2 id="Component-function"><a href="#Component-function" class="headerlink" title="Component: function"></a>Component: function</h2><h3 id="Custom-Components-自定义组件"><a href="#Custom-Components-自定义组件" class="headerlink" title="Custom Components 自定义组件"></a>Custom Components 自定义组件</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TemporaryName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;html代码&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">TemporaryName</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>))</span><br></pre></td></tr></table></figure><p>更简洁的写法</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TemporaryName = <span class="function">() =&gt;</span> (</span><br><span class="line">  &lt;html代码&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><blockquote><p>Note：组件名要大写</p><blockquote><p><strong>什么是 React 组件？</strong></p><p>返回 React 元素 的函数。（UI）</p></blockquote></blockquote><h3 id="Parent-Child-Components-父子组件"><a href="#Parent-Child-Components-父子组件" class="headerlink" title="Parent/Child Components 父子组件"></a>Parent/Child Components 父子组件</h3><p>形如：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Children</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;html代码&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;Children /&gt;</span><br><span class="line">            &lt;html代码&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Styling-with-Classes-修饰类"><a href="#Styling-with-Classes-修饰类" class="headerlink" title="Styling with Classes 修饰类"></a>Styling with Classes 修饰类</h3><p>类名不再是像 JS 里的 class 了，而是 <strong>className</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 className&#x3D;&quot;name&quot;&gt;Harris&lt;&#x2F;h1&gt;</span><br></pre></td></tr></table></figure><p>把 JSX 里的代码当做 HTML，CSS 代码直接在 .css 文件里写，和往常一样</p><h3 id="Organize-components-整理组件"><a href="#Organize-components-整理组件" class="headerlink" title="Organize components 整理组件"></a>Organize components 整理组件</h3><blockquote><p>除了将代码按功能或者区域拆分成许多代码块还不够，代码量更大的时候，会考虑分离出一个文件出来。那么这时如何创建“组件文件”呢？且如何引用组件呢？</p></blockquote><p>“组件文件”：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Header</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">html代码</span>&gt;</span>)</span></span><br><span class="line"><span class="xml">=======</span></span><br><span class="line"><span class="xml">    return (<span class="tag">&lt;<span class="name">代码</span>&gt;</span>)</span></span><br><span class="line"><span class="xml">&gt;&gt;&gt;&gt;&gt;&gt;&gt; 345954b736d625ffb8d340a541b4888b28ad6077</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">// 或者</span></span><br><span class="line"></span><br><span class="line"><span class="xml">import React from &quot;react&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">function Header() &#123;</span></span><br><span class="line">    return (&lt;html代码&gt;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default Header</span><br></pre></td></tr></table></figure><p>引用组件：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span></span><br><span class="line"><span class="keyword">import</span> Header <span class="keyword">from</span> <span class="string">&quot;./Header&quot;</span> （可以不带上后缀.js）</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Page</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;Header /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Page</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>))</span><br></pre></td></tr></table></figure><h2 id="Props-属性"><a href="#Props-属性" class="headerlink" title="Props 属性"></a>Props 属性</h2><blockquote><p>为了完成组件之间数据的通信，引入了 Props 概念</p></blockquote><p>&quot;Props&quot; refers to the properties being passed into a component in order for it to work correctly, similar to how a function receives parameters: &quot;from above.&quot; A component receiving props is not allowed to modify those props. (l.e. they are &quot;immutable（不可变的）&quot;)</p><p>例如，下面是一个加法器案例：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Addition</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;props.a&#125; + &#123;props.b&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Addition a=<span class="string">&quot;1&quot;</span> b=<span class="string">&quot;2&quot;</span> /&gt;</span><br></pre></td></tr></table></figure><p>可以看到，引用组件的同时，a、b 属性值将被传到 Addition 函数里的 props 参数里，并以对象的方式保存。通过 <code>props.&lt;属性名&gt;</code>可以在函数里调用组件传来的值。</p><blockquote><ol><li><p>组件和函数里的 props 名称可以随意取，但函数里的参数最好还是写 props。</p></li><li><p>img 里的 src 可以像这样调用数据：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&#123;props.img&#125;/&gt;</span><br><span class="line">或类似于</span><br><span class="line">&lt;img src=&#123;<span class="string">`../images/<span class="subst">$&#123;props.img&#125;</span>`</span>&#125; /&gt;</span><br></pre></td></tr></table></figure><p><code>$&#123;&#125;</code>这个符号能使我们在字符串里传入变量</p></li><li><p>原生 HTML 标签的 style 可以这样调用数据：<code>&lt;p style=&#123;&#123;display: props.name ? "block" : "none"&#125;&#125;&gt;&#123;props.name&#125;&lt;/p&gt;</code>。这里注意是 2 个花括号，因为里面包含 JS 里的三元表达式（ternary expression），所以要再加一个花括号，当然了，style 里的值本身就是一个对象，所以需要花括号。</p></li></ol></blockquote><p><strong>Props 的作用</strong>：</p><p>What do props help us accomplish?</p><p>Make a component more reusable.</p><h3 id="另一种-props-取值方式"><a href="#另一种-props-取值方式" class="headerlink" title="另一种 props 取值方式"></a>另一种 props 取值方式</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Contact</span>(<span class="params">&#123;title, content&#125; &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">	<span class="keyword">return</span> (</span></span></span><br><span class="line"><span class="function"><span class="params">    &lt;div&gt;</span></span></span><br><span class="line"><span class="function"><span class="params">      &lt;h1&gt;&#123;title&#125;&lt;/h1&gt;</span></span></span><br><span class="line"><span class="function"><span class="params">      &lt;p&gt;&#123;content&#125;&lt;/p&gt;</span></span></span><br><span class="line"><span class="function"><span class="params">    &lt;/div&gt;</span></span></span><br><span class="line"><span class="function"><span class="params">	)</span></span></span><br><span class="line"><span class="function"><span class="params">&#125;</span></span></span><br></pre></td></tr></table></figure><h3 id="Passing-in-non-string-props-传入非字符串类的-Props"><a href="#Passing-in-non-string-props-传入非字符串类的-Props" class="headerlink" title="Passing in non-string props 传入非字符串类的 Props"></a>Passing in non-string props 传入非字符串类的 Props</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Student</span><br><span class="line">  name=<span class="string">&quot;Harris&quot;</span></span><br><span class="line">  DOB=&#123;<span class="number">2000.08</span>&#125;</span><br><span class="line">  isMale=&#123;<span class="literal">true</span>&#125;</span><br><span class="line">  grade=&#123;&#123; <span class="attr">Chinese</span>: <span class="number">88</span>, <span class="attr">Math</span>: <span class="number">96</span>, <span class="attr">English</span>: <span class="number">98</span> &#125;&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><blockquote><p>由此可见，传入非字符串需要用到花括号 {}</p></blockquote><h3 id="prop-key"><a href="#prop-key" class="headerlink" title="prop: key"></a>prop: key</h3><p>记得组件里得带上一个 key 属性，值一般是 id 之类唯一的值，否则控制台会有一个 warning</p><blockquote><p>推荐使用 nanoid 包，会随机产生一个 id</p></blockquote><h3 id="Pass-object-as-props"><a href="#Pass-object-as-props" class="headerlink" title="Pass object as props"></a>Pass object as props</h3><blockquote><p>这样不需要在调用组件时写太多数据传输的相关代码</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> students = data.map(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Students</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span> <span class="attr">item</span>=<span class="string">&#123;item&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Students</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//用props.item来调用</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Spread-object-as-props-将对象作为-props-展开"><a href="#Spread-object-as-props-将对象作为-props-展开" class="headerlink" title="Spread object as props 将对象作为 props 展开"></a>Spread object as props 将对象作为 props 展开</h3><blockquote><p>这样写代码更简洁</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> students = data.map(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Students</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span> &#123;<span class="attr">...item</span>&#125; /&gt;</span></span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Students</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">	<span class="comment">//还是用props来调用，但相比上一个例子，可少写props后面的“.item”</span></span><br><span class="line">=======</span><br><span class="line">	<span class="comment">//还是用props来调用</span></span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; <span class="number">345954</span>b736d625ffb8d340a541b4888b28ad6077</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>对比一下之前的繁杂写法：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> students = data.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Students</span><br><span class="line">      key=&#123;item.id&#125;</span><br><span class="line">      name=&#123;item.name&#125;</span><br><span class="line">      age=&#123;item.age&#125;</span><br><span class="line">      sex=&#123;item.sex&#125;</span><br><span class="line">      ...</span><br><span class="line">      /&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="props-children"><a href="#props-children" class="headerlink" title="props.children"></a>props.children</h3><p>除了下面这种写法可以传值</p><p><code>&lt;Students name=&quot;Harris&quot;, sex=&quot;Male&quot;&gt;</code></p><p>还有如下方式，可以将 html 代码通过 <code>props.children</code>传入组件里</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Students&gt;</span><br><span class="line">  &lt;h1&gt;Harris&lt;/h1&gt;</span><br><span class="line">  &lt;h1&gt;Male&lt;/h1&gt;</span><br><span class="line">&lt;/Students&gt;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Students</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;props.children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="map"><a href="#map" class="headerlink" title=".map()"></a>.map()</h2><p>一般这里使用<code>.map()</code>是为了批量将数据加工成为可视化代码，例如：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> students = studentData.map(<span class="function">(<span class="params">student</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Student</span> <span class="attr">name</span>=<span class="string">&#123;student.name&#125;</span> <span class="attr">sex</span>=<span class="string">&#123;student.sex&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>小问答</strong>：</p><ol><li><p>What does the <code>.map()</code> array method do?<br>Returns a new array. Whatever gets returned from the callback function provided is placed at the same index in the new array. Usually, we take the items from the original array and modify them in some way.</p></li><li><p>What do we usually use <code>.map()</code> for in React?<br>Convert an array of raw data into an array of JSX elements that can be displayed on the page.</p></li><li><p>Why is using <code>.map()</code> better than just creating the components manually by typing them out?<br>It makes our code more &quot;self-sustaining&quot; - not requiring additional changes whenever the data changes.</p></li></ol><h2 id="Static-Web-Pages-静态-Web-页面"><a href="#Static-Web-Pages-静态-Web-页面" class="headerlink" title="Static Web Pages 静态 Web 页面"></a>Static Web Pages 静态 Web 页面</h2><ul><li><strong>Read-only,</strong> no changes to data</li><li>Examples<ul><li>Blogs</li><li>News sites</li><li>etc.</li></ul></li></ul><h2 id="Dynamic-Web-Apps-动态-Web-应用程序"><a href="#Dynamic-Web-Apps-动态-Web-应用程序" class="headerlink" title="Dynamic Web Apps 动态 Web 应用程序"></a>Dynamic Web Apps 动态 Web 应用程序</h2><ul><li><strong>Read-write</strong>: ability to change data</li><li>Highly interactive</li><li>Displays <strong>your</strong> data</li></ul><h2 id="Event-listeners-事件侦听器"><a href="#Event-listeners-事件侦听器" class="headerlink" title="Event listeners 事件侦听器"></a>Event listeners 事件侦听器</h2><p>An event listener is a procedure in JavaScript that waits for an event to occur. A simple example of an event is a user clicking the mouse or pressing a key on the keyboard.</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;I was clicked!&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;button onClick=&#123;handleClick&#125;&gt;Click me&lt;/button&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>更多：<a target="_blank" rel="noopener" href="https://reactjs.org/docs/events.html#mouse-events">Mouse Events 鼠标事件</a>（95%的事件侦听事件都和 鼠标事件 有关）</p><h2 id="State-状态"><a href="#State-状态" class="headerlink" title="State 状态"></a>State 状态</h2><blockquote><p>我们编码时发现 function 运行后无法更改组件里的变量，这时需引入 state 概念。</p></blockquote><p>&quot;State&quot; refers to values that are managed by the component, similar to variables declared inside a function. Any time you have changing values that should be save/displayed, you&#39;ll likely be using state.</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isMale = React.useState(<span class="string">&quot;Yes&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  &lt;div className=<span class="string">&quot;state&quot;</span>&gt;</span><br><span class="line">    &lt;div className=<span class="string">&quot;state--value&quot;</span>&gt;</span><br><span class="line">      &lt;h1&gt;&#123;isMale[<span class="number">0</span>]&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">);</span><br><span class="line"><span class="comment">// isMale打印后：&#123;&quot;Yes&quot;, f()&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p><code>f()</code>指的是一个 function，通过这个 function 咋们可以改变 state 的值</p></blockquote><p>用 Array destructuring 数组解构这种方式：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [isMale, func] = React.useState(<span class="string">&quot;Yes&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  &lt;div className=<span class="string">&quot;state&quot;</span>&gt;</span><br><span class="line">    &lt;div className=<span class="string">&quot;state--value&quot;</span>&gt;</span><br><span class="line">      &lt;h1&gt;&#123;isMale&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><p><strong>注意</strong>：是<code>[isMale, func]</code>而不是<code>&#123;isMale, func&#125;</code>，中括号[ ]！</p></blockquote><h3 id="Changing-state"><a href="#Changing-state" class="headerlink" title="Changing state"></a>Changing state</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [isMale, setIsMale] = React.useState(<span class="string">&quot;Yes&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  setIsMale(<span class="string">&quot;No&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  &lt;div className=<span class="string">&quot;state&quot;</span>&gt;</span><br><span class="line">    &lt;div className=<span class="string">&quot;state--value&quot;</span> onClick=&#123;handleClick&#125;&gt;</span><br><span class="line">      &lt;h1&gt;&#123;isMale&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="Callback-function-回调函数"><a href="#Callback-function-回调函数" class="headerlink" title="Callback function 回调函数"></a>Callback function 回调函数</h4><blockquote><p>If you ever <u>need the old value of state to help you determine the new value of state</u>, you should pass a callback function to your state setter function instead of using state directly. This callback function will receive the old value of state as its parameter, which you can then use to determine your new value of state.</p><p>言简意赅，你若想更改 state 值，建议采用回调函数</p></blockquote><p>以加法函数为例，采用回调函数：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  setCount(<span class="function">(<span class="params">prevCount</span>) =&gt;</span> prevCount + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Complex-state-arrays-数组"><a href="#Complex-state-arrays-数组" class="headerlink" title="Complex state: arrays 数组"></a>Complex state: arrays 数组</h4><blockquote><p>改数组有些麻烦</p></blockquote><p>以 To-do list 为例，这用到了 ES6 新语法：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [thingsArray, setThingsArray] = React.useState([<span class="string">&quot;Thing 1&quot;</span>, <span class="string">&quot;Thing 2&quot;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addItem</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  setThingsArray(<span class="function">(<span class="params">prevThingsArray</span>) =&gt;</span> [</span><br><span class="line">    ...prevThingsArray,</span><br><span class="line">    <span class="string">`Thing <span class="subst">$&#123;prevThingsArray.length&#125;</span>`</span>,</span><br><span class="line">  ]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Complex-state-objects-对象"><a href="#Complex-state-objects-对象" class="headerlink" title="Complex state: objects 对象"></a>Complex state: objects 对象</h4><p>以学生信息为例：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [stuInfo, setStuInfo] = React.useState(&#123;</span><br><span class="line">  firstName: <span class="string">&quot;Harris&quot;</span>,</span><br><span class="line">  lastName: <span class="string">&quot;Wong&quot;</span>,</span><br><span class="line">  isMale: <span class="literal">true</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleIsMale</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  setContact(<span class="function">(<span class="params">prevStuInfo</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...prevStuInfo,</span><br><span class="line">      isMale: !prevStuInfo.isMale,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//或者，toggleIsMale()还可以这么写：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleIsMale</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  setContact(<span class="function">(<span class="params">prevStuInfo</span>) =&gt;</span> (&#123;</span><br><span class="line">    ...prevStuInfo,</span><br><span class="line">    isMale: !prevStuInfo.isMale,</span><br><span class="line">  &#125;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>先将所有信息传入，再写要更改的属性。</p></blockquote><h3 id="Lazy-State-Initialization"><a href="#Lazy-State-Initialization" class="headerlink" title="Lazy State Initialization"></a>Lazy State Initialization</h3><blockquote><p>有时候 state 的不断改变，会导致整个组件重复被加载，有些代码可能加载一次很费网络资源，而且也不需要加载，这时候需要设置 Lazy State Initialization（惰性状态初始化）</p></blockquote><p>例如：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [state, setState] = React.useState(<span class="function">() =&gt;</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Lazy State Initialization&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><p>也就是设置 callback function。像上面这个例子，控制台输出一次该语句，就不用再重复输出了。</p></blockquote><h2 id="Sharing-data-between-components-组件间共享数据"><a href="#Sharing-data-between-components-组件间共享数据" class="headerlink" title="Sharing data between components 组件间共享数据"></a>Sharing data between components 组件间共享数据</h2><blockquote><p>有时候子组件之间需要互传值怎么办？这时需要 raise state up to parent component.</p><p>在 React 里，数据只能从父组件下传到子组件，所以要想在子组件间共享某一个数值，则需要提前将该数据放在子组件<u>共有且最近的</u>父组件里。</p></blockquote><h2 id="Dynamic-styles-动态样式"><a href="#Dynamic-styles-动态样式" class="headerlink" title="Dynamic styles 动态样式"></a>Dynamic styles 动态样式</h2><blockquote><p>有时候一个组件或者元素的样式需要动态变化，那么需要做判断以决定用什么样式</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> styles = &#123;</span><br><span class="line">  backgroundColor: props.darkMode ? <span class="string">&quot;#222222&quot;</span> : <span class="string">&quot;#cccccc&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> squareElements = squares.map(<span class="function">(<span class="params">square</span>) =&gt;</span> (</span><br><span class="line">  &lt;div style=&#123;styles&#125; className=<span class="string">&quot;box&quot;</span> key=&#123;square.id&#125;&gt;&lt;/div&gt;</span><br><span class="line">));</span><br></pre></td></tr></table></figure><blockquote><p>这里要强调的是 style 里的属性不再是 CSS 里的那种，要写成驼峰式命名法 camel case</p></blockquote><h2 id="Conditional-rendering-条件渲染"><a href="#Conditional-rendering-条件渲染" class="headerlink" title="Conditional rendering 条件渲染"></a>Conditional rendering 条件渲染</h2><blockquote><p>顾名思义，就是满足特定条件了，才能渲染指定内容</p></blockquote><h3 id="amp-amp-logical-and-operator-逻辑与运算符"><a href="#amp-amp-logical-and-operator-逻辑与运算符" class="headerlink" title="&amp;&amp; logical and operator 逻辑与运算符"></a>&amp;&amp; logical and operator 逻辑与运算符</h3><blockquote><p>When you want to either display something or NOT display it</p></blockquote><p>以显示句子为例：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleShown</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  setIsShown(<span class="function">(<span class="params">prevShown</span>) =&gt;</span> !prevShown);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;isShown &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;props.sentence&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#125;</span><br><span class="line">    &lt;button onClick=&#123;toggleShown&#125;&gt;Show Sentence&lt;/button&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="ternary-expression-三元表达式"><a href="#ternary-expression-三元表达式" class="headerlink" title="ternary expression 三元表达式"></a>ternary expression 三元表达式</h3><blockquote><p>When you need to decide which thing among 2 options to display</p></blockquote><p>例子同上：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;toggleShown&#125;&gt;&#123;isShown ? <span class="string">&quot;Hide&quot;</span> : <span class="string">&quot;Show&quot;</span>&#125; Sentence&lt;/button&gt;</span><br></pre></td></tr></table></figure><h3 id="if-else"><a href="#if-else" class="headerlink" title="if else"></a>if else</h3><blockquote><p>When you need to decide between &gt; 2 options on what to display</p><p>记住 return() 里的 {} 不能写 if else 语句，得在外边写</p></blockquote><h2 id="Form-表单"><a href="#Form-表单" class="headerlink" title="Form 表单"></a>Form 表单</h2><h3 id="onChange"><a href="#onChange" class="headerlink" title="onChange"></a>onChange</h3><blockquote><p>onChange：一个改变 value 就会触发的方法（表单常用）</p></blockquote><p>以表单输入学生信息为例：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleChange</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Changed!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  &lt;form&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;First Name&quot;</span> onChange=&#123;handleChange&#125; /&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="event"><a href="#event" class="headerlink" title="event"></a>event</h3><blockquote><p>表单元素里方法被触发后，可以通过接受 event 参数 来获得表单里的值</p></blockquote><p>例子同上：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleChange</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(event.target.value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>event.target</code>里面除了 value 之外，还有其它常用属性：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleChange</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 我们可以像下面这样接收</span></span><br><span class="line">  <span class="keyword">const</span> &#123; name, value, type, checked &#125; = event.target;</span><br><span class="line">  setFormData(<span class="function">(<span class="params">prevFormData</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...prevFormData,</span><br><span class="line">      [name]: value,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="state-object"><a href="#state-object" class="headerlink" title="state object"></a>state object</h3><blockquote><p>有时候表单元素很多，一个一个写 handleChange 比较麻烦，这时候需要 object 来统一存储表单里的值</p></blockquote><p>例子同上：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [formData, setFormData] = React.useState(&#123; <span class="attr">firstName</span>: <span class="string">&quot;&quot;</span>, <span class="attr">lastName</span>: <span class="string">&quot;&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleChange</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; name, value &#125; = event.target;</span><br><span class="line">  setFormData(<span class="function">(<span class="params">prevFormData</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...prevFormData,</span><br><span class="line">      [name]: value,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  &lt;form&gt;</span><br><span class="line">    &lt;input</span><br><span class="line">      type=<span class="string">&quot;text&quot;</span></span><br><span class="line">      placeholder=<span class="string">&quot;First Name&quot;</span></span><br><span class="line">      onChange=&#123;handleChange&#125;</span><br><span class="line">      name=<span class="string">&quot;firstName&quot;</span></span><br><span class="line">      value=&#123;formData.firstName&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;input</span><br><span class="line">      type=<span class="string">&quot;text&quot;</span></span><br><span class="line">      placeholder=<span class="string">&quot;Last Name&quot;</span></span><br><span class="line">      onChange=&#123;handleChange&#125;</span><br><span class="line">      name=<span class="string">&quot;lastName&quot;</span></span><br><span class="line">      value=&#123;formData.lastName&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="Application-Checkbox"><a href="#Application-Checkbox" class="headerlink" title="Application: Checkbox"></a>Application: Checkbox</h3><p>例子同上：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleChange</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;name, value, type, checked&#125; = event.target</span><br><span class="line">  setFormData(<span class="function"><span class="params">prevFormData</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...prevFormData,</span><br><span class="line">      [name]: type === <span class="string">&quot;checkbox&quot;</span> ? checked : value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;input</span><br><span class="line">  type=<span class="string">&quot;checkbox&quot;</span></span><br><span class="line">  id=<span class="string">&quot;isMale&quot;</span></span><br><span class="line">  checked=&#123;formData.isMale&#125;</span><br><span class="line">  onChange=&#123;handleChange&#125;</span><br><span class="line">  name=<span class="string">&quot;isMale&quot;</span></span><br><span class="line">  /&gt;</span><br><span class="line">&lt;label htmlFor=<span class="string">&quot;isMale&quot;</span>&gt;Are you male?&lt;/label&gt;</span><br></pre></td></tr></table></figure><blockquote><p>其中设置 id 是为了 htmlFor 能够定向到，即点击文字也可以选中按钮</p></blockquote><h3 id="Application-Radio-buttons"><a href="#Application-Radio-buttons" class="headerlink" title="Application: Radio buttons"></a>Application: Radio buttons</h3><p>例子同上：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleChange</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; name, value, type, checked &#125; = event.target;</span><br><span class="line">  setFormData(<span class="function">(<span class="params">prevFormData</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...prevFormData,</span><br><span class="line">      [name]: value,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;fieldset&gt;</span><br><span class="line">  &lt;legend&gt;Current employment status&lt;/legend&gt;</span><br><span class="line"></span><br><span class="line">  &lt;input</span><br><span class="line">    type=<span class="string">&quot;radio&quot;</span></span><br><span class="line">    id=<span class="string">&quot;unemployed&quot;</span></span><br><span class="line">    name=<span class="string">&quot;employment&quot;</span></span><br><span class="line">    value=<span class="string">&quot;unemployed&quot;</span></span><br><span class="line">    checked=&#123;formData.employment === <span class="string">&quot;unemployed&quot;</span>&#125;</span><br><span class="line">    onChange=&#123;handleChange&#125;</span><br><span class="line">  /&gt;</span><br><span class="line">  &lt;label htmlFor=<span class="string">&quot;unemployed&quot;</span>&gt;Unemployed&lt;/label&gt;</span><br><span class="line"></span><br><span class="line">  &lt;input</span><br><span class="line">    type=<span class="string">&quot;radio&quot;</span></span><br><span class="line">    id=<span class="string">&quot;employed&quot;</span></span><br><span class="line">    name=<span class="string">&quot;employment&quot;</span></span><br><span class="line">    value=<span class="string">&quot;employed&quot;</span></span><br><span class="line">    checked=&#123;formData.employment === <span class="string">&quot;employed&quot;</span>&#125;</span><br><span class="line">    onChange=&#123;handleChange&#125;</span><br><span class="line">  /&gt;</span><br><span class="line">  &lt;label htmlFor=<span class="string">&quot;employed&quot;</span>&gt;Employed&lt;/label&gt;</span><br><span class="line">&lt;/fieldset&gt;;</span><br></pre></td></tr></table></figure><h3 id="Application-Select-amp-Option"><a href="#Application-Select-amp-Option" class="headerlink" title="Application: Select &amp; Option"></a>Application: Select &amp; Option</h3><p>例子同上：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;label htmlFor=<span class="string">&quot;favColor&quot;</span>&gt;What is your favorite subject?&lt;/label&gt;</span><br><span class="line">&lt;select</span><br><span class="line">  id=<span class="string">&quot;favSubject&quot;</span></span><br><span class="line">  value=&#123;formData.favSubject&#125;</span><br><span class="line">  onChange=&#123;handleChange&#125;</span><br><span class="line">  name=<span class="string">&quot;favSubject&quot;</span></span><br><span class="line">  &gt;</span><br><span class="line">  &lt;option value=<span class="string">&quot;&quot;</span>&gt;-- Choose --&lt;/option&gt;</span><br><span class="line">  &lt;option value=<span class="string">&quot;chinese&quot;</span>&gt;Chinese&lt;/option&gt;</span><br><span class="line">  &lt;option value=<span class="string">&quot;english&quot;</span>&gt;English&lt;/option&gt;</span><br><span class="line">  &lt;option value=<span class="string">&quot;math&quot;</span>&gt;<span class="built_in">Math</span>&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><h3 id="Application-Submitting-the-form"><a href="#Application-Submitting-the-form" class="headerlink" title="Application: Submitting the form"></a>Application: Submitting the form</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleSubmit</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  event.preventDefault();</span><br><span class="line">  <span class="built_in">console</span>.log(formData);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  &lt;form onSubmit=&#123;handleSubmit&#125;&gt;</span><br><span class="line">    [html代码]</span><br><span class="line">    &lt;button&gt;Sumbit&lt;/button&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><ol><li><code>&lt;button&gt;</code>默认是<code>type=&quot;submit&quot;</code>，故这里可省略。</li><li><code>event.preventDefault()</code> 作用是阻止页面刷新，这样我们就可以正常运行<code>handleSubmit</code>方法。你可以理解成这是提交表单信息时必写的句子。</li></ol></blockquote><h2 id="Side-effects-副作用"><a href="#Side-effects-副作用" class="headerlink" title="Side effects 副作用"></a>Side effects 副作用</h2><h3 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect()"></a>useEffect()</h3><blockquote><p>有时候我们希望一些方法在组件渲染后运行，这时可以将代码写进 <code>useEffect()</code> 里，这样可以消除无限循环调用的副作用。比如请求数据等。</p></blockquote><p><code>React.useEffect(func, [param1, parma2...])</code>有两个参数：</p><p><code>func</code> 是必填参数（方法），<code>params</code> 是可选参数（依赖，数组形式）</p><p>例如，当 <code>count</code> 的值变化了，则运行方法里的代码：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">React.useEffect(</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Effect ran&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  [count]</span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><p><strong>Note</strong>：</p><ol><li><p>如果依赖里留空，则在组件第一次加载完毕后运行一次，之后不再运行。</p><p>适合写 setInterval、请求数据等：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> intervalId = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    setCount(<span class="function"><span class="params">prevCount</span> =&gt;</span> prevCount + <span class="number">1</span>)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(intervalId)</span><br><span class="line">&#125;, [])</span><br></pre></td></tr></table></figure></li><li><p>在某些情况下，我们可能需要在组件卸载时<u>清除副作用</u>，这时可以在 <code>useEffect</code> 中 return 一个函数，这个函数会在组件卸载时执行，用于清除在 <code>useEffect</code> 中设置的副作用，比如取消请求或取消订阅事件等。上例就能说明。</p></li><li><p><code>useEffect</code> 可以在一个组件里写多个。</p></li></ol></blockquote><h3 id="Using-an-async-function-inside-useEffect-Clone"><a href="#Using-an-async-function-inside-useEffect-Clone" class="headerlink" title="Using an async function inside useEffect (Clone)"></a>Using an async function inside useEffect (Clone)</h3><p>useEffect takes a function as its parameter. If that function returns something, it needs to be a cleanup function. Otherwise, it should return nothing. If we make it an async function, it automatically retuns a promise instead of a function or nothing. Therefore, if you want to use async operations inside of useEffect, you need to define the function separately inside of the callback function, as seen below:</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">React.useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getMemes</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> fetch(<span class="string">&quot;https://api.imgflip.com/get_memes&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> res.json();</span><br><span class="line">    setAllMemes(data.data.memes);</span><br><span class="line">  &#125;</span><br><span class="line">  getMemes();</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><h2 id="Component-Class"><a href="#Component-Class" class="headerlink" title="Component: Class"></a>Component: Class</h2><blockquote><p>这是比较过时的概念，Bob Ziroll 希望我们也学习了解一下</p></blockquote><p>index.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&quot;./App&quot;</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> <span class="attr">type</span>=<span class="string">&quot;Class&quot;</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure><p>App.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// export default function App(props) &#123;</span></span><br><span class="line"><span class="comment">//     return (</span></span><br><span class="line"><span class="comment">//         &lt;h1&gt;&#123;props.type&#125; component&lt;/h1&gt;</span></span><br><span class="line"><span class="comment">//     )</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;this.props.type&#125; component<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>与 Function 组件 不同点是它多了一个<code>this.</code>，并且无需声明 props 参数 就可以直接通过<code>this.props</code>调用</p></blockquote><h3 id="State"><a href="#State" class="headerlink" title="State"></a>State</h3><p>看以下两种的区别</p><p>Function:</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [goOut, setGoOut] = React.useState(<span class="string">&quot;Yes&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">toggleGoOut</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setGoOut(<span class="function">(<span class="params">prevState</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> prevState === <span class="string">&quot;Yes&quot;</span> ? <span class="string">&quot;No&quot;</span> : <span class="string">&quot;Yes&quot;</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;state&quot;</span>&gt;</span><br><span class="line">      &lt;h1 className=<span class="string">&quot;state--title&quot;</span>&gt;Should I go out tonight?&lt;/h1&gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;state--value&quot;</span> onClick=&#123;toggleGoOut&#125;&gt;</span><br><span class="line">        &lt;h1&gt;&#123;goOut&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Class:</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * A class component with state will ALWAYS save state in a class</span></span><br><span class="line"><span class="comment">   * instance variable called `state`, which will always be an object.</span></span><br><span class="line"><span class="comment">   * The individual values you save in state will be properties on</span></span><br><span class="line"><span class="comment">   * the `state` object.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * The simplest (and more modern) way to delcare new state in a</span></span><br><span class="line"><span class="comment">   * class component is to just use a &quot;class field&quot; declaring state</span></span><br><span class="line"><span class="comment">   * as an object, like you see below.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * Then, throughout the rest of the component (e.g. inside the render</span></span><br><span class="line"><span class="comment">   * method) you can access that state with `this.state.&lt;yourPropertyHere&gt;`</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  state = &#123;</span><br><span class="line">    goOut: <span class="string">&quot;Yes&quot;</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Any class methods you create that need to call the `this.setState`</span></span><br><span class="line"><span class="comment">   * method (which is available to our component because we&#x27;re extending</span></span><br><span class="line"><span class="comment">   * React.Component) should be declared as an arrow function, for</span></span><br><span class="line"><span class="comment">   * reasons we will discuss soon. (Note: other class methods you</span></span><br><span class="line"><span class="comment">   * want to make that DON&#x27;T use `this.setState` don&#x27;t necessarily</span></span><br><span class="line"><span class="comment">   * need to be declared as arrow function to work correctly)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  toggleGoOut = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(<span class="function">(<span class="params">prevState</span>) =&gt;</span> (&#123;</span><br><span class="line">      goOut: prevState.goOut === <span class="string">&quot;Yes&quot;</span> ? <span class="string">&quot;No&quot;</span> : <span class="string">&quot;Yes&quot;</span>,</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">&quot;state&quot;</span>&gt;</span><br><span class="line">        &lt;h1 className=<span class="string">&quot;state--title&quot;</span>&gt;Should I go out tonight?&lt;/h1&gt;</span><br><span class="line">        &lt;div className=<span class="string">&quot;state--value&quot;</span> onClick=&#123;<span class="built_in">this</span>.toggleGoOut&#125;&gt;</span><br><span class="line">          &lt;h1&gt;&#123;<span class="built_in">this</span>.state.goOut&#125;&lt;/h1&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Constructor-method"><a href="#Constructor-method" class="headerlink" title="Constructor method"></a>Constructor method</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * If you can&#x27;t use class fields in your class components</span></span><br><span class="line"><span class="comment">   * for some reason, then you&#x27;ll need to make use of the</span></span><br><span class="line"><span class="comment">   * class&#x27; `constructor` method to initialize your state object.</span></span><br><span class="line"><span class="comment">   * The first line of the constructor method should be a call</span></span><br><span class="line"><span class="comment">   * to `super()` like you see below, and then you can add your</span></span><br><span class="line"><span class="comment">   * state variable as a property attached to `this`</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      goOut: <span class="string">&quot;Yes&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">this</span>.toggleGoOut = <span class="built_in">this</span>.toggleGoOut.bind(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * If you can&#x27;t use arrow functions for your class methods,</span></span><br><span class="line"><span class="comment">   * you&#x27;ll need to make sure to `bind` them inside the</span></span><br><span class="line"><span class="comment">   * constructor above.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">toggleGoOut</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(<span class="function">(<span class="params">prevState</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        goOut: prevState.goOut === <span class="string">&quot;Yes&quot;</span> ? <span class="string">&quot;No&quot;</span> : <span class="string">&quot;Yes&quot;</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">&quot;state&quot;</span>&gt;</span><br><span class="line">        &lt;h1 className=<span class="string">&quot;state--title&quot;</span>&gt;Should I go out tonight?&lt;/h1&gt;</span><br><span class="line">        &lt;div className=<span class="string">&quot;state--value&quot;</span> onClick=&#123;<span class="built_in">this</span>.toggleGoOut&#125;&gt;</span><br><span class="line">          &lt;h1&gt;&#123;<span class="built_in">this</span>.state.goOut&#125;&lt;/h1&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Lifecycle-methods-componentDidMount"><a href="#Lifecycle-methods-componentDidMount" class="headerlink" title="Lifecycle methods: componentDidMount()"></a>Lifecycle methods: componentDidMount()</h3><p>当组件挂载后再运行的 function</p><h3 id="Lifecycle-methods-componentDidUpdate"><a href="#Lifecycle-methods-componentDidUpdate" class="headerlink" title="Lifecycle methods: componentDidUpdate()"></a>Lifecycle methods: componentDidUpdate()</h3><p>当组件更新后再运行的 function</p><p>为了防止循环调用：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">componentDidUpdate</span>(<span class="params">prevProps, prevState</span>)</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">if</span>(<span class="params">prevState.data !== <span class="built_in">this</span>.state.data</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.getData(<span class="built_in">this</span>.state.data)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>当目前的数据和之前的不一样时，以此表明数据更新了，于是再来调用 function，否则会循环调用。</p></blockquote><h3 id="Lifecycle-methods-componentWillUnmount"><a href="#Lifecycle-methods-componentWillUnmount" class="headerlink" title="Lifecycle methods: componentWillUnmount()"></a>Lifecycle methods: componentWillUnmount()</h3><p>在组件即将卸载前运行的 function</p><p>例如，在组建卸载时去除事件监听器（解绑事件）：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;mousemove&#x27;</span>, <span class="built_in">this</span>.handleMouseMove)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Lifecycle-methods-shouldComponentUpdate"><a href="#Lifecycle-methods-shouldComponentUpdate" class="headerlink" title="Lifecycle methods: shouldComponentUpdate()"></a>Lifecycle methods: shouldComponentUpdate()</h3><blockquote><p>父组件更新会引起子组件的更新，有时子组件不需要更新，那么可以使用该钩子函数 shouldComponentUpdate(nextProps, nextState)</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hello</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">shouldComponentUpdate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//根据条件，决定是否重新渲染组件</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h1 id="React-进阶"><a href="#React-进阶" class="headerlink" title="React 进阶"></a>React 进阶</h1><blockquote><p>课程里最新 API：<a target="_blank" rel="noopener" href="https://swapi.dev/api/people/1/">https://swapi.dev/api/people/1/</a></p></blockquote><h2 id="lt-React-Fragment-gt"><a href="#lt-React-Fragment-gt" class="headerlink" title="&lt;React.Fragment&gt;"></a>&lt;React.Fragment&gt;</h2><p>它是一个虚拟容器，用来包含其它元素，而不会在渲染中对实际的 DOM 元素产生任何影响。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyComponent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;React.Fragment&gt;</span><br><span class="line">      &lt;h1&gt;My Title&lt;/h1&gt;</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;Item <span class="number">1</span>&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;Item <span class="number">2</span>&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;Item <span class="number">3</span>&lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">    &lt;/React.Fragment&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>React 16.2 及更高版本中引入了简写语法，允许使用空标签 <code>&lt;&gt;&lt;/&gt;</code> 来表示 Fragment，而不是使用完整的语法 <code>&lt;React.Fragment&gt;&lt;/React.Fragment&gt;</code></p><h2 id="Props"><a href="#Props" class="headerlink" title="Props"></a>Props</h2><h3 id="Default-Props"><a href="#Default-Props" class="headerlink" title="Default Props"></a>Default Props</h3><blockquote><p>有时组件没有传入 props，这时需要写默认值</p></blockquote><p>方法 1，定义<code>&lt;Conponent&gt;.defaultProps</code>：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Card</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> styles = &#123;</span><br><span class="line">    backgroundColor: props.cardColor,</span><br><span class="line">    height: props.height,</span><br><span class="line">    width: props.width,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;styles&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Card.defaultProps = &#123;</span><br><span class="line">  cardColor: <span class="string">&quot;blue&quot;</span>,</span><br><span class="line">  height: <span class="number">100</span>,</span><br><span class="line">  width: <span class="number">100</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>方法 2：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Card</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> styles = &#123;</span><br><span class="line">    backgroundColor: props.cardColor || <span class="string">&quot;black&quot;</span>,</span><br><span class="line">    height: props.height || <span class="number">100</span>,</span><br><span class="line">    width: props.width || <span class="number">100</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;styles&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Prop-Types"><a href="#Prop-Types" class="headerlink" title="Prop Types"></a><a target="_blank" rel="noopener" href="https://reactjs.org/docs/typechecking-with-proptypes.html#proptypes">Prop Types</a></h3><blockquote><p>有时 prop 值需要类型来限制/定义一下，防止组件传了错误类型的值。</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">&quot;prop-types&quot;</span></span><br><span class="line"></span><br><span class="line">Card.propTypes = &#123;</span><br><span class="line">  cardColor: PropTypes.string.isRequired</span><br><span class="line">  height: PropTypes.number</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Render-Props"><a href="#Render-Props" class="headerlink" title="Render Props"></a>Render Props</h3><blockquote><p>它是通过将渲染函数作为组件的 props 传递的方式。它允许一个组件将其 UI 渲染代码传递给另一个组件，以便在其上进行操作。</p></blockquote><p>例如，假设有一个需要显示当前鼠标位置的组件，它可以使用 render props 将鼠标位置信息传递到 UI 上：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MouseTracker = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [position, setPosition] = React.useState(&#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleMouseMove = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    setPosition(&#123;</span><br><span class="line">      x: event.clientX,</span><br><span class="line">      y: event.clientY,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onMouseMove</span>=<span class="string">&#123;handleMouseMove&#125;</span>&gt;</span>&#123;props.render(position)&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;Move the mouse around!&lt;/h1&gt;</span><br><span class="line">      &lt;MouseTracker</span><br><span class="line">        render=&#123;<span class="function">(<span class="params">&#123; x, y &#125;</span>) =&gt;</span> (</span><br><span class="line">          &lt;p&gt;</span><br><span class="line">            The mouse position is (&#123;x&#125;, &#123;y&#125;)</span><br><span class="line">          &lt;/p&gt;</span><br><span class="line">        )&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="Higher-Order-Components-HOCs-高阶组件"><a href="#Higher-Order-Components-HOCs-高阶组件" class="headerlink" title="Higher Order Components (HOCs) 高阶组件"></a>Higher Order Components (HOCs) 高阶组件</h2><blockquote><p>可以让您重用组件的逻辑，并对组件进行自定义扩展。</p></blockquote><p>比如给组件提供横向滚动的功能：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> withHorizontalScroll = <span class="function">(<span class="params">WrappedComponent</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div style=&#123;&#123; <span class="attr">overflowX</span>: <span class="string">&quot;scroll&quot;</span> &#125;&#125;&gt;</span><br><span class="line">        &lt;WrappedComponent &#123;...props&#125; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用 HOC 包装组件，下方List是一个组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withHorizontalScroll(List);</span><br></pre></td></tr></table></figure><h2 id="Performance-Optimization"><a href="#Performance-Optimization" class="headerlink" title="Performance Optimization"></a>Performance Optimization</h2><h3 id="React-PureComponent"><a href="#React-PureComponent" class="headerlink" title="React.PureComponent"></a>React.PureComponent</h3><blockquote><p>有时候父组件发生了状态或值的更改，其所有后代组件都会被迫渲染一次，很费时，将原来的<code>Component</code>换成<code>React.PureComponent</code>即可解决问题。</p><p><code>React.PureComponent</code>只用于 Class 组件。</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;PureComponent&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">PureComponent</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;[ ]   [ ]   [🧒🏻]   [ ] rendered&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;p&gt;I<span class="string">&#x27;m a Child Component&lt;/p&gt;</span></span><br><span class="line"><span class="string">                &lt;GrandChild /&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        )</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="React-memo"><a href="#React-memo" class="headerlink" title="React.memo()"></a>React.memo()</h3><blockquote><p>可用于 Function 组件，类似于高阶组件的用法。</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GrandParent</span>(<span class="params"></span>) </span>&#123;    </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;[👴🏼]   [ ]   [ ]   [ ] rendered&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;p&gt;I<span class="string">&#x27;m a GrandParent Component&lt;/p&gt;</span></span><br><span class="line"><span class="string">            &lt;Parent /&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">export default React.memo(GrandParent)</span></span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> React.memo(<span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;[ ]   [👩]   [ ]   [ ] rendered&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;p&gt;I<span class="string">&#x27;m a Parent Component&lt;/p&gt;</span></span><br><span class="line"><span class="string">            &lt;Child /&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">&#125;)</span></span><br></pre></td></tr></table></figure><h2 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h2><blockquote><p>Context 提供了一种通过组件树传递数据的方法，而无需在每个级别手动传递 props。</p></blockquote><h3 id="Context-Provider"><a href="#Context-Provider" class="headerlink" title="Context Provider"></a>Context Provider</h3><blockquote><p>Context Provider 相当于上下文的提供者，提供给组件使用共享的数据。它通常写在最低共同父组件的层级，这样既能方便相应组件访问 Context，也能准确控制 Context 数据被使用范围。</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ThemeContext = React.createContext()</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">    &lt;ThemeContext.Provider &gt;</span><br><span class="line">        &lt;App /&gt;</span><br><span class="line">    &lt;/ThemeContext.Provider&gt;, </span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="contextType"><a href="#contextType" class="headerlink" title="contextType"></a>contextType</h3><blockquote><p>contextType 更像是组件接收 context 的容器，通过<code>this.context</code>来取值，但只有 Class 组件可以用。</p></blockquote><p>下例是切换深浅模式功能：</p><p><code>Button.js</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ThemeContext <span class="keyword">from</span> <span class="string">&quot;./themeContext&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Button</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">//写法1，仅下面1行</span></span><br><span class="line">	<span class="keyword">static</span> contextType = ThemeContext</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// console.log(this.context)</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;button className=&#123;<span class="built_in">this</span>.context == <span class="string">&#x27;light&#x27;</span> ? <span class="string">&#x27;light-theme&#x27;</span> : <span class="string">&#x27;dark-theme&#x27;</span>&#125;&gt;Switch Theme&lt;/button&gt;</span><br><span class="line">    )    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//写法2</span></span><br><span class="line"><span class="comment">//Button.contextType = ThemeContext</span></span><br></pre></td></tr></table></figure><p><code>index.js</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ThemeContext <span class="keyword">from</span> <span class="string">&quot;./themeContext&quot;</span></span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">    &lt;ThemeContext.Provider value=&#123;<span class="string">&quot;dark&quot;</span>&#125;&gt;</span><br><span class="line">        &lt;App /&gt;</span><br><span class="line">    &lt;/ThemeContext.Provider&gt;, </span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="Context-Consumer"><a href="#Context-Consumer" class="headerlink" title="Context Consumer"></a>Context Consumer</h3><blockquote><p>它更像是给 Function 组件使用的。</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ThemeContext <span class="keyword">from</span> <span class="string">&quot;./themeContext&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Button</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;ThemeContext.Consumer&gt;</span><br><span class="line">            &#123;<span class="function"><span class="params">theme</span> =&gt;</span> (</span><br><span class="line">                &lt;button className=&#123;<span class="string">`<span class="subst">$&#123;theme&#125;</span>-theme`</span>&#125;&gt;Switch Theme&lt;/button&gt;</span><br><span class="line">            )&#125;</span><br><span class="line">        &lt;/ThemeContext.Consumer&gt;</span><br><span class="line">    )    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Move-Context-Provider-to-its-own-component"><a href="#Move-Context-Provider-to-its-own-component" class="headerlink" title="Move Context Provider to its own component"></a>Move Context Provider to its own component</h3><blockquote><p>把上下文提供者写成组件更好，代码细节应该封装到一个组件里，也方便写 State。</p></blockquote><p>ThemeContext.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">const</span> &#123;Provider, Consumer&#125; = React.createContext()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ThemeContextProvider = <span class="function">(<span class="params">props</span>) =&gt;</span>  &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">      &lt;Provider value=&#123;<span class="string">&quot;light&quot;</span>&#125;&gt;</span><br><span class="line">          &#123;props.children&#125;</span><br><span class="line">      &lt;/Provider&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;ThemeContextProvider, Consumer <span class="keyword">as</span> ThemeContextConsumer&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Note：<code>value=&#123;&quot;light&quot;&#125;</code> 记得写上花括号 {}，因为这只接收 object 形式</p></blockquote><p>index.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&quot;./App&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123;ThemeContextProvider&#125; <span class="keyword">from</span> <span class="string">&quot;./themeContext&quot;</span></span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">    &lt;ThemeContextProvider&gt;</span><br><span class="line">        &lt;App /&gt;</span><br><span class="line">    &lt;/ThemeContextProvider&gt;, </span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>Button.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123;ThemeContextConsumer&#125; <span class="keyword">from</span> <span class="string">&quot;./themeContext&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Button</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;ThemeContextConsumer&gt;</span><br><span class="line">            &#123;<span class="function"><span class="params">theme</span> =&gt;</span> (</span><br><span class="line">                &lt;button className=&#123;<span class="string">`<span class="subst">$&#123;theme&#125;</span>-theme`</span>&#125;&gt;Switch Theme&lt;/button&gt;</span><br><span class="line">            )&#125;</span><br><span class="line">        &lt;/ThemeContextConsumer&gt;</span><br><span class="line">    )    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Button</span><br></pre></td></tr></table></figure><h3 id="Changing-Context"><a href="#Changing-Context" class="headerlink" title="Changing Context"></a>Changing Context</h3><blockquote><p>获取上下文的值后，经常还需要更改它。</p></blockquote><p>ThemeContext.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">const</span> &#123;Provider, Consumer&#125; = React.createContext()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThemeContextProvider</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        theme: <span class="string">&quot;dark&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    toggleTheme = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                theme: prevState.theme === <span class="string">&quot;light&quot;</span> ? <span class="string">&quot;dark&quot;</span> : <span class="string">&quot;light&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;Provider value=&#123;&#123;<span class="attr">theme</span>: <span class="built_in">this</span>.state.theme, <span class="attr">toggleTheme</span>: <span class="built_in">this</span>.toggleTheme&#125;&#125;&gt;</span><br><span class="line">                &#123;<span class="built_in">this</span>.props.children&#125;</span><br><span class="line">            &lt;/Provider&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;ThemeContextProvider, Consumer <span class="keyword">as</span> ThemeContextConsumer&#125;</span><br></pre></td></tr></table></figure><blockquote><p>注意：<code>&lt;Provider&gt;</code>组件的 props 只能是 <strong>value</strong>，如果要传入多个变量，得写成 <strong>Object</strong> 形式。</p></blockquote><p>Button.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123;ThemeContextConsumer&#125; <span class="keyword">from</span> <span class="string">&quot;./themeContext&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Button</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;ThemeContextConsumer&gt;</span><br><span class="line">            &#123;<span class="function"><span class="params">context</span> =&gt;</span> (</span><br><span class="line">                &lt;button onClick=&#123;context.toggleTheme&#125; className=&#123;<span class="string">`<span class="subst">$&#123;context.theme&#125;</span>-theme`</span>&#125;&gt;Switch Theme&lt;/button&gt;</span><br><span class="line">            )&#125;</span><br><span class="line">        &lt;/ThemeContextConsumer&gt;</span><br><span class="line">    )    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Button</span><br></pre></td></tr></table></figure><h2 id="Hooks⭐️"><a href="#Hooks⭐️" class="headerlink" title="Hooks⭐️"></a>Hooks⭐️</h2><blockquote><p>React 内置的 Hooks 包括 <code>useState</code>, <code>useEffect</code>, <code>useContext</code>, <code>useRef</code>, <code>useReducer</code>（常用）</p><p><code>useMemo</code>, <code>useCallback</code>, <code>useImperativeHandle</code>, <code>useLayoutEffect</code>, <code>useDebugValue</code>.</p><p>你也可以自定义 Hooks。</p></blockquote><h3 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a>useRef</h3><blockquote><p><code>useRef</code>的主要的功能就是帮助我们获取到DOM元素或者组件实例，它还可以保存在组件生命周期内不会变化的值。</p><p>有时候希望点了按钮后，聚焦仍在输入框里，这时可以用 <code>useRef</code>。</p></blockquote><p>下例是一个 Todo list，我只保留了与 useRef 相关代码，看看如何使用就好：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> inputRef = useRef(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addTodo</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  event.preventDefault()</span><br><span class="line">  setTodosList(<span class="function"><span class="params">prevTodosList</span> =&gt;</span> [...prevTodosList, newTodoValue])</span><br><span class="line">  setNewTodoValue(<span class="string">&quot;&quot;</span>)</span><br><span class="line">  inputRef.current.focus()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;form&gt;</span><br><span class="line">      &lt;input ref=&#123;inputRef&#125; type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;todo&quot;</span> value=&#123;newTodoValue&#125; onChange=&#123;handleChange&#125;/&gt;</span><br><span class="line">      &lt;button onClick=&#123;addTodo&#125;&gt;Add todo item&lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><blockquote><p><code>ref=&#123;inputRef&#125;</code>意思是 inputRef 变量指向该 input 输入框</p><p><code>inputRef.current.focus()</code> 意思是聚焦于该变量指向的输入框（直接敲键盘可以输入，无需鼠标点击）</p></blockquote><h3 id="useReducer"><a href="#useReducer" class="headerlink" title="useReducer"></a>useReducer</h3><blockquote><p>If you wanna use <code>useState()</code> hook to manage a non-trivial（重要的）state like a list of items, where you need to add, update and remove items in the state. You end up facing a situation where state management logic takes a good part of the component body. To help you separate the concerns (rendering and state management) React provides the <code>useReducer()</code> hook. （跟 Redux 里的 Reducer 真的很像耶）</p></blockquote><p><strong>Syntax</strong>: <code>const [state, dispatch] = useReducer(reducer, initialState);</code></p><h4 id="initialState"><a href="#initialState" class="headerlink" title="initialState"></a>initialState</h4><p>In the case of a counter state, the initial value could be like:</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initialState = &#123;</span><br><span class="line">  counter: <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>Note</strong>: the <code>initialState</code> can be a simple value but generally will contain an <u>object</u>.</p></blockquote><h4 id="reducer"><a href="#reducer" class="headerlink" title="reducer"></a>reducer</h4><p>The <code>reducer</code> function contains your custom state logic.</p><p>2 parameters: the <strong>current state</strong> and an <strong>action object</strong>.</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> newState;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;increase&#x27;</span>:</span><br><span class="line">      newState = &#123;<span class="attr">counter</span>: state.counter + <span class="number">1</span>&#125;;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;descrease&#x27;</span>:</span><br><span class="line">      newState = &#123;<span class="attr">counter</span>: state.counter - <span class="number">1</span>&#125;;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newState;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="action-object"><a href="#action-object" class="headerlink" title="action object"></a>action object</h5><p><strong>action object</strong> describes how to update the state. The property <code>type</code> describes what kind of state update the reducer must do. If the action object must carry some useful information (aka payload) to be used by the reducer, then you can add additional properties to the action object. Like <code>user</code> below.</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> action = &#123;</span><br><span class="line">  type: <span class="string">&#x27;add&#x27;</span>,</span><br><span class="line">  user: &#123;</span><br><span class="line">    name: <span class="string">&#x27;Harris&#x27;</span>,</span><br><span class="line">    sex: <span class="string">&#x27;male&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="dispatch"><a href="#dispatch" class="headerlink" title="dispatch"></a>dispatch</h4><p>The <code>dispatch</code> is a special function that dispatches an action object.</p><p><strong>Syntax</strong>: <code>dispatch(actionObject)</code></p><h3 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a>useContext</h3><blockquote><p>通过<code>useContext</code>拿到上下文里的数据。之前介绍过，这里直接上例子，看看和之前写的有什么不同（React进阶/Context/Move…），使用<code>useContext</code>代码会更简洁。</p></blockquote><p>ThemeContext.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ThemeContext = React.createContext();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ThemeContextProvider = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [theme, setTheme] = useState(<span class="string">&quot;light&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> toggleTheme = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    setTheme(<span class="function">(<span class="params">prevTheme</span>) =&gt;</span> prevTheme === <span class="string">&quot;light&quot;</span> ? <span class="string">&quot;dark&quot;</span> : <span class="string">&quot;light&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;ThemeContext.Provider value=&#123;&#123; theme, toggleTheme &#125;&#125;&gt;</span><br><span class="line">      &#123;props.children&#125;</span><br><span class="line">    &lt;/ThemeContext.Provider&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; ThemeContextProvider, ThemeContext &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>index.js（保持不变）</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&quot;./App&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123;ThemeContextProvider&#125; <span class="keyword">from</span> <span class="string">&quot;./themeContext&quot;</span></span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;ThemeContextProvider&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/ThemeContextProvider&gt;, </span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>Button.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123;ThemeContext&#125; <span class="keyword">from</span> <span class="string">&quot;./themeContext&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Button</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">	<span class="comment">//重点</span></span><br><span class="line">  <span class="keyword">const</span> context = React.useContext(ThemeContext)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;button onClick=&#123;context.toggleTheme&#125; className=&#123;<span class="string">`<span class="subst">$&#123;context.theme&#125;</span>-theme`</span>&#125;&gt;Switch Theme&lt;/button&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Button</span><br></pre></td></tr></table></figure><h3 id="Custom-Hooks"><a href="#Custom-Hooks" class="headerlink" title="Custom Hooks"></a>Custom Hooks</h3><blockquote><p>自定义 Hook 是一种让你能够将组件里可复用的逻辑提取到函数中的方式。自定义 Hook 可以让你在不增加组件的情况下，<u>复用组件之间的状态逻辑</u>，从而使代码更加简洁、清晰。</p><p>与 Component 直观区别是，Hook 是复用 JS 逻辑，Component 是复用 HTML 代码。</p></blockquote><p>useCounter.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useCounter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">increment</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        setCount(<span class="function"><span class="params">prevCount</span> =&gt;</span> prevCount + <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> [count, increment]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useCounter</span><br></pre></td></tr></table></figure><blockquote><p>Note：<code>return [count, increment]</code> 部分也可以写成 <code>return &#123;count, increment&#125;</code>，这样的话，在接收时就必须使用该变量名了。</p></blockquote><p>App.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> useCounter <span class="keyword">from</span> <span class="string">&quot;./useCounter&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [number, add] = useCounter()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;h1&gt;The count is &#123;number&#125;&lt;/h1&gt;</span><br><span class="line">            &lt;button onClick=&#123;add&#125;&gt;Add <span class="number">1</span>&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App</span><br></pre></td></tr></table></figure><h2 id="Router"><a href="#Router" class="headerlink" title="Router"></a>Router</h2><blockquote><p>React 路由 可以有效管理多个视图（组件）实现 SPA（single page application，单页应用）</p></blockquote><h3 id="Installation-安装"><a href="#Installation-安装" class="headerlink" title="Installation 安装"></a>Installation 安装</h3><p><code>npm add react-router-dom</code></p><p>下面笔记是根据 V6 版本写的</p><h3 id="lt-BrowserRouter-gt-与-lt-HashRouter-gt"><a href="#lt-BrowserRouter-gt-与-lt-HashRouter-gt" class="headerlink" title="&lt;BrowserRouter&gt; 与 &lt;HashRouter&gt;"></a>&lt;BrowserRouter&gt; 与 &lt;HashRouter&gt;</h3><blockquote><p>在最外层包裹整个应用，它相当于 context</p></blockquote><p>&lt;BrowserRouter&gt; :</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123;BrowserRouter <span class="keyword">as</span> Router&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">    &lt;Router&gt;</span><br><span class="line">        &lt;App /&gt;</span><br><span class="line">    &lt;/Router&gt;, </span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><blockquote><p>BrowserRouter模式，访问地址：<code>https://&lt;url&gt;/xxx</code></p></blockquote><p>&lt;HashRouter&gt; :</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123;HashRouter <span class="keyword">as</span> Router&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Router&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/Router&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><blockquote><p>HashRouter模式，访问地址：<code>https://&lt;url&gt;/#/xxx</code></p></blockquote><p>两者对比：</p><ul><li>hash模式兼容好，history模式是 HTML5 提出的，兼容性差（移动端兼容性不错）</li><li>hash模式下，访问不存在的页面，不需要单独配置nginx。而history模式需要。</li><li>history模式路由更好看；hash模式带#号，不美观，而且处理描点链接不方便。</li></ul><h3 id="lt-Routes-gt-amp-lt-Route-gt"><a href="#lt-Routes-gt-amp-lt-Route-gt" class="headerlink" title="&lt;Routes&gt; &amp; &lt;Route&gt;"></a>&lt;Routes&gt; &amp; &lt;Route&gt;</h3><p><code>&lt;Routes&gt;</code> 它用来包裹 <code>&lt;Route&gt;</code></p><p><code>&lt;Route&gt;</code> 相当于 if 语句，配置路由规则和要展示的组件（路由出口），可以嵌套使用，需要通过<code>&lt;Outlet/&gt;</code> 组件来渲染子路由；</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Routes, Route &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line">&lt;Routes&gt;</span><br><span class="line">  &#123;<span class="comment">/* 1. path 定义路径，element 定义对应渲染组件 */</span>&#125;</span><br><span class="line">  &lt;Route path=<span class="string">&quot;/&quot;</span> element=&#123;<span class="xml"><span class="tag">&lt;<span class="name">Login</span> /&gt;</span></span>&#125; /&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;Route path=<span class="string">&quot;/layout&quot;</span> element=&#123;<span class="xml"><span class="tag">&lt;<span class="name">WebLayout</span> /&gt;</span></span>&#125;&gt;</span><br><span class="line">    &#123;<span class="comment">/* 2. 嵌套路由需要&lt;Outlet /&gt;组件配合使用，该路由访问路径http://localhost:8080/layout/main */</span>&#125; </span><br><span class="line">    &lt;Route path=<span class="string">&quot;main&quot;</span> element=&#123;<span class="xml"><span class="tag">&lt;<span class="name">Home</span> /&gt;</span></span>&#125; /&gt;</span><br><span class="line">  &lt;/Route&gt;</span><br><span class="line">  </span><br><span class="line">  &#123;<span class="comment">/* 3. Route 也可以不写element属性，展示嵌套路由，对应路由是：/tab/list */</span>&#125;</span><br><span class="line">  &lt;Route path=<span class="string">&quot;/tab&quot;</span>&gt;</span><br><span class="line">    &lt;Route path=<span class="string">&quot;list&quot;</span> element=&#123;<span class="xml"><span class="tag">&lt;<span class="name">List</span> /&gt;</span></span>&#125; /&gt;</span><br><span class="line">  &lt;/Route&gt;</span><br><span class="line">  </span><br><span class="line">  &#123;<span class="comment">/* 4. Route 定义replace属性为true的时候，不会产生历史历史记录。默认是false */</span>&#125;</span><br><span class="line">  &lt;Route path=<span class="string">&quot;/list&quot;</span> element=&#123;&lt;List&gt;&#125; replace=&#123;<span class="literal">true</span>&#125; /&gt;</span><br><span class="line">        </span><br><span class="line">  &#123;<span class="comment">/* 5. Route 定义Index属性，不需要定义path属性，在子路由里显示该路由页面。 */</span>&#125;</span><br><span class="line">  &lt;Route path=<span class="string">&quot;/main&quot;</span> element=&#123;<span class="xml"><span class="tag">&lt;<span class="name">Main</span> /&gt;</span></span>&#125;&gt;</span><br><span class="line">    &lt;Route index element=&#123;<span class="xml"><span class="tag">&lt;<span class="name">Test1</span> /&gt;</span></span>&#125; /&gt;</span><br><span class="line">    </span><br><span class="line">  	&#123;<span class="comment">/* 6. 定义动态的路由，访问地址：http://localhost:8080/main/1 */</span>&#125;</span><br><span class="line">    &lt;Route path=<span class="string">&quot;:id&quot;</span> element=&#123;<span class="xml"><span class="tag">&lt;<span class="name">Test2</span> /&gt;</span></span>&#125; /&gt;</span><br><span class="line">  	&#123;<span class="comment">/* 访问路径：http://localhost:8080/main/list/1 */</span>&#125;</span><br><span class="line">    &lt;Route path=<span class="string">&quot;list/:id&quot;</span> element=&#123;<span class="xml"><span class="tag">&lt;<span class="name">Test2</span> /&gt;</span></span>&#125; /&gt;</span><br><span class="line">  &lt;/Route&gt;</span><br><span class="line">&lt;/Routes&gt;</span><br></pre></td></tr></table></figure><h3 id="lt-Link-gt-与-lt-NavLink-gt"><a href="#lt-Link-gt-与-lt-NavLink-gt" class="headerlink" title="&lt;Link&gt; 与 &lt;NavLink&gt;"></a>&lt;Link&gt; 与 &lt;NavLink&gt;</h3><blockquote><p><code>&lt;Link&gt;</code> 类似于a标签的，是基于a标签封装的组件。 最终<code>&lt;Link&gt;</code>组件会转为a标签。通常应用就是在不同页面之间跳转。</p></blockquote><p>有三种传参方式：</p><ol><li>params</li><li>searchParams</li><li>state</li></ol><blockquote><p>必须被&lt;BrowserRouter / &gt; 或 &lt;HashRouter / &gt; 包裹</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Link &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line">&#123;<span class="comment">/* to的路由是对象，属性pathName。定义三种传参方式如下： */</span>&#125;</span><br><span class="line">&lt;Link to=&#123;&#123; <span class="attr">pathName</span>: <span class="string">&quot;/&quot;</span> &#125;&#125;&gt;&lt;/Link&gt;</span><br><span class="line"></span><br><span class="line">&#123;<span class="comment">/* 1. params传参 👉 /detail/:id */</span>&#125;</span><br><span class="line">&lt;Link to=<span class="string">&quot;/detail/1&quot;</span>&gt;&lt;Link&gt;</span><br><span class="line">&lt;Link to=&#123;<span class="string">`/detail/<span class="subst">$&#123;id&#125;</span>`</span>&#125;&gt;&lt;Link&gt;</span><br><span class="line">  &lt;Link to=<span class="string">&quot;/detail/:id&quot;</span>&gt;&lt;Link&gt;</span><br><span class="line"></span><br><span class="line">&#123;<span class="comment">/* 2. searchParams传参 👉 /detail?id=1 */</span>&#125;</span><br><span class="line">&lt;Link to=<span class="string">&quot;/detail?id=1&quot;</span>&gt;&lt;/Link&gt;</span><br><span class="line">&lt;Link to=<span class="string">`/detail?id=<span class="subst">$&#123;id&#125;</span>`</span>&gt;&lt;/Link&gt;</span><br><span class="line"></span><br><span class="line">&#123;<span class="comment">/* 3. state 传参 */</span>&#125;</span><br><span class="line">&lt;Link to=<span class="string">&quot;/&quot;</span> state=&#123;&#123; <span class="attr">id</span>: <span class="number">1</span> &#125;&#125;&gt;</span><br><span class="line"></span><br><span class="line">&#123;<span class="comment">/* replace 为true的时候，不产生历史记录, 默认replace=&#123;false&#125; */</span>&#125;</span><br><span class="line">&lt; Link to=<span class="string">&quot;/detail&quot;</span> replace=&#123; <span class="literal">true</span> &#125;&gt;</span><br></pre></td></tr></table></figure><blockquote><p><code>&lt;NavLink&gt;</code> 组件和<code>&lt;Link&gt;</code> 组件使用一致，但它相当于激活版的 <code>&lt;Link&gt;</code>组件，可以实现导航被选中的高亮效果。通常的使用场景是在同一个界面，tab栏切换，导航高亮。</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; NavLink &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NavLink 组件的class 会返回含有isActive的对象，为true的时间，改导航路由被激活。</span></span><br><span class="line">&lt;NavLink to=<span class="string">&quot;/go&quot;</span> className=&#123;<span class="function">(<span class="params">&#123; isActive &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> isActive ? <span class="string">&quot;red&quot;</span> : <span class="string">&quot;blue&quot;</span></span><br><span class="line">&#125;&#125;&gt; go &lt;/NavLink&gt;</span><br></pre></td></tr></table></figure><h4 id="State-参数"><a href="#State-参数" class="headerlink" title="State 参数"></a>State 参数</h4><p>state 是可选参数，通常在不同页面之间传递数据时，可以将数据隐式存储在 state 中，然后在目标页面中访问它们。它好处是不会将数据暴露在URL中，也不会被出现在浏览器历史记录里，从而保持URL的简洁性、美观性和保护用户隐私。</p><h3 id="lt-Navigate-gt"><a href="#lt-Navigate-gt" class="headerlink" title="&lt;Navigate&gt;"></a>&lt;Navigate&gt;</h3><blockquote><p><code>&lt;Navigate&gt;</code> 组件被渲染，路径被修改，切换视图。它和<code>&lt;Link&gt;</code>不同之处是，前者是渲染后跳转，后者需要点击事件发生才会跳转。</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Navigate  &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line">&lt;Navigate to=<span class="string">&quot;/&quot;</span> /&gt;</span><br><span class="line">&lt;Navigate to=<span class="string">&quot;/&quot;</span> replace=&#123;<span class="literal">true</span>&#125; /&gt;</span><br></pre></td></tr></table></figure><h3 id="lt-Outlet-gt"><a href="#lt-Outlet-gt" class="headerlink" title="&lt;Outlet /&gt;"></a>&lt;Outlet /&gt;</h3><blockquote><p>当route 发生嵌套的时候，必须使用<code>&lt;Outlet /&gt;</code>组件来渲染子路由对应的视图，相当于子路由渲染组件的占位符。</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Routes, Route, Outlet &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Module</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h2&gt;我是Modules组件&lt;/h2&gt;</span><br><span class="line">      <span class="comment">// 如果不写 &lt;Outlet /&gt; 组件，&lt;Item /&gt; 视图是渲染不出来的。</span></span><br><span class="line">      &lt;Outlet /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Item</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h2&gt;我是Item组件&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Routes&gt;</span><br><span class="line">      &lt;Route to=<span class="string">&quot;/tab&quot;</span> element=&#123; <span class="xml"><span class="tag">&lt;<span class="name">Module</span> /&gt;</span></span> &#125;&gt;</span><br><span class="line">        &lt;Route to=<span class="string">&quot;item&quot;</span> element=&#123; <span class="xml"><span class="tag">&lt;<span class="name">Item</span> /&gt;</span></span> &#125;&gt;</span><br><span class="line">      &lt;/Route&gt;</span><br><span class="line">    &lt;/Routes&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="useRoutes-🔥"><a href="#useRoutes-🔥" class="headerlink" title="useRoutes() 🔥"></a>useRoutes() 🔥</h3><blockquote><p>接收数组生成路由表，动态创建 Routes 和 Route。类似 vue-router， 通过 js 配置路由。</p></blockquote><p>router.jsx</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里也可以定义纯js，定义router.js配置路由，类似vue中那样配置路由。</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;React&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useRoutes, Navigate &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&quot;../views/home.jsx&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Loading <span class="keyword">from</span> <span class="string">&quot;./components/loading.jsx&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 利用React.lazy 懒加载组件</span></span><br><span class="line"><span class="keyword">const</span> List = React.lazy(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/list.jsx&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 懒加载组件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lazyComponent</span>(<span class="params">path</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> Comp = React.lazy(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">`../views/<span class="subst">$&#123;path&#125;</span>`</span>));</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="comment">// fallcack 可自定义全局&lt;Loading /&gt;组件，在切换页面或模块显示loading过程，提高用户体验。</span></span><br><span class="line">    &lt;React.Suspense fallback=&#123; <span class="xml"><span class="tag">&lt;<span class="name">Loading</span> <span class="attr">title</span>=<span class="string">&quot;加载中...&quot;</span> /&gt;</span></span> &#125;&gt;</span><br><span class="line">      &lt;Comp /&gt;</span><br><span class="line">    &lt;/React.Suspense&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    element: <span class="xml"><span class="tag">&lt;<span class="name">Home</span> /&gt;</span></span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&quot;/list&quot;</span>,</span><br><span class="line">    element: <span class="xml"><span class="tag">&lt;<span class="name">List</span> /&gt;</span></span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&quot;/detail&quot;</span>,</span><br><span class="line">    element: lazyComponent(<span class="string">&quot;detail.jsx&quot;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    element: <span class="xml"><span class="tag">&lt;<span class="name">Navigate</span> <span class="attr">to</span>=<span class="string">&quot;/login&quot;</span> /&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> RouteList = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> router = useRoutes(routes);</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;&gt;</span> &#123; router &#125; <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>App.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; RouteList &#125; <span class="keyword">from</span> <span class="string">&quot;./router.jsx&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">RouteList</span> /&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="useNavigate"><a href="#useNavigate" class="headerlink" title="useNavigate()"></a>useNavigate()</h3><blockquote><p>它和 <code>history.push()</code> 类似，语法会更简洁些，React Router v6 版本建议使用它进行路由跳转。</p><p>通过<code>useNavigate()</code>返回的参数 <code>navigate</code> 是一个函数。</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useNavigate &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Demo = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> navigate = useNavigate();</span><br><span class="line">  <span class="keyword">const</span> handle = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    navigate(<span class="string">&quot;/login&quot;</span>, &#123;</span><br><span class="line">      replace: <span class="literal">true</span>,</span><br><span class="line">      state: &#123;</span><br><span class="line">        name: <span class="string">&quot;error&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 上述是state传参，params 和 searchParmas 传参的话, 需要手动拼接</span></span><br><span class="line">    <span class="comment">// - params</span></span><br><span class="line">    navigate(<span class="string">`/detail/<span class="subst">$&#123;id&#125;</span>`</span>);</span><br><span class="line">    <span class="comment">// - searchParmas</span></span><br><span class="line">    navigate(<span class="string">`/detail?name=<span class="subst">$&#123;name&#125;</span>&amp;age=<span class="subst">$&#123;age&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      <span class="comment">// 类似history.go(-1)</span></span><br><span class="line">      &lt;button onClick=&#123;<span class="function">() =&gt;</span> navigate(-<span class="number">1</span>)&#125;&gt;后退&lt;/button&gt;</span><br><span class="line">      <span class="comment">// 类似history.go(1)</span></span><br><span class="line">      &lt;button onClick=&#123;<span class="function">() =&gt;</span> navigate(<span class="number">1</span>)&#125;&gt;前进&lt;/button&gt;</span><br><span class="line">      </span><br><span class="line">      &lt;button onClick=&#123;handle&#125;&gt;按钮&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="useParams"><a href="#useParams" class="headerlink" title="useParams()"></a>useParams()</h3><blockquote><p>有时需要获取路由传来的值</p></blockquote><p>App.js（定义路由）</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Routes&gt;</span><br><span class="line">  &lt;Route path=<span class="string">&quot;/services&quot;</span> element=&#123;<span class="xml"><span class="tag">&lt;<span class="name">ServicesList</span>/&gt;</span></span>&#125; /&gt;</span><br><span class="line">  &lt;Route path=<span class="string">&quot;/services/:serviceId&quot;</span> element=&#123;<span class="xml"><span class="tag">&lt;<span class="name">ServiceDetail</span>/&gt;</span></span>&#125; /&gt;</span><br><span class="line">&lt;/Routes&gt;</span><br></pre></td></tr></table></figure><p>ServicesList.js（链接传值）</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ServicesList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> services = servicesData.map(<span class="function"><span class="params">service</span> =&gt;</span> (</span><br><span class="line">    &lt;h3 key=&#123;service._id&#125;&gt;</span><br><span class="line">      &lt;Link to=&#123;<span class="string">`/services/<span class="subst">$&#123;service._id&#125;</span>`</span>&#125;&gt;&#123;service.name&#125;&lt;/Link&gt;</span><br><span class="line">    &lt;/h3&gt;</span><br><span class="line">  ))</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;Services List Page&lt;/h1&gt;</span><br><span class="line">      &#123;services&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ServiceDetail.js（用<code>useParams</code>获取链接值）</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useParams&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ServiceDetail</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;serviceId&#125; = useParams()</span><br><span class="line">    <span class="keyword">const</span> thisService = servicesData.find(<span class="function"><span class="params">service</span> =&gt;</span> service._id === serviceId)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;h1&gt;Service Detail Page&lt;/h1&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="useSearchParams"><a href="#useSearchParams" class="headerlink" title="useSearchParams()"></a>useSearchParams()</h3><blockquote><p>读取和修改当前位置的 URL 中的 query 对象</p><p>返回包含俩值的数组，内容分别为：当前的 search参数、更新search的函数</p></blockquote><p>App.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useSearchParams &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span></span><br><span class="line"></span><br><span class="line">&lt;Routes&gt;</span><br><span class="line">   &lt;Route to=<span class="string">&quot;/list?name=harris&amp;age=18&quot;</span> element=&#123;<span class="xml"><span class="tag">&lt;<span class="name">Detail</span> /&gt;</span></span>&#125; /&gt;</span><br><span class="line">&lt;/Routes&gt;</span><br></pre></td></tr></table></figure><p>detail.jsx（访问路由<code>https://&lt;url&gt;/list/1</code>）</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useSearchParams &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Detail = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 获取URL中携带过来的searchParams参数</span></span><br><span class="line">  <span class="keyword">const</span> [search,setSearch] = useSearchParams();</span><br><span class="line">  <span class="keyword">const</span> name = search.get(<span class="string">&quot;name&quot;</span>); <span class="comment">// harris</span></span><br><span class="line">  <span class="keyword">const</span> age = search.get(<span class="string">&quot;age&quot;</span>);  <span class="comment">// 18</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 点击，url变成http://localhost:3000/detail?name=zhang&amp;age=19</span></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setSearch(&quot;name=Wendy&amp;age=17&quot;)&#125;&gt;设置urlParams<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>用了 set 方法后也只是地址栏发生了改变，要访问该新 url 还得写一个页面跳转方法</p></blockquote><h3 id="useRouteMatch"><a href="#useRouteMatch" class="headerlink" title="useRouteMatch()"></a>useRouteMatch()</h3><blockquote><p>有时需要更改路由路径名称，那其全部子路由需要手动更改了，很麻烦，这时需要用 <code>useRouteMatch</code>，有了 <code>useRoutes()</code> 就不需要用这个了。</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;Link, Routes, Route, useRouteMatch&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Profile</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;path, url&#125; = useRouteMatch()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;Profile Page&lt;/h1&gt;</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;<span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">url</span>&#125;/<span class="attr">info</span>`&#125;&gt;</span>Profile Info<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span>&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;<span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">url</span>&#125;/<span class="attr">settings</span>`&#125;&gt;</span>Profile Settings<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span>&lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">      &lt;Routes&gt;</span><br><span class="line">        &lt;Route path=&#123;<span class="string">`<span class="subst">$&#123;path&#125;</span>/info`</span>&#125;&gt;</span><br><span class="line">          &lt;Info/&gt;</span><br><span class="line">        &lt;/Route&gt;</span><br><span class="line">        &lt;Route path=&#123;<span class="string">`<span class="subst">$&#123;path&#125;</span>/settings`</span>&#125;&gt;</span><br><span class="line">          &lt;Settings/&gt;</span><br><span class="line">        &lt;/Route&gt;</span><br><span class="line">      &lt;/Routes&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>Note</strong>: 官方文档建议 <code>url</code> 写在 <code>&lt;Link/&gt;</code> 里，<code>path</code> 写在 <code>&lt;Route/&gt;</code> 里。</p></blockquote><h3 id="useHistory"><a href="#useHistory" class="headerlink" title="useHistory()"></a>useHistory()</h3><blockquote><p>有时要用 JS 代码实现页面跳转。</p></blockquote><p>使用 <code>history.push(&quot;/pathname&quot;)</code> 可跳转到路径为 <code>/pathname</code> 页面</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useHistory&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ServiceDetail</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> history = useHistory()</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    history.push(<span class="string">&quot;/services&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button onClick=&#123;handleClick&#125;&gt;Go back to all services&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>例子里的 <code>history</code> 是 React 路由提供的，用于获取浏览器历史记录的相关信息，还有很多用法：</p><p><code>history.goBack()</code>：回退到上个页面</p><p><code>history.goForward()</code>：前进到下个页面</p><p><code>history.go(int)</code>：前进或回退到某个页面，参数 int 表示前进或后退页面数量（例如：-1 表示回退到上一页）</p><p><code>history.replace(/pathname)</code>： 替换当前页面历史记录，这样可以禁止用户回退到上一页面。</p><h3 id="useLocation"><a href="#useLocation" class="headerlink" title="useLocation()"></a>useLocation()</h3><blockquote><p>有时需要获取当前 URL 的位置信息，包括路径名 pathname、搜索参数 search、状态值 state 等等</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useLocation &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyComponent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> location = useLocation();</span><br><span class="line">  <span class="built_in">console</span>.log(location) <span class="comment">// 打印内容如下：</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  &#123;</span></span><br><span class="line"><span class="comment">      hash: &quot;&quot;,</span></span><br><span class="line"><span class="comment">      key: &quot;h8s9s&quot;,</span></span><br><span class="line"><span class="comment">      pathname: &quot;/list&quot;,</span></span><br><span class="line"><span class="comment">      search: &quot;?name=harris&amp;age=18&quot;,</span></span><br><span class="line"><span class="comment">      state: &#123;a: 1, b: 2&#125;</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>如果在搜索框里输入 <code>/list?name=harris&amp;age=18</code></p></blockquote><h3 id="useOutlet"><a href="#useOutlet" class="headerlink" title="useOutlet()"></a>useOutlet()</h3><blockquote><p>在嵌套路由中使用，父组件使用 <code>&lt;Outlet /&gt;</code>, 当子组件渲染的时候，会展示嵌套路由的对象。如果嵌套路由没有挂载，返回是null。</p></blockquote><p><code>useOutlet()</code>相较于<code>&lt;Outlet /&gt;</code> 的好处是：</p><ol><li>可获取子路由相关信息</li><li>可定制化子路由的渲染逻辑</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useOutlet &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dashboard</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> outlet = useOutlet();</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(outlet.pathname); <span class="comment">// &quot;/dashboard&quot;</span></span><br><span class="line">  <span class="built_in">console</span>.log(outlet.parentParams); <span class="comment">// 路由参数</span></span><br><span class="line">  <span class="built_in">console</span>.log(outlet.parentPath); <span class="comment">// &quot;/dashboard&quot;</span></span><br><span class="line">  <span class="built_in">console</span>.log(outlet.route); <span class="comment">// 当前路由对象</span></span><br><span class="line">  <span class="built_in">console</span>.log(outlet.router); <span class="comment">// 当前router对象</span></span><br><span class="line">  <span class="built_in">console</span>.log(outlet.match); <span class="comment">// 当前match对象</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123;<span class="comment">/* 渲染Outlet */</span>&#125;</span><br><span class="line">      &#123;outlet&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="lt-Redirect-gt"><a href="#lt-Redirect-gt" class="headerlink" title="&lt;Redirect /&gt;"></a>&lt;Redirect /&gt;</h3><blockquote><p>有时候需要页面重定向，比如检测是否登陆，若无就重定向到登陆界面。</p></blockquote><p>语法：<code>&lt;Redirect to=&quot;/pathname&quot; /&gt;</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;Link, Routes, Route, Redirect&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [isLoggedIn, setIsLoggedIn] = useState(<span class="literal">false</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/&quot;</span>&gt;Home&lt;/Link&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/private&quot;</span>&gt;Private&lt;/Link&gt;</span><br><span class="line">            </span><br><span class="line">            &lt;Routes&gt;</span><br><span class="line">                &lt;Route exact path=<span class="string">&quot;/&quot;</span>&gt;</span><br><span class="line">                    &lt;h1&gt;Home page, anyone is allowed here&lt;/h1&gt;</span><br><span class="line">                &lt;/Route&gt;</span><br><span class="line">                &lt;Route path=<span class="string">&quot;/private&quot;</span>&gt;</span><br><span class="line">                    &#123;</span><br><span class="line">                        isLoggedIn ?</span><br><span class="line">                        &lt;h1&gt;Protected page, must be logged <span class="keyword">in</span> to be here&lt;/h1&gt; :</span><br><span class="line">                        &lt;Redirect to=<span class="string">&quot;/login&quot;</span> /&gt;</span><br><span class="line">                    &#125;</span><br><span class="line">                &lt;/Route&gt;</span><br><span class="line">                &lt;Route path=<span class="string">&quot;/login&quot;</span>&gt;</span><br><span class="line">                    &lt;button onClick=&#123;<span class="function">() =&gt;</span> setIsLoggedIn(<span class="literal">true</span>)&#125;&gt;Log <span class="keyword">in</span>&lt;/button&gt;</span><br><span class="line">                &lt;/Route&gt;</span><br><span class="line">            &lt;/Routes&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="JSON-Server"><a href="#JSON-Server" class="headerlink" title="JSON Server"></a>JSON Server</h1><blockquote><p>Since we are focusing on the UI at the moment, we need to set up a dummy server（虚拟服务器）, which will allow us to test our requests.</p></blockquote><p>We can use <a target="_blank" rel="noopener" href="https://github.com/typicode/json-server">json-server</a> tool to create a full RESTful API from a JSON file.</p><p>JSON Server is a simple project that helps you to setup a REST API with CRUD operations very fast.</p><h2 id="Creating-the-db-json"><a href="#Creating-the-db-json" class="headerlink" title="Creating the db.json"></a>Creating the db.json</h2><p>To be able to use the <code>json-server</code> tool, first we need to create a <code>db.json</code> file, which is going to contain our full database for the server.</p><p>The <code>json-server</code> tool will allow you to make the following:</p><ul><li><p>GET requests, to fetch data from the file.</p></li><li><p>POST requests, to insert new data into the file.</p></li><li><p>PUT and PATCH requests, to adjust existing data.</p></li><li><p>DELETE requests, to remove data.</p></li></ul><p>Let&#39;s create <code>src/server/db.json</code>.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;posts&quot;</span>: [</span><br><span class="line">    &#123;<span class="attr">&quot;id&quot;</span>: <span class="number">1</span>, <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;React&quot;</span>, <span class="attr">&quot;content&quot;</span>: <span class="string">&quot;It&#x27;s a good tool.&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">&quot;id&quot;</span>: <span class="number">2</span>, <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;Looking for a job&quot;</span>, <span class="attr">&quot;content&quot;</span>: <span class="string">&quot;It&#x27;s hard to find a job.&quot;</span>&#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;user&quot;</span>: [</span><br><span class="line">    &#123;<span class="attr">&quot;id&quot;</span>: <span class="number">1</span>, <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;Harris Wong&quot;</span>, <span class="attr">&quot;pwd&quot;</span>: <span class="string">&quot;123456&quot;</span>&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>We need to make sure that we provide an <code>id</code> value so that we can query the database later.</p></blockquote><h2 id="Installing-the-json-server-tool"><a href="#Installing-the-json-server-tool" class="headerlink" title="Installing the json-server tool"></a>Installing the json-server tool</h2><ol><li><p>We&#39;re gon&#39; install the json-server tool via npm:</p><p><code>npm install --save json-server</code></p></li><li><p>Now, we can start our backend server by calling the following command:</p><p><code>npx json-server --watch server/db.json</code></p></li></ol><blockquote><p>The <code>--watch</code> flag means that it&#39;ll listen to changes to the files, and refresh automatically.</p></blockquote><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>Now, we can go to <code>http://localhost:3000/posts/1</code> to see our post object.</p><p>The result will be like this:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;React&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;content&quot;</span>: <span class="string">&quot;It&#x27;s a good tool.&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Configuring-the-package-json"><a href="#Configuring-the-package-json" class="headerlink" title="Configuring the package.json"></a>Configuring the package.json</h2><blockquote><p>We need to change the port, so that it doesn&#39;t run on the same port as our client.</p></blockquote><p>We need to install a tool called <code>concurrently</code>, which lets us start the server and client at the same time:</p><p><code>npm install --save concurrently</code></p><p>package.json</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;:&#123;</span><br><span class="line">  &quot;start&quot;: &quot;npx concurrently \&quot;npm run start::server\&quot; \&quot;npm run start:client\&quot;&quot;,</span><br><span class="line">  &quot;start:server&quot;: &quot;npx json-server --watch server/db.json --port 4000&quot;,</span><br><span class="line">  &quot;start:client&quot;: &quot;react-scripts start&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Now, running <code>npm start</code> will run the client, as well as the backend server.</p><h2 id="Configuring-a-proxy"><a href="#Configuring-a-proxy" class="headerlink" title="Configuring a proxy"></a>Configuring a proxy</h2><blockquote><p>Finally, we have to define a proxy（代理）, to make sure that we can request our API from the same Uniform Resource Locator (URL) as the client.</p><p>This is needed because, otherwise, we would have to deal with <u>cross-site requests</u>, which are a bit more complicated to handle.</p><p>We are going to define a proxy that will forward requests from <code>http://localhost:3000/api/</code>to <code>http://localhost:4000/</code>.</p></blockquote><p>Now, let&#39;s configure the proxy:</p><ol><li><p><code>npm install --save http-proxy-middleware</code></p></li><li><p>Then, we create a new <code>src/setupProxy.js</code> file:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">&#x27;http-proxy-middleware&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">app</span>) </span>&#123;</span><br><span class="line">  app.use(proxy(<span class="string">&#x27;/api&#x27;</span>, &#123;</span><br><span class="line">    target: <span class="string">&#x27;http://localhost:4000&#x27;</span>,</span><br><span class="line">    pathRewrite: &#123;<span class="string">&#x27;^/api&#x27;</span>: <span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line">  &#125;))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>target</code>: the target of our proxy is the backend server.</p><p><code>pathRewrite</code>: It&#39;ll remove the <code>/api</code> prefix before forwarding the request to our server.</p></blockquote></li></ol><p>The preceding proxy configuration will link <code>/api</code> to our backend server, therefore, we can now start both the server and the client via <code>npm start</code>.</p><p>Then, we can access the API by opening <code>http://localhost:3000/posts/1</code>.</p><h1 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h1><p>Axios is a promise-based HTTP Client for node.js and the browser. It is isomorphic (同构的 = it can run in the browser and node.js with the same codebase).</p><p><strong>L15-P39</strong></p><h1 id="技巧合集"><a href="#技巧合集" class="headerlink" title="技巧合集"></a>技巧合集</h1><h2 id="快捷代码指令插件"><a href="#快捷代码指令插件" class="headerlink" title="快捷代码指令插件"></a>快捷代码指令插件</h2><p>在 VSCode 里安装<code>ES7+ React/Redux/React-Native snippets</code>插件后，可以通过键入<code>rafce</code>快捷创建一个 function 组件</p><h1 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h1><h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><p>通常，src 目录结构如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">src&#x2F;					项目源码，写项目功能代码</span><br><span class="line">	assets&#x2F;			资源（图片、字体等）</span><br><span class="line">	components&#x2F;	公共组件</span><br><span class="line">	pages&#x2F;			页面</span><br><span class="line">	containers&#x2F; 容器</span><br><span class="line">	utils&#x2F;			工具</span><br><span class="line">	App.js			根组件（配置路由信息）</span><br><span class="line">	index.css		全局样式</span><br><span class="line">	index.js		项目入口文件（渲染根组件、导入组件库）</span><br></pre></td></tr></table></figure><p><code>components/</code>里放一些公用 UI 组件，包括导航栏和页尾等</p><p><code>containers/</code>里放需要与数据和状态有关的 UI 组件，负责从数据层获取数据，处理用户交互，然后传递数据到 UI 组件进行呈现。</p><h2 id="Project-Setup-项目安装-1"><a href="#Project-Setup-项目安装-1" class="headerlink" title="Project Setup 项目安装 1"></a>Project Setup 项目安装 1</h2><p>这里我们使用 Vite，它是一种新型前端构建工具，能够显著提升前端开发体验</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm create vite@latest</span><br><span class="line">y</span><br><span class="line">react</span><br><span class="line">javascript</span><br></pre></td></tr></table></figure><p>或者 👇</p><h2 id="Project-Setup-项目安装-2"><a href="#Project-Setup-项目安装-2" class="headerlink" title="Project Setup 项目安装 2"></a>Project Setup 项目安装 2</h2><p>初始化项目：<code>npx create-react-app &lt;project-name&gt;</code></p><p>启动项目：<code>npm start</code></p><h2 id="安装-antd-mobile-组件库"><a href="#安装-antd-mobile-组件库" class="headerlink" title="安装 antd-mobile 组件库"></a>安装 antd-mobile 组件库</h2><p><code>npm add antd-mobile</code></p><blockquote><p>样式无需自行导入，因为新版组件库已帮你导入好</p></blockquote><h2 id="安装-react-icons-图标库"><a href="#安装-react-icons-图标库" class="headerlink" title="安装 react-icons 图标库"></a>安装 react-icons 图标库</h2><p><code>npm install react-icons</code></p><h2 id="部署项目"><a href="#部署项目" class="headerlink" title="部署项目"></a>部署项目</h2><p>将React项目部署到GitHub和Vercel需要以下步骤：</p><h3 id="部署到-GitHub"><a href="#部署到-GitHub" class="headerlink" title="部署到 GitHub"></a>部署到 GitHub</h3><ol><li><p>在GitHub上创建一个新的repository，并将你的代码推送到这个repository中。</p></li><li><p>确保你的代码已经经过了所有的测试，并且已经成功运行过。</p></li><li><p>在你的React项目中安装GitHub Pages插件：</p><p><code>npm install gh-pages --save-dev</code></p></li><li><p>打开<code>package.json</code>文件，添加以下代码到文件中：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;homepage&quot;: &quot;https://&lt;your-username&gt;.github.io/&lt;your-repository-name&gt;&quot;,</span><br><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;predeploy&quot;: &quot;npm run build&quot;,</span><br><span class="line">  &quot;deploy&quot;: &quot;gh-pages -d build&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>注意：<code>homepage</code>中的URL应该与你的GitHub repository相对应。</p></blockquote></li><li><p>运行以下命令将你的应用程序部署到 GitHub Pages:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br><span class="line">npm run deploy</span><br></pre></td></tr></table></figure></li></ol><h3 id="部署到-Vercel"><a href="#部署到-Vercel" class="headerlink" title="部署到 Vercel"></a>部署到 Vercel</h3><ol><li>首先，你需要创建一个 Vercel 账户，并登录到 Vercel 控制台。</li><li>在控制台中，点击“New Project”，并选择“Import Git Repository”选项，将你的GitHub repository导入到Vercel中。</li><li>确保你的项目中有一个<code>package.json</code>文件，并在其中设置<code>start</code>脚本。例如：</li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;start&quot;: &quot;react-scripts start&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>点击“Deploy”，等待Vercel构建和部署你的应用程序。</li><li>一旦部署成功，你的应用程序将会自动在Vercel上运行。</li></ol><h1 id="UI-库"><a href="#UI-库" class="headerlink" title="UI 库"></a>UI 库</h1><h2 id="Ant-Design"><a href="#Ant-Design" class="headerlink" title="Ant Design"></a><a target="_blank" rel="noopener" href="https://ant.design/index-cn">Ant Design</a></h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p><code>npm install antd --save</code></p><h3 id="自定义主题-amp-切换主题"><a href="#自定义主题-amp-切换主题" class="headerlink" title="自定义主题 &amp; 切换主题"></a>自定义主题 &amp; 切换主题</h3><p>自定义主题在官网可以自己定制主色、尺寸等等，然后复制代码到 token 这里。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; theme, ConfigProvider, Button &#125; <span class="keyword">from</span> <span class="string">&quot;antd&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./App.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [darkMode, setDarkMode] = useState(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;ConfigProvider</span><br><span class="line">      theme=&#123;&#123;</span><br><span class="line">        token: &#123;</span><br><span class="line">          colorPrimary: <span class="string">&quot;#ff8a00&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        algorithm: darkMode ? theme.darkAlgorithm : theme.defaultAlgorithm</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">        &lt;Button type=<span class="string">&quot;primary&quot;</span> onClick=&#123;<span class="function">() =&gt;</span> setDarkMode(!darkMode)&#125;&gt;Button&lt;/Button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/ConfigProvider&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure><h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><ul><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_37089318/article/details/125007570">React router V6的基本使用</a></li></ul></article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>React学习笔记</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://blog.harriswong.top/posts/a1605017/">https://blog.harriswong.top/posts/a1605017/</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a" style="display:inline-block"><h>作者</h><div class="post-copyright-cc-info"><h>Harris Wong</h></div></div><div class="post-copyright-c" style="display:inline-block"><h>发布于</h><div class="post-copyright-cc-info"><h>2022-07-11</h></div></div><div class="post-copyright-u" style="display:inline-block"><h>更新于</h><div class="post-copyright-cc-info"><h>2023-03-24</h></div></div><div class="post-copyright-c" style="display:inline-block"><h>版权协议</h><div class="post-copyright-cc-info"><a rel="noopener" target="_self" title="CC BY-NC-SA 4.0" href="/cc/">CC BY-NC-SA 4.0</a></div></div></div></div><div class="post-copyright__note"><span class="post-copyright-info"><h>转载或借鉴请注明博客来源噢！</h></span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%F0%9F%93%9D%E5%89%8D%E7%AB%AF/">📝前端</a><a class="post-meta__tags" href="/tags/%E2%9D%84React/">❄React</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_React.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://unpkg.com/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://unpkg.com/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated">🎃Trick or Treat!🍭</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/npm/hassan-assets/img/payment.png" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/payment.png" alt="你的鼓励是我创作最大的动力"></a><a href="/about/#%E8%B5%9E%E8%B5%8F%E5%90%8D%E5%8D%95" target="_self"><div class="reward-list">赞赏名单</div><div class="post-qr-code-desc">你的鼓励是我创作最大的动力</div></a></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/f13a3a59/"><img class="prev-cover" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_graduation.png" onerror='onerror=null,src="https://cdn.jsdelivr.net/npm/hassan-assets/img/404.png"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">本科毕业啦~完结撒花🌸</div></div></a></div><div class="next-post pull-right"><a href="/posts/d5b87a06/"><img class="next-cover" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_printer_Canon_MG2580S.png" onerror='onerror=null,src="https://cdn.jsdelivr.net/npm/hassan-assets/img/404.png"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">打印机使用日记——吐槽蛋疼的加墨方式</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>猜你想看</span></div><div class="relatedPosts-list"><div><a href="/posts/c631f0b6/" title="Redux in React 学习笔记"><img class="cover" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_ReduxInReact.png" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-02-19</div><div class="title">Redux in React 学习笔记</div></div></a></div><div><a href="/posts/1d200213/" title="开发个人主页Portfolio网站记录"><img class="cover" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_Portfolio.png" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-03-05</div><div class="title">开发个人主页Portfolio网站记录</div></div></a></div><div><a href="/posts/3f7cd15d/" title="JavaScript基础笔记"><img class="cover" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_JAVASCRIPT.png" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-03-24</div><div class="title">JavaScript基础笔记</div></div></a></div><div><a href="/posts/1822a0ce/" title="CSS学习笔记"><img class="cover" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_CSS1.png" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-03-06</div><div class="title">CSS学习笔记</div></div></a></div><div><a href="/posts/a0ca7bc4/" title="HTML学习笔记"><img class="cover" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_HTML.png" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-03-08</div><div class="title">HTML学习笔记</div></div></a></div><div><a href="/posts/ea5327b4/" title="Spring Boot + JWT + Vue 实现前后端分离登录认证"><img class="cover" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_frontend_backend.png" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2022-03-31</div><div class="title">Spring Boot + JWT + Vue 实现前后端分离登录认证</div></div></a></div></div></div><img data-lazy-src="https://cdn.jsdelivr.net/npm/hassan-assets/img/Bilibili_Dividing_Line.png" style="margin:26px 0"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div><div class="comment-privacy"><a href="/privacy/">隐私政策</a></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="status-bar"><div class="status-bar_clock"></div><img class="status-bar_img"></div><div class="author-box"><div class="author-square"><div class="author-info__sayhi is-center" id="author-info__sayhi"></div><div id="he-plugin-simple"></div><script>WIDGET={CONFIG:{modules:"0124",background:"5",tmpColor:"FFFFFF",tmpSize:"16",cityColor:"FFFFFF",citySize:"16",aqiColor:"FFFFFF",aqiSize:"16",weatherIconSize:"23",alertIconSize:"18",padding:"0",shadow:"0",language:"auto",fixed:"false",vertical:"center",horizontal:"left",key:"40156dab3e0f4d78acfab412d011f438"}}</script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script></div><div class="avatar-img-cover author-square"><a href="/gallery/" title="相册"><img src="https://cdn.jsdelivr.net/npm/hassan-assets/img/avatar_blog.jpg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/npm/hassan-assets/img/friend_404.gif"'></a></div></div><div class="author-info__name is-center"><a href="/about/" title="关于本站">Harris Wong</a></div><div class="author-info__description is-center">一名什锦区博主，这里我将记录学习过程中的笔记、生活中的点点滴滴，分享一些经验与想法。在这里相遇很幸运 💛💙</div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">时光机</div><div class="length-num">97</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">50</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/hassanblog/" target="_blank" title="GitHub"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-GitHub"></use></svg></a><a class="social-icon" href="mailto:hassanwong@qq.com" target="_blank" title="QQEmail"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-email"></use></svg></a><a class="social-icon" href="https://weibo.com/hassan89" target="_blank" title="Sina"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-sina"></use></svg></a><a class="social-icon" href="https://space.bilibili.com/383883097" target="_blank" title="Bilibili"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg></a><a class="social-icon" href="https://kg.qq.com/node/personal?uid=639b9c81222c368234" target="_blank" title="全民K歌"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-quanminkge"></use></svg></a><a class="social-icon" href="https://y.qq.com/n/yqq/playlist/7934226388.html#stat=y_new.profile.create_playlist.click&amp;dirid=1" target="_blank" title="QQMusic"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-QQMusic"></use></svg></a><a class="social-icon" href="https://music.163.com/#/user/home?id=1322854335" target="_blank" title="Netease"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease"></use></svg></a><a class="social-icon" href="https://www.zhihu.com/people/song-69-76" target="_blank" title="知乎"><style>.icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu"></use></svg></a></div><div class="home-indicator"></div></div><script src="/js/custom/card_author.js"></script><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#React-%E5%85%A5%E9%97%A8"><span class="toc-text">React 入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Intro-%E4%BB%8B%E7%BB%8D"><span class="toc-text">Intro 介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CDN%E3%80%81%E5%AF%BC%E5%8C%85"><span class="toc-text">CDN、导包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-text">特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93"><span class="toc-text">渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSX-%E5%86%85%E9%83%A8%E7%9A%84-JS"><span class="toc-text">JSX 内部的 JS</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Component-function"><span class="toc-text">Component: function</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Custom-Components-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="toc-text">Custom Components 自定义组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Parent-Child-Components-%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6"><span class="toc-text">Parent&#x2F;Child Components 父子组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Styling-with-Classes-%E4%BF%AE%E9%A5%B0%E7%B1%BB"><span class="toc-text">Styling with Classes 修饰类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Organize-components-%E6%95%B4%E7%90%86%E7%BB%84%E4%BB%B6"><span class="toc-text">Organize components 整理组件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Props-%E5%B1%9E%E6%80%A7"><span class="toc-text">Props 属性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%A6%E4%B8%80%E7%A7%8D-props-%E5%8F%96%E5%80%BC%E6%96%B9%E5%BC%8F"><span class="toc-text">另一种 props 取值方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Passing-in-non-string-props-%E4%BC%A0%E5%85%A5%E9%9D%9E%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E7%9A%84-Props"><span class="toc-text">Passing in non-string props 传入非字符串类的 Props</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#prop-key"><span class="toc-text">prop: key</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pass-object-as-props"><span class="toc-text">Pass object as props</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spread-object-as-props-%E5%B0%86%E5%AF%B9%E8%B1%A1%E4%BD%9C%E4%B8%BA-props-%E5%B1%95%E5%BC%80"><span class="toc-text">Spread object as props 将对象作为 props 展开</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#props-children"><span class="toc-text">props.children</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#map"><span class="toc-text">.map()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Static-Web-Pages-%E9%9D%99%E6%80%81-Web-%E9%A1%B5%E9%9D%A2"><span class="toc-text">Static Web Pages 静态 Web 页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dynamic-Web-Apps-%E5%8A%A8%E6%80%81-Web-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-text">Dynamic Web Apps 动态 Web 应用程序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Event-listeners-%E4%BA%8B%E4%BB%B6%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-text">Event listeners 事件侦听器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#State-%E7%8A%B6%E6%80%81"><span class="toc-text">State 状态</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Changing-state"><span class="toc-text">Changing state</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Callback-function-%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0"><span class="toc-text">Callback function 回调函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Complex-state-arrays-%E6%95%B0%E7%BB%84"><span class="toc-text">Complex state: arrays 数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Complex-state-objects-%E5%AF%B9%E8%B1%A1"><span class="toc-text">Complex state: objects 对象</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lazy-State-Initialization"><span class="toc-text">Lazy State Initialization</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sharing-data-between-components-%E7%BB%84%E4%BB%B6%E9%97%B4%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-text">Sharing data between components 组件间共享数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dynamic-styles-%E5%8A%A8%E6%80%81%E6%A0%B7%E5%BC%8F"><span class="toc-text">Dynamic styles 动态样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conditional-rendering-%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-text">Conditional rendering 条件渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#amp-amp-logical-and-operator-%E9%80%BB%E8%BE%91%E4%B8%8E%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">&amp;&amp; logical and operator 逻辑与运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ternary-expression-%E4%B8%89%E5%85%83%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">ternary expression 三元表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#if-else"><span class="toc-text">if else</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Form-%E8%A1%A8%E5%8D%95"><span class="toc-text">Form 表单</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#onChange"><span class="toc-text">onChange</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#event"><span class="toc-text">event</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#state-object"><span class="toc-text">state object</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Application-Checkbox"><span class="toc-text">Application: Checkbox</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Application-Radio-buttons"><span class="toc-text">Application: Radio buttons</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Application-Select-amp-Option"><span class="toc-text">Application: Select &amp; Option</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Application-Submitting-the-form"><span class="toc-text">Application: Submitting the form</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Side-effects-%E5%89%AF%E4%BD%9C%E7%94%A8"><span class="toc-text">Side effects 副作用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#useEffect"><span class="toc-text">useEffect()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Using-an-async-function-inside-useEffect-Clone"><span class="toc-text">Using an async function inside useEffect (Clone)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Component-Class"><span class="toc-text">Component: Class</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#State"><span class="toc-text">State</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Constructor-method"><span class="toc-text">Constructor method</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lifecycle-methods-componentDidMount"><span class="toc-text">Lifecycle methods: componentDidMount()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lifecycle-methods-componentDidUpdate"><span class="toc-text">Lifecycle methods: componentDidUpdate()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lifecycle-methods-componentWillUnmount"><span class="toc-text">Lifecycle methods: componentWillUnmount()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lifecycle-methods-shouldComponentUpdate"><span class="toc-text">Lifecycle methods: shouldComponentUpdate()</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#React-%E8%BF%9B%E9%98%B6"><span class="toc-text">React 进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#lt-React-Fragment-gt"><span class="toc-text">&lt;React.Fragment&gt;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Props"><span class="toc-text">Props</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Default-Props"><span class="toc-text">Default Props</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Prop-Types"><span class="toc-text">Prop Types</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Render-Props"><span class="toc-text">Render Props</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Higher-Order-Components-HOCs-%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6"><span class="toc-text">Higher Order Components (HOCs) 高阶组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Performance-Optimization"><span class="toc-text">Performance Optimization</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#React-PureComponent"><span class="toc-text">React.PureComponent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#React-memo"><span class="toc-text">React.memo()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Context"><span class="toc-text">Context</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Context-Provider"><span class="toc-text">Context Provider</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#contextType"><span class="toc-text">contextType</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Context-Consumer"><span class="toc-text">Context Consumer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Move-Context-Provider-to-its-own-component"><span class="toc-text">Move Context Provider to its own component</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Changing-Context"><span class="toc-text">Changing Context</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hooks%E2%AD%90%EF%B8%8F"><span class="toc-text">Hooks⭐️</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#useRef"><span class="toc-text">useRef</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#useReducer"><span class="toc-text">useReducer</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#initialState"><span class="toc-text">initialState</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#reducer"><span class="toc-text">reducer</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#action-object"><span class="toc-text">action object</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dispatch"><span class="toc-text">dispatch</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#useContext"><span class="toc-text">useContext</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Custom-Hooks"><span class="toc-text">Custom Hooks</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Router"><span class="toc-text">Router</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Installation-%E5%AE%89%E8%A3%85"><span class="toc-text">Installation 安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-BrowserRouter-gt-%E4%B8%8E-lt-HashRouter-gt"><span class="toc-text">&lt;BrowserRouter&gt; 与 &lt;HashRouter&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-Routes-gt-amp-lt-Route-gt"><span class="toc-text">&lt;Routes&gt; &amp; &lt;Route&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-Link-gt-%E4%B8%8E-lt-NavLink-gt"><span class="toc-text">&lt;Link&gt; 与 &lt;NavLink&gt;</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#State-%E5%8F%82%E6%95%B0"><span class="toc-text">State 参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-Navigate-gt"><span class="toc-text">&lt;Navigate&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-Outlet-gt"><span class="toc-text">&lt;Outlet &#x2F;&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#useRoutes-%F0%9F%94%A5"><span class="toc-text">useRoutes() 🔥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#useNavigate"><span class="toc-text">useNavigate()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#useParams"><span class="toc-text">useParams()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#useSearchParams"><span class="toc-text">useSearchParams()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#useRouteMatch"><span class="toc-text">useRouteMatch()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#useHistory"><span class="toc-text">useHistory()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#useLocation"><span class="toc-text">useLocation()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#useOutlet"><span class="toc-text">useOutlet()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-Redirect-gt"><span class="toc-text">&lt;Redirect &#x2F;&gt;</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JSON-Server"><span class="toc-text">JSON Server</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Creating-the-db-json"><span class="toc-text">Creating the db.json</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Installing-the-json-server-tool"><span class="toc-text">Installing the json-server tool</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Output"><span class="toc-text">Output</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Configuring-the-package-json"><span class="toc-text">Configuring the package.json</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Configuring-a-proxy"><span class="toc-text">Configuring a proxy</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Axios"><span class="toc-text">Axios</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8A%80%E5%B7%A7%E5%90%88%E9%9B%86"><span class="toc-text">技巧合集</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BF%AB%E6%8D%B7%E4%BB%A3%E7%A0%81%E6%8C%87%E4%BB%A4%E6%8F%92%E4%BB%B6"><span class="toc-text">快捷代码指令插件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE"><span class="toc-text">项目</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-text">目录结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Project-Setup-%E9%A1%B9%E7%9B%AE%E5%AE%89%E8%A3%85-1"><span class="toc-text">Project Setup 项目安装 1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Project-Setup-%E9%A1%B9%E7%9B%AE%E5%AE%89%E8%A3%85-2"><span class="toc-text">Project Setup 项目安装 2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-antd-mobile-%E7%BB%84%E4%BB%B6%E5%BA%93"><span class="toc-text">安装 antd-mobile 组件库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-react-icons-%E5%9B%BE%E6%A0%87%E5%BA%93"><span class="toc-text">安装 react-icons 图标库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE"><span class="toc-text">部署项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2%E5%88%B0-GitHub"><span class="toc-text">部署到 GitHub</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2%E5%88%B0-Vercel"><span class="toc-text">部署到 Vercel</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#UI-%E5%BA%93"><span class="toc-text">UI 库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Ant-Design"><span class="toc-text">Ant Design</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%BB%E9%A2%98-amp-%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98"><span class="toc-text">自定义主题 &amp; 切换主题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0"><span class="toc-text">参考文章</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>内容更新</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/3f7cd15d/" title="JavaScript基础笔记"><img src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_JAVASCRIPT.png" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/npm/hassan-assets/img/404.png"' alt="JavaScript基础笔记"></a><div class="content"><a class="title" href="/posts/3f7cd15d/" title="JavaScript基础笔记">JavaScript基础笔记</a><time datetime="2023-03-24T23:40:00.000Z" title="更新于 2023-03-24 23:40:00">2023-03-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a1605017/" title="React学习笔记"><img src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_React.png" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/npm/hassan-assets/img/404.png"' alt="React学习笔记"></a><div class="content"><a class="title" href="/posts/a1605017/" title="React学习笔记">React学习笔记</a><time datetime="2023-03-24T20:45:00.000Z" title="更新于 2023-03-24 20:45:00">2023-03-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/82a6839d/" title="如何制作简历及面试技巧？"><img src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_work.png" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/npm/hassan-assets/img/404.png"' alt="如何制作简历及面试技巧？"></a><div class="content"><a class="title" href="/posts/82a6839d/" title="如何制作简历及面试技巧？">如何制作简历及面试技巧？</a><time datetime="2023-03-09T17:00:00.000Z" title="更新于 2023-03-09 17:00:00">2023-03-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a0ca7bc4/" title="HTML学习笔记"><img src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_HTML.png" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/npm/hassan-assets/img/404.png"' alt="HTML学习笔记"></a><div class="content"><a class="title" href="/posts/a0ca7bc4/" title="HTML学习笔记">HTML学习笔记</a><time datetime="2023-03-08T19:00:00.000Z" title="更新于 2023-03-08 19:00:00">2023-03-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/35c100bf/" title="英语好词好句积累"><img src="https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_English.png" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/npm/hassan-assets/img/404.png"' alt="英语好词好句积累"></a><div class="content"><a class="title" href="/posts/35c100bf/" title="英语好词好句积累">英语好词好句积累</a><time datetime="2023-03-08T16:30:00.000Z" title="更新于 2023-03-08 16:30:00">2023-03-08</time></div></div></div></div><div class="card-widget card-cheesy_pick-up_lines" onclick='window.open("https://gal.harriswong.top/","_blank")'><div class="card-content"><div class="item-headline"><i class="fas fa-heart" style="color:pink"></i><span>土味情话</span></div><div id="cheesy_pick-up_lines-container"></div></div></div><script data-pjax="data-pjax" src="/js/custom/cheesy_pick-up_lines.js"></script><div class="card-widget card-ad-ymts" onclick='pjax.loadUrl("/ymts/")'><div id="flip-wrapper"><div id="flip-content"><div class="card-ad-heads"><div class="card-ad-title">英曼天诗留学团队👉</div><div class="card-ad-desc">想留学？不会申请？不会写</div><div class="card-ad-desc">文书？主流中介价格昂贵？</div></div><div class="card-ad-tails"><div class="card-ad-scan"><div class="card-ad-title">扫一扫👉</div><div class="card-ad-desc">添加顾问微信</div><div class="card-ad-desc">咨询留学详情</div></div><img src="https://cdn.jsdelivr.net/npm/hassan-assets/img/ad_ymts_vx.png"></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(https://cdn.jsdelivr.net/npm/hassan-assets/img/cover_React.png)"><div id="footer-wrap"><div id="hassan-footer"><div class="footer-group"><div class="copyright"><h5>©2019 - 2023</h5><h5>@Harris Wong</h5><svg style="width:100px;height:100px" aria-hidden="true"><use xlink:href="#icon-Butterfly"></use></svg><div class="workboard"></div></div></div><div class="footer-group"><h4 class="footer-title">文库</h4><div class="footer-links"><a class="footer-item" href="/archives/">时光机</a><a class="footer-item" href="/tags/">标签</a><a class="footer-item" href="/categories/">分类</a><a class="footer-item" href="/books/">书评</a><a class="footer-item" target="_blank" rel="noopener" href="https://doc.harriswong.top/">文档网站</a></div></div><div class="footer-group"><h4 class="footer-title">生活</h4><div class="footer-links"><a class="footer-item" href="/playlist/">歌单</a><a class="footer-item" href="/movies/">影评</a><a class="footer-item" href="/gallery/">相册</a><a class="footer-item" href="/bb/">哔哔</a><a class="footer-item" href="/sweetcloud/" style="color:#dfb1e4e6">情侣哔哔</a></div></div><div class="footer-group"><h4 class="footer-title">功能</h4><div class="footer-links"><a class="footer-item" target="_blank" rel="noopener" href="https://gal.harriswong.top/">画廊</a><a class="footer-item" target="_blank" rel="noopener" href="https://mb.harriswong.top/">八音盒</a><a class="footer-item" target="_blank" rel="noopener" href="https://navi.harriswong.top/">网址导航</a><a class="footer-item" href="/videoparsing/">视频解析</a><a class="footer-item" href="/ymts/" style="color:#ff8840d9">留学团队</a></div></div><div class="footer-group"><h4 class="footer-title">本站</h4><div class="footer-links"><a class="footer-item" href="/notice/">公告栏</a><a class="footer-item" href="/about/">关于本站</a><a class="footer-item" href="/log/">更新手账</a><a class="footer-item" href="/about/#%E6%95%B0%E6%8D%AE%E7%BB%9F%E8%AE%A1">数据统计</a><a class="footer-item" href="/about/#%E8%B5%9E%E8%B5%8F%E5%90%8D%E5%8D%95">赞赏名单</a></div></div><div class="footer-group"><h4 class="footer-title">联系</h4><div class="footer-links"><a class="footer-item" href="/comments/">留言信枫</a><a class="footer-item" href="mailto:hassanwong@qq.com">发送邮件</a></div><h4 class="footer-title">朋友</h4><div class="footer-links"><a class="footer-item" href="/link/">友人帐</a><a class="footer-item" href="/friendcircle/">朋友圈</a></div></div><div class="footer-group"><h4 class="footer-title">协议</h4><div class="footer-links"><a class="footer-item" href="/privacy/">隐私政策</a><a class="footer-item" href="/cc/">版权协议</a></div><h4 class="footer-title">推荐</h4><div class="footer-links"><a class="footer-item" href="/tags/%F0%9F%94%A0%E8%8B%B1%E8%AF%AD/">🔠英语</a><a class="footer-item" href="/tags/%F0%9F%A6%8BButterfly/">🦋Butterfly</a></div></div><div class="footer_custom_text"><h4>网站徽标</h4><p><a style="margin-inline:5px" target="_blank" href="https://hexo.io/"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为Hexo"></a><a style="margin-inline:5px" target="_blank" href="https://butterfly.js.org/"><img src="https://img.shields.io/badge/Theme-Butterfly-7138b6?style=flat&logo=bitdefender" title="主题采用butterfly"></a><a style="margin-inline:5px" target="_blank" href="https://www.jsdelivr.com/"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr" title="本站使用JsDelivr为静态资源提供CDN加速"></a><a style="margin-inline:5px" target="_blank" href="https://github.com/"><img src="https://img.shields.io/badge/Source-GitHub-67e1fb?style=flat&logo=GitHub" title="本站采用三线部署，境外线路托管于GitHub"></a><a style="margin-inline:5px" target="_blank" href="https://vercel.com/"><img src="https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&logo=Vercel" title="本站采用三线部署，默认、电信线路托管于Vercel"></a><a style="margin-inline:5px" target="_blank" href="https://coding.net/"><img src="https://img.shields.io/badge/Hosted-Coding-0cedbe?style=flat&logo=Codio" title="本站采用三线部署，现已关闭coding静态页面"></a><a style="margin-inline:5px" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-ee5b32?style=flat&logo=Claris" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a><a href="https://icp.gov.moe/?keyword=20210809" target="_blank" style="margin:0"><img src="https://img.shields.io/badge/%E8%90%8CICP%E5%A4%87-20210809-fe1384?style-flat&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAAByxJREFUSInl1nlwVeUZx/HPuTckkD0kQFiCEEIUlNUCAqKoSBV1AIt1ikpVLFbLONjWGUXbmWrbweJMy7hUxbbTjsUq6KCiWEvr0kE2WVK2QCKBJCxJgEASsienfxwqMob+3Zm+f93z3vM+32f5vc9z+H9bwVcfOp/YQ+1prhhEZS1VDQzqQ1MjiQmIC5Liwm3lBWpqFimrulb/7A/067vM2IsOBZ2h8MhJQW6KMDNVsKeaizKEyUlsKueqgWJ39AMJF3QpDCNYr1SaEig/lWNX2Z1h6dH5/lVyGdVIZFf7MHo9bEfh9rCg/+8NyHlN77QTsnpQ0i2y08VK+BosfhbW0cHxqmSfFd9qW+l9Pi+5WltFdGTsOBbO5dJcdh3lN5+xff0Y2zuelXjRsyYUrjOu4BVJaavlpbWIJRBLOM+J81O95AAnTtM9vNHGknut3zdT48FutJE3koWTuG4oSXH+VsInX3B9IdcVUNfCuv08t4GjO6NspOa3BNcOXx1eOugVHQnrTMkTuyWrC/BjRZO9uPYTpw7HhTWkXcLd45l9GblpHD7NWzt5ZTMXZ/OdkTy+lvR07rmcmWffq6pn9W5e/oymfcT6kJbXHiydMyVYkL/x66n+ZMcctQfjhgxl6UIGZ3Ooltd2RIZqjqKRS0ew9cFIA1cO5urlLHuPZWsZPJiZw7gqn0VT2HCIR9+jvCQhfHPrLGyE2Hng2roBxHnmJoZnc9drbD3I6QaaWkjpSVoeu4+x5XB05qMDqCenHz37UHmcFRv54ZuMeoYrB/L0DPRgZ0WfrsXVKzPX3nYykrn3dUZl8+Q0Qox/gc/L6ZlKzxQefo+UROpa6Z4VCedkPd8YyJYHI3u5T/HAShZNQxsXZfR3pCtwRW066VEeOuIUVUf77+9jTw2pycTOJml7Je1t9EgiI5X2jkgyze1fCSSdtjhBiJCkpKyuI+5oTdAtkTCgVwrbKsl8ko6QjO40tZ67EpkpdIbRf20dkbPpPTjdwsSX6I5dJYy4hoQAaZQdDy4A1iEMI613T6LtBPXJpPakrjGqc1Y6CTFq62htJp5KRwPJKWSkU3WKiiPEEqO6xgM6oZmctJhDXYH7Z59xuCyKpK6R26ZE+ys3MWYoN1/Mc5uoqmbEQJ6fTc/ulJ3i/lUc+YIfzeKhKzjVHN31A3XRHddKSrf6/6DOV3VTcw1hVKfkxOhaPDAe1UwfwmNTqT1Drxw+nE9xNXetIjHG2vnoxoT+rNrN2Of58Rp6JZ+ldKes5kjX4G7dKuikpoERfaltYnQ/DOSS3hEAFk9lXQkLnmf7Ib65lPJT3HU1+46Tm8rYvgzKYVA2h+vQIMjvewHwdSN20MiOSmZczO4a1hSzYi77T7CiiPF5JMTZexjJ5OagkwNV9M+MnJ09nKU3smgyQ3PYWoEO4fUjii4QceJmevJuMeP6csUAln4atcbSGoqOUpjD30uZNwnpHNtN3lC+NZa1xeT34pGVTJ3PL9+Ohs6GQ8gVtHZs6VLVwZhBReGwoXvt3THM/hP0SWVnCR8f4PMjkffjB/DQS8waxpHFfFgaaeHZDRRtJn0yP5tF31ymFVJ2nN27GD66KBzca2/XEWdkUpD3Fmd4tYj0FMS54Q9UnuaDUv6yE/24ewWP/DU6N/d1fvousYEs28DyLVEvGDOAt/egmSkXv2VYn3NBfpXbua6J8hMFFvy2RHsL+57gmX+w/AN651PfEDWQzLRI+afqIqOxFDJT6Rbn9Bmad3PnTH5wIxOXkJTWGiz57hCDsyqDWVldRNzeyOh+paaPfpFKnvqQX88iZwDVx0lLJqUHbe3EkZ1Odm+yUqK2GHYKmhvIG8fyeTz9IY5x67jnFPapdPDkl6jzwEF9IDjZJlgwfbG+o2u8+g4rd7D/UYI41TXnevV5K4j2q6uESckUP8rvNrH6fUH/sRXB9AlPONMSDZ8uazwoi56JjEyvdftV88jinhf4uIzmJRQOoOYgja0RKAiIBZxpjvZH5tP0c97axcLlyBXOuWZemJTYFFbUCU+1dl3j8PGSyFhnJ7EkYcWh7/njqpep5xfzWTyZZ7dEg73xOJKiGqf3YenNLBjLTz7i539COg/OvSOYO2GFo/VRG0Zwe0YX4Ns3R7NXSCxBeM8IthXfZvGf3xCWc/kkXvg2vVP4YB/rDzC1gGlDo+50/xvs2khKPrNnzAzmTH5HbzR0fkkKro93Ab5vx9kfaGgT3lLA5EyWbRpoTdHbSreOppGJV/PwlRTksK+aZz5l6z+RLBgxaau5k2cJelTKzmRQMq0d51J8UxL+23d1TDTcj7WQllZu4YwxDo+eZc22X9mwd6gN65GIFmQzampxcMOoR1xeuMbpVoqromsXdG3+wmCiekNtfSSmiUNWu2zgap+WjlZW8X11TeNkpWwICvNfCm8u3Cmxg4PN0VdmEJw7/7+0/g32RaqCbhRecAAAAABJRU5ErkJggg==" title="萌国ICP备案"></a><a style="margin-inline:5px" target="_blank" href="https://space.bilibili.com/383883097"><img src="https://img.shields.io/badge/dynamic/json?color=%23fe7499&label=Bilibili&query=%24.data.totalSubs&suffix=%20Followers&url=https%3A%2F%2Fapi.spencerwoo.com%2Fsubstats%2F%3Fsource%3Dbilibili%26queryKey%3D383883097&logo=Bilibili" title="什锦区UP主"></a><a style="margin-inline:5px" target="_blank" href="https://weibo.com/u/6574421101"><img src="https://img.shields.io/badge/dynamic/json?color=%23e32428&label=Weibo&query=%24.data.totalSubs&suffix=%20Followers&url=https%3A%2F%2Fapi.spencerwoo.com%2Fsubstats%2F%3Fsource%3Dweibo%26queryKey%3D6574421101&logo=Sina%20Weibo" title="分享学习、生活动态"></a></p></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="hide-aside-btn" type="button" title="单双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论区"><i class="fas fa-comments"></i></a></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">站内搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="输入关键词查找文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://unpkg.com/vue@2.6.11"></script><script src="/js/tw_cn.js"></script><script src="https://unpkg.com/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://unpkg.com/instant.page/instantpage.js" type="module"></script><script src="https://unpkg.com/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://unpkg.com/node-snackbar/dist/snackbar.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hassan-assets/js/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box')?.classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box')?.classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>if(window.MathJax)MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typeset();else{window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],tags:"ams"},chtml:{scale:1.2},options:{renderActions:{findScript:[10,t=>{for(const e of document.querySelectorAll('script[type^="math/tex"]')){const a=!!e.type.match(/; *mode=display/),n=new t.options.MathItem(e.textContent,t.inputJax[0],a),s=document.createTextNode("");e.parentNode.replaceChild(s,e),n.start={node:s,delim:"",n:0},n.end={node:s,delim:"",n:0},t.math.push(n)}},""],insertScript:[200,()=>{document.querySelectorAll("mjx-container:not([display])").forEach(t=>{const e=t.parentNode;"li"===e.nodeName.toLowerCase()?e.parentNode.classList.add("has-jax"):e.classList.add("has-jax")})},"",!1]}}};const t=document.createElement("script");t.src="https://unpkg.com/mathjax/es5/tex-mml-chtml.js",t.id="MathJax-script",t.async=!0,document.head.appendChild(t)}</script><link rel="stylesheet" href="https://unpkg.com/katex/dist/katex.min.css"><script src="https://unpkg.com/katex/dist/contrib/copy-tex.min.js"></script><script>document.querySelectorAll("#article-container span.katex-display").forEach(a=>{btf.wrap(a,"div",{class:"katex-wrap"})})</script><script>(()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(e.length){window.runMermaid=()=>{window.loadMermaid=!0;const t="dark"===document.documentElement.getAttribute("data-theme")?"dark":"forest";Array.from(e).forEach((e,n)=>{const r=e.firstElementChild,d="mermaid-"+n,i="%%{init:{ 'theme':'"+t+"'}}%%\n"+r.textContent;mermaid.mermaidAPI.render(d,i,e=>{r.insertAdjacentHTML("afterend",e)})})};const t=()=>{window.loadMermaid?runMermaid():getScript("https://unpkg.com/mermaid/dist/mermaid.min.js").then(runMermaid)};window.pjax?t():document.addEventListener("DOMContentLoaded",t)}})()</script><script>(()=>{const o=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo-hassanblog.vercel.app/",region:"",onCommentLoaded:function(){btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null)),GLOBAL_CONFIG_SITE.isPost&&(()=>{const o=document.getElementById("twikoo-count");o&&twikoo.getCommentsCount({envId:"https://twikoo-hassanblog.vercel.app/",region:"",urls:[window.location.pathname],includeReply:!1}).then((function(t){o.innerText=t[0].count})).catch((function(o){console.error(o)}))})()},t=()=>{"object"!=typeof twikoo?getScript("https://unpkg.com/twikoo/dist/twikoo.all.min.js").then(o):setTimeout(o,0)};t()})()</script><script>var gitcalendar = new Vue({
  el: '#gitcalendar',
  data: {
    simplemode: false, 
    user: 'hassanblog',
    fixed: 'fixed',
    px: 'px',
    x: '',
    y: '',
    span1: '',
    span2: '',
    month: ['Jan.', 'Feb.', 'Mar.', 'Apr.', 'May', 'Jun.', 'Jul.', 'Aug.', 'Sep.', 'Oct.', 'Nov.', 'Dec.'],
    monthchange: [],
    oneyearbeforeday: '',
    thisday: '',
    amonthago: '',
    aweekago: '',
    weekdatacore: 0,
    datacore: 0,
    total: 0,
    datadate: '',
    data: [],
    positionplusdata: [],
    firstweek: [],
    lastweek: [],
    beforeweek: [],
    thisweekdatacore: 0,
    mounthbeforeday: 0,
    mounthfirstindex: 0,
    crispedges: 'crispedges',
    thisdayindex: 0,
    amonthagoindex: 0,
    amonthagoweek: [],
    firstdate: [],
    first2date: [],
    montharrbefore: [],
    monthindex: 0,
    color: ['rgb(112, 140, 207, 0.1)', '#d2f3c7', '#b0f0b4', '#8ae8c2', '#75e3d9', '#60c6df', '#4a93db', '#3555d7', '#3128ce', '#5325bc', '#6c22aa']
  },
  methods: {
    selectStyle(data, event) {
      document.querySelector('.angle-wrapper').style.display = 'block'
      this.span1 = data.date;
      this.span2 = data.count;
      this.x = event.clientX - 100;
      this.y = event.clientY - 60
    },
    outStyle() {
      document.querySelector('.angle-wrapper').style.display = 'none'
    }, //-修改逻辑
    thiscolor(x) {
      if (x === 0) {
        return this.color[0]
      } else if (x < 2) {
        return this.color[1]
      } else if (x < 3) {
        return this.color[2]
      } else if (x < 4) {
        return this.color[3]
      } else if (x < 6) {
        return this.color[4]
      } else if (x < 8) {
        return this.color[5]
      } else if (x < 11) {
        return this.color[6]
      } else if (x < 14) {
        return this.color[7]
      } else if (x < 17) {
        return this.color[8]
      } else if (x < 22) {
        return this.color[9]
      } else {
        return this.color[10]
      }
    },
  }
});
var apiurl = 'python-yln-github-calendar-api.vercel.app' ? 'https://python-yln-github-calendar-api.vercel.app/api?' : 'https://githubapi.ryanchristian.dev/user/'
var githubapiurl = apiurl + gitcalendar.user;
//- var githubapiurl = "https://python-github-calendar-api-hassan.vercel.app/api?hassanblog"
//canvas绘图
function responsiveChart() {
  let c = document.getElementById("gitcanvas");
  if (c) {
    let cmessage = document.getElementById("gitmessage");
    let ctx = c.getContext("2d");
    c.width = document.getElementById("gitcalendarcanvasbox")?.offsetWidth;
    let linemaxwitdh = 0.96 * c.width / gitcalendar.data.length;
    c.height = 9 * linemaxwitdh;
    let lineminwitdh = 0.8 * linemaxwitdh;
    let setposition = {
      x: 0.02 * c.width,
      y: 0.025 * c.width
    };
    for (let week in gitcalendar.data) {
      weekdata = gitcalendar.data[week];
      for (let day in weekdata) {
        let dataitem = {
          date: "",
          count: "",
          x: 0,
          y: 0
        };
        gitcalendar.positionplusdata.push(dataitem);
        ctx.fillStyle = gitcalendar.thiscolor(weekdata[day].count);
        setposition.y = Math.round(setposition.y * 100) / 100;
        dataitem.date = weekdata[day].date;
        dataitem.count = weekdata[day].count;
        dataitem.x = setposition.x;
        dataitem.y = setposition.y;
        ctx.fillRect(setposition.x, setposition.y, lineminwitdh, lineminwitdh);
        setposition.y = setposition.y + linemaxwitdh
      };
      setposition.y = 0.025 * c.width;
      setposition.x = setposition.x + linemaxwitdh
    };
    ctx.font = "600  Arial";
    ctx.fillStyle = '#aaa';
    ctx.fillText("7", 0, 1.9 * linemaxwitdh);
    ctx.fillText("1", 0, 2.9 * linemaxwitdh);
    ctx.fillText("2", 0, 3.9 * linemaxwitdh);
    ctx.fillText("3", 0, 4.9 * linemaxwitdh);
    ctx.fillText("4", 0, 5.9 * linemaxwitdh);
    ctx.fillText("5", 0, 6.9 * linemaxwitdh);
    ctx.fillText("6", 0, 7.9 * linemaxwitdh);
    let monthindexlist = c.width / 24;
    for (let index in gitcalendar.monthchange) {
      ctx.fillText(gitcalendar.monthchange[index], monthindexlist, 0.7 * linemaxwitdh);
      monthindexlist = monthindexlist + c.width / 12
    };
    cmessage.onmousemove = function(event) {
      document.querySelector('.angle-wrapper').style.display = 'none'
    };
    c.onmousemove = function(event) {
      document.querySelector('.angle-wrapper').style.display = 'none'
      getMousePos(c, event);
    };

    function getMousePos(canvas, event) {
      var rect = canvas.getBoundingClientRect();
      var x = event.clientX - rect.left * (canvas.width / rect.width);
      var y = event.clientY - rect.top * (canvas.height / rect.height);
      //console.log("x:"+x+",y:"+y);
      for (let item of gitcalendar.positionplusdata) {
        let lenthx = x - item.x;
        let lenthy = y - item.y;
        //console.log(lenthx,lenthy);
        if (0 < lenthx && lenthx < lineminwitdh) {
          if (0 < lenthy && lenthy < lineminwitdh) {
            //console.log(item.date,item.count)
            document.querySelector('.angle-wrapper').style.display = 'block'
            gitcalendar.span1 = item.date;
            gitcalendar.span2 = item.count;
            gitcalendar.x = event.clientX - 100;
            gitcalendar.y = event.clientY - 60
          }
        }
        //if(0< x - item.x <lineminwitdh&&0< y - item.y <lineminwitdh){
        //console.log(item.count,item.date);
        //}
      }
    }
  }
}
//数据统计算法
function addlastmonth() {
  if (gitcalendar.thisdayindex === 0) {
    thisweekcore(52);
    thisweekcore(51);
    thisweekcore(50);
    thisweekcore(49);
    thisweekcore(48);
    gitcalendar.thisweekdatacore += gitcalendar.firstdate[6].count;
    gitcalendar.amonthago = gitcalendar.firstdate[6].date
  } else {
    thisweekcore(52);
    thisweekcore(51);
    thisweekcore(50);
    thisweekcore(49);
    thisweek2core();
    gitcalendar.amonthago = gitcalendar.first2date[gitcalendar.thisdayindex - 1].date
  }
};

function thisweek2core() {
  for (let i = gitcalendar.thisdayindex - 1; i < gitcalendar.first2date.length; i++) {
    gitcalendar.thisweekdatacore += gitcalendar.first2date[i].count
  }
};

function thisweekcore(index) {
  for (let item of gitcalendar.data[index]) {
    gitcalendar.thisweekdatacore += item.count
  }
};

function addlastweek() {
  for (let item of gitcalendar.lastweek) {
    gitcalendar.weekdatacore += item.count
  }
};

function addbeforeweek() {
  for (let i = gitcalendar.thisdayindex; i < gitcalendar.beforeweek.length; i++) {
    gitcalendar.weekdatacore += gitcalendar.beforeweek[i].count
  }
};

function addweek(data) {
  if (gitcalendar.thisdayindex === 6) {
    gitcalendar.aweekago = gitcalendar.lastweek[0].date;
    addlastweek()
  } else {
    lastweek = data.contributions[51];
    gitcalendar.aweekago = lastweek[gitcalendar.thisdayindex + 1].date;
    addlastweek();
    addbeforeweek()
  }
}

fetch(githubapiurl)
  .then(data => data.json())
  .then(data => {
    gitcalendar.data = data.contributions;
    gitcalendar.total = data.total;
    gitcalendar.first2date = gitcalendar.data[48];
    gitcalendar.firstdate = gitcalendar.data[47];
    gitcalendar.firstweek = data.contributions[0];
    gitcalendar.lastweek = data.contributions[52];
    gitcalendar.beforeweek = data.contributions[51];
    gitcalendar.thisdayindex = gitcalendar.lastweek.length - 1;
    gitcalendar.thisday = gitcalendar.lastweek[gitcalendar.thisdayindex].date;
    gitcalendar.oneyearbeforeday = gitcalendar.firstweek[0].date;
    gitcalendar.monthindex = gitcalendar.thisday.substring(5, 7) * 1;
    gitcalendar.montharrbefore = gitcalendar.month.splice(gitcalendar.monthindex, 12 - gitcalendar.monthindex);
    gitcalendar.monthchange = gitcalendar.montharrbefore.concat(gitcalendar.month);
    addweek(data);
    addlastmonth();
    responsiveChart();
  })
  .catch(function(error) {
    console.log(error);
  });

//手机版更换为svg绘制
if (document.getElementById("gitcalendarcanvasbox")?.offsetWidth < 500) {
  gitcalendar.simplemode = false
}

//当改变窗口大小时重新绘制canvas
window.onresize = function() {
  if (gitcalendar.simplemode) responsiveChart()
}

//解决滚动滑轮时出现的标签显示
window.onscroll = function() {
  if (document.querySelector('.angle-wrapper')) {
    document.querySelector('.angle-wrapper').style.display = 'none'
  }
};</script></div><script>window.addEventListener("load",()=>{const e=e=>{let t="";if(e.length)for(let n=0;n<e.length;n++){t+="<div class='aside-list-item'>";{const a="data-lazy-src";t+=`<a href='${e[n].url}' class='thumbnail'><img ${a}='${e[n].avatar}' alt='${e[n].nick}'></a>`}t+=`<div class='content'>\n        <a class='comment' href='${e[n].url}' title='${e[n].content}'>${e[n].content}</a>\n        <div class='name'><span>${e[n].nick} / </span><time datetime="${e[n].date}">${btf.diffDate(e[n].date,!0)}</time></div>\n        </div></div>`}else t+="看什么看，还不赶紧评论一条吗？";let n=document.querySelector("#card-newest-comments .aside-list");n.innerHTML=t,window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(n)},t=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const t=saveToLocal.get("twikoo-newest-comments");t?e(JSON.parse(t)):(()=>{const t=()=>{twikoo.getRecentComments({envId:"https://twikoo-hassanblog.vercel.app/",region:"",pageSize:5,includeReply:!0}).then((function(t){const n=t.map(e=>{return{content:(t=e.comment,""===t||(t=(t=(t=(t=t.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length>150&&(t=t.substring(0,150)+"..."),t),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.id,date:new Date(e.created).toISOString()};var t});saveToLocal.set("twikoo-newest-comments",JSON.stringify(n),10/1440),e(n)})).catch((function(e){document.querySelector("#card-newest-comments .aside-list").innerHTML="无法获取评论，请确认相关配置是否正确"}))};"object"==typeof twikoo?t():getScript("https://unpkg.com/twikoo/dist/twikoo.all.min.js").then(t)})()}};t(),document.addEventListener("pjax:complete",t)})</script><script src="https://wowjs.uk/dist/wow.min.js"></script><script src="/js/custom/wow.js"></script><script src="/js/custom/pace.js"></script><div id="doraemon_to_top"><img alt="doraemon_to_top" title="返回顶部" onclick="fly_to_top()" src="https://cdn.jsdelivr.net/npm/hassan-assets/img/Doraemon.png"></div><script defer src="/js/custom/smooth.js"></script><script async src="//at.alicdn.com/t/font_2032782_ev6ytrh30f.js"></script><script async src="//at.alicdn.com/t/font_2204525_jxth1d6fs6o.js"></script><script defer src="/js/custom/console.js"></script><script src="/js/custom/rgbaster.js"></script><script src="/js/custom/custom.js"></script><script data-pjax>coverColor(),workboard()</script><div class="aplayer no-destroy" data-id="5363191876" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="true" data-theme="#1fc7b6" data-order="random" data-preload="none" data-autoplay="false" muted></div><script src="https://unpkg.com/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!0,document.body.addEventListener("input",POWERMODE)</script><script id="click-show-text" src="https://unpkg.com/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="Jaggie,🍁,🌼,Harris,🌸,🌻" data-fontsize="18px" data-random="true" async></script><link rel="stylesheet" href="https://unpkg.com/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://unpkg.com/aplayer/dist/APlayer.min.js"></script><script src="https://unpkg.com/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://unpkg.com/pjax/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),"object"==typeof preloader&&preloader.initLoading(),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>